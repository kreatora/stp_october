import"./input.js";class Ct{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=e[i],o=n+a,s=Math.abs(n)<Math.abs(a)?n-(o-a):a-(o-n);s&&(e[r++]=s),n=o}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,a,o=0;if(e>0){for(o=n[--e];e>0&&(r=o,i=n[--e],o=r+i,a=i-(o-r),!a););e>0&&(a<0&&n[e-1]<0||a>0&&n[e-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class Ci extends Map{constructor(n,e=Ua){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Ii(this,n))}has(n){return super.has(Ii(this,n))}set(n,e){return super.set(Va(this,n),e)}delete(n){return super.delete(Ga(this,n))}}function Ii({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Va({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Ga({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Ua(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Ka=Math.sqrt(50),qa=Math.sqrt(10),Xa=Math.sqrt(2);function Ae(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Ka?10:a>=qa?5:a>=Xa?2:1;let s,f,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),f=Math.round(n*u),s/u<t&&++s,f/u>n&&--f,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),f=Math.round(n/u),s*u<t&&++s,f*u>n&&--f),f<s&&.5<=e&&e<2?Ae(t,n,e*2):[s,f,u]}function Za(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,o]=r?Ae(n,t,e):Ae(t,n,e);if(!(a>=i))return[];const s=a-i+1,f=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)f[u]=(a-u)/-o;else for(let u=0;u<s;++u)f[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)f[u]=(i+u)/-o;else for(let u=0;u<s;++u)f[u]=(i+u)*o;return f}function Tr(t,n,e){return n=+n,t=+t,e=+e,Ae(t,n,e)[2]}function Wa(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Tr(n,t,e):Tr(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function lr(t,n){let e;for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);return e}function cr(t,n){let e;for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);return e}function*Ja(t){for(const n of t)yield*n}function Io(t){return Array.from(Ja(t))}function $r(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,a=new Array(i);++r<i;)a[r]=t+r*e;return a}function Qa(t){return t}var fr=1,hr=2,Nr=3,Dn=4,Li=1e-6;function ja(t){return"translate("+t+",0)"}function ts(t){return"translate(0,"+t+")"}function ns(t){return n=>+t(n)}function es(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function rs(){return!this.__axis}function Lo(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===fr||t===Dn?-1:1,l=t===Dn||t===hr?"x":"y",c=t===fr||t===Nr?ja:ts;function h(d){var g=r??(n.ticks?n.ticks.apply(n,e):n.domain()),w=i??(n.tickFormat?n.tickFormat.apply(n,e):Qa),S=Math.max(a,0)+s,y=n.range(),_=+y[0]+f,b=+y[y.length-1]+f,M=(n.bandwidth?es:ns)(n.copy(),f),A=d.selection?d.selection():d,N=A.selectAll(".domain").data([null]),B=A.selectAll(".tick").data(g,n).order(),L=B.exit(),z=B.enter().append("g").attr("class","tick"),D=B.select("line"),E=B.select("text");N=N.merge(N.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(z),D=D.merge(z.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),E=E.merge(z.append("text").attr("fill","currentColor").attr(l,u*S).attr("dy",t===fr?"0em":t===Nr?"0.71em":"0.32em")),d!==A&&(N=N.transition(d),B=B.transition(d),D=D.transition(d),E=E.transition(d),L=L.transition(d).attr("opacity",Li).attr("transform",function(O){return isFinite(O=M(O))?c(O+f):this.getAttribute("transform")}),z.attr("opacity",Li).attr("transform",function(O){var $=this.parentNode.__axis;return c(($&&isFinite($=$(O))?$:M(O))+f)})),L.remove(),N.attr("d",t===Dn||t===hr?o?"M"+u*o+","+_+"H"+f+"V"+b+"H"+u*o:"M"+f+","+_+"V"+b:o?"M"+_+","+u*o+"V"+f+"H"+b+"V"+u*o:"M"+_+","+f+"H"+b),B.attr("opacity",1).attr("transform",function(O){return c(M(O)+f)}),D.attr(l+"2",u*a),E.attr(l,u*S).text(w),A.filter(rs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===hr?"start":t===Dn?"end":"middle"),A.each(function(){this.__axis=M})}return h.scale=function(d){return arguments.length?(n=d,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),h):e.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(f=+d,h):f},h}function is(t){return Lo(Nr,t)}function os(t){return Lo(Dn,t)}var as={value:()=>{}};function si(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new ve(e)}function ve(t){this._=t}function ss(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}ve.prototype=si.prototype={constructor:ve,on:function(t,n){var e=this._,r=ss(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=us(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=Pi(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Pi(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ve(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function us(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Pi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=as,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var kr="http://www.w3.org/1999/xhtml";const Bi={svg:"http://www.w3.org/2000/svg",xhtml:kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Je(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Bi.hasOwnProperty(n)?{space:Bi[n],local:t}:t}function ls(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===kr&&n.documentElement.namespaceURI===kr?n.createElement(t):n.createElementNS(e,t)}}function cs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Po(t){var n=Je(t);return(n.local?cs:ls)(n)}function fs(){}function ui(t){return t==null?fs:function(){return this.querySelector(t)}}function hs(t){typeof t!="function"&&(t=ui(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=new Array(o),f,u,l=0;l<o;++l)(f=a[l])&&(u=t.call(f,f.__data__,l,a))&&("__data__"in f&&(u.__data__=f.__data__),s[l]=u);return new Mt(r,this._parents)}function ds(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ps(){return[]}function Bo(t){return t==null?ps:function(){return this.querySelectorAll(t)}}function gs(t){return function(){return ds(t.apply(this,arguments))}}function ms(t){typeof t=="function"?t=gs(t):t=Bo(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o=n[a],s=o.length,f,u=0;u<s;++u)(f=o[u])&&(r.push(t.call(f,f.__data__,u,o)),i.push(f));return new Mt(r,i)}function Do(t){return function(){return this.matches(t)}}function zo(t){return function(n){return n.matches(t)}}var ys=Array.prototype.find;function vs(t){return function(){return ys.call(this.children,t)}}function ws(){return this.firstElementChild}function xs(t){return this.select(t==null?ws:vs(typeof t=="function"?t:zo(t)))}var _s=Array.prototype.filter;function bs(){return Array.from(this.children)}function Ss(t){return function(){return _s.call(this.children,t)}}function Ms(t){return this.selectAll(t==null?bs:Ss(typeof t=="function"?t:zo(t)))}function Es(t){typeof t!="function"&&(t=Do(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],f,u=0;u<o;++u)(f=a[u])&&t.call(f,f.__data__,u,a)&&s.push(f);return new Mt(r,this._parents)}function Fo(t){return new Array(t.length)}function As(){return new Mt(this._enter||this._groups.map(Fo),this._parents)}function Te(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Te.prototype={constructor:Te,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ts(t){return function(){return t}}function $s(t,n,e,r,i,a){for(var o=0,s,f=n.length,u=a.length;o<u;++o)(s=n[o])?(s.__data__=a[o],r[o]=s):e[o]=new Te(t,a[o]);for(;o<f;++o)(s=n[o])&&(i[o]=s)}function Ns(t,n,e,r,i,a,o){var s,f,u=new Map,l=n.length,c=a.length,h=new Array(l),d;for(s=0;s<l;++s)(f=n[s])&&(h[s]=d=o.call(f,f.__data__,s,n)+"",u.has(d)?i[s]=f:u.set(d,f));for(s=0;s<c;++s)d=o.call(t,a[s],s,a)+"",(f=u.get(d))?(r[s]=f,f.__data__=a[s],u.delete(d)):e[s]=new Te(t,a[s]);for(s=0;s<l;++s)(f=n[s])&&u.get(h[s])===f&&(i[s]=f)}function ks(t){return t.__data__}function Rs(t,n){if(!arguments.length)return Array.from(this,ks);var e=n?Ns:$s,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ts(t));for(var a=i.length,o=new Array(a),s=new Array(a),f=new Array(a),u=0;u<a;++u){var l=r[u],c=i[u],h=c.length,d=Cs(t.call(l,l&&l.__data__,u,r)),g=d.length,w=s[u]=new Array(g),S=o[u]=new Array(g),y=f[u]=new Array(h);e(l,c,w,S,y,d,n);for(var _=0,b=0,M,A;_<g;++_)if(M=w[_]){for(_>=b&&(b=_+1);!(A=S[b])&&++b<g;);M._next=A||null}}return o=new Mt(o,r),o._enter=s,o._exit=f,o}function Cs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Is(){return new Mt(this._exit||this._groups.map(Fo),this._parents)}function Ls(t,n,e){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?a.remove():e(a),r&&i?r.merge(i).order():i}function Ps(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,a=r.length,o=Math.min(i,a),s=new Array(i),f=0;f<o;++f)for(var u=e[f],l=r[f],c=u.length,h=s[f]=new Array(c),d,g=0;g<c;++g)(d=u[g]||l[g])&&(h[g]=d);for(;f<i;++f)s[f]=e[f];return new Mt(s,this._parents)}function Bs(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Ds(t){t||(t=zs);function n(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o=e[a],s=o.length,f=i[a]=new Array(s),u,l=0;l<s;++l)(u=o[l])&&(f[l]=u);f.sort(n)}return new Mt(i,this._parents).order()}function zs(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Fs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Os(){return Array.from(this)}function Hs(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Ys(){let t=0;for(const n of this)++t;return t}function Vs(){return!this.node()}function Gs(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Us(t){return function(){this.removeAttribute(t)}}function Ks(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qs(t,n){return function(){this.setAttribute(t,n)}}function Xs(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Zs(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Ws(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Js(t,n){var e=Je(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Ks:Us:typeof n=="function"?e.local?Ws:Zs:e.local?Xs:qs)(e,n))}function Oo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qs(t){return function(){this.style.removeProperty(t)}}function js(t,n,e){return function(){this.style.setProperty(t,n,e)}}function tu(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function nu(t,n,e){return arguments.length>1?this.each((n==null?Qs:typeof n=="function"?tu:js)(t,n,e??"")):An(this.node(),t)}function An(t,n){return t.style.getPropertyValue(n)||Oo(t).getComputedStyle(t,null).getPropertyValue(n)}function eu(t){return function(){delete this[t]}}function ru(t,n){return function(){this[t]=n}}function iu(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function ou(t,n){return arguments.length>1?this.each((n==null?eu:typeof n=="function"?iu:ru)(t,n)):this.node()[t]}function Ho(t){return t.trim().split(/^|\s+/)}function li(t){return t.classList||new Yo(t)}function Yo(t){this._node=t,this._names=Ho(t.getAttribute("class")||"")}Yo.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Vo(t,n){for(var e=li(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Go(t,n){for(var e=li(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function au(t){return function(){Vo(this,t)}}function su(t){return function(){Go(this,t)}}function uu(t,n){return function(){(n.apply(this,arguments)?Vo:Go)(this,t)}}function lu(t,n){var e=Ho(t+"");if(arguments.length<2){for(var r=li(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?uu:n?au:su)(e,n))}function cu(){this.textContent=""}function fu(t){return function(){this.textContent=t}}function hu(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function du(t){return arguments.length?this.each(t==null?cu:(typeof t=="function"?hu:fu)(t)):this.node().textContent}function pu(){this.innerHTML=""}function gu(t){return function(){this.innerHTML=t}}function mu(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function yu(t){return arguments.length?this.each(t==null?pu:(typeof t=="function"?mu:gu)(t)):this.node().innerHTML}function vu(){this.nextSibling&&this.parentNode.appendChild(this)}function wu(){return this.each(vu)}function xu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _u(){return this.each(xu)}function bu(t){var n=typeof t=="function"?t:Po(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Su(){return null}function Mu(t,n){var e=typeof t=="function"?t:Po(t),r=n==null?Su:typeof n=="function"?n:ui(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Eu(){var t=this.parentNode;t&&t.removeChild(this)}function Au(){return this.each(Eu)}function Tu(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function $u(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Nu(t){return this.select(t?$u:Tu)}function ku(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ru(t){return function(n){t.call(this,n,this.__data__)}}function Cu(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Iu(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,a;e<i;++e)a=n[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):n[++r]=a;++r?n.length=r:delete this.__on}}}function Lu(t,n,e){return function(){var r=this.__on,i,a=Ru(n);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=e),i.value=n;return}}this.addEventListener(t.type,a,e),i={type:t.type,name:t.name,value:n,listener:a,options:e},r?r.push(i):this.__on=[i]}}function Pu(t,n,e){var r=Cu(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,u=s.length,l;f<u;++f)for(i=0,l=s[f];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=n?Lu:Iu,i=0;i<a;++i)this.each(s(r[i],n,e));return this}function Uo(t,n,e){var r=Oo(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Bu(t,n){return function(){return Uo(this,t,n)}}function Du(t,n){return function(){return Uo(this,t,n.apply(this,arguments))}}function zu(t,n){return this.each((typeof n=="function"?Du:Bu)(t,n))}function*Fu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ko=[null];function Mt(t,n){this._groups=t,this._parents=n}function ee(){return new Mt([[document.documentElement]],Ko)}function Ou(){return this}Mt.prototype=ee.prototype={constructor:Mt,select:hs,selectAll:ms,selectChild:xs,selectChildren:Ms,filter:Es,data:Rs,enter:As,exit:Is,join:Ls,merge:Ps,selection:Ou,order:Bs,sort:Ds,call:Fs,nodes:Os,node:Hs,size:Ys,empty:Vs,each:Gs,attr:Js,style:nu,property:ou,classed:lu,text:du,html:yu,raise:wu,lower:_u,append:bu,insert:Mu,remove:Au,clone:Nu,datum:ku,on:Pu,dispatch:zu,[Symbol.iterator]:Fu};function ut(t){return typeof t=="string"?new Mt([[document.querySelector(t)]],[document.documentElement]):new Mt([[t]],Ko)}function Hu(t){let n;for(;n=t.sourceEvent;)t=n;return t}function sn(t,n){if(t=Hu(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const Rr={capture:!0,passive:!1};function Cr(t){t.preventDefault(),t.stopImmediatePropagation()}function Yu(t){var n=t.document.documentElement,e=ut(t).on("dragstart.drag",Cr,Rr);"onselectstart"in n?e.on("selectstart.drag",Cr,Rr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Vu(t,n){var e=t.document.documentElement,r=ut(t).on("dragstart.drag",null);n&&(r.on("click.drag",Cr,Rr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function ci(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function qo(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function re(){}var Xn=.7,$e=1/Xn,Mn="\\s*([+-]?\\d+)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gu=/^#([0-9a-f]{3,8})$/,Uu=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),Ku=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),qu=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${Zn}\\)$`),Xu=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Zn}\\)$`),Zu=new RegExp(`^hsl\\(${Zn},${Ot},${Ot}\\)$`),Wu=new RegExp(`^hsla\\(${Zn},${Ot},${Ot},${Zn}\\)$`),Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ci(re,jt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zi,formatHex:zi,formatHex8:Ju,formatHsl:Qu,formatRgb:Fi,toString:Fi});function zi(){return this.rgb().formatHex()}function Ju(){return this.rgb().formatHex8()}function Qu(){return Xo(this).formatHsl()}function Fi(){return this.rgb().formatRgb()}function jt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Gu.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Oi(n):e===3?new xt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ae(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ae(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Uu.exec(t))?new xt(n[1],n[2],n[3],1):(n=Ku.exec(t))?new xt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=qu.exec(t))?ae(n[1],n[2],n[3],n[4]):(n=Xu.exec(t))?ae(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Zu.exec(t))?Vi(n[1],n[2]/100,n[3]/100,1):(n=Wu.exec(t))?Vi(n[1],n[2]/100,n[3]/100,n[4]):Di.hasOwnProperty(t)?Oi(Di[t]):t==="transparent"?new xt(NaN,NaN,NaN,0):null}function Oi(t){return new xt(t>>16&255,t>>8&255,t&255,1)}function ae(t,n,e,r){return r<=0&&(t=n=e=NaN),new xt(t,n,e,r)}function ju(t){return t instanceof re||(t=jt(t)),t?(t=t.rgb(),new xt(t.r,t.g,t.b,t.opacity)):new xt}function Ne(t,n,e,r){return arguments.length===1?ju(t):new xt(t,n,e,r??1)}function xt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}ci(xt,Ne,qo(re,{brighter(t){return t=t==null?$e:Math.pow($e,t),new xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xn:Math.pow(Xn,t),new xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xt(dn(this.r),dn(this.g),dn(this.b),ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hi,formatHex:Hi,formatHex8:tl,formatRgb:Yi,toString:Yi}));function Hi(){return`#${fn(this.r)}${fn(this.g)}${fn(this.b)}`}function tl(){return`#${fn(this.r)}${fn(this.g)}${fn(this.b)}${fn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yi(){const t=ke(this.opacity);return`${t===1?"rgb(":"rgba("}${dn(this.r)}, ${dn(this.g)}, ${dn(this.b)}${t===1?")":`, ${t})`}`}function ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fn(t){return t=dn(t),(t<16?"0":"")+t.toString(16)}function Vi(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Rt(t,n,e,r)}function Xo(t){if(t instanceof Rt)return new Rt(t.h,t.s,t.l,t.opacity);if(t instanceof re||(t=jt(t)),!t)return new Rt;if(t instanceof Rt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,f=(a+i)/2;return s?(n===a?o=(e-r)/s+(e<r)*6:e===a?o=(r-n)/s+2:o=(n-e)/s+4,s/=f<.5?a+i:2-a-i,o*=60):s=f>0&&f<1?0:o,new Rt(o,s,f,t.opacity)}function Ir(t,n,e,r){return arguments.length===1?Xo(t):new Rt(t,n,e,r??1)}function Rt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}ci(Rt,Ir,qo(re,{brighter(t){return t=t==null?$e:Math.pow($e,t),new Rt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xn:Math.pow(Xn,t),new Rt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new xt(dr(t>=240?t-240:t+120,i,r),dr(t,i,r),dr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Rt(Gi(this.h),se(this.s),se(this.l),ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ke(this.opacity);return`${t===1?"hsl(":"hsla("}${Gi(this.h)}, ${se(this.s)*100}%, ${se(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Gi(t){return t=(t||0)%360,t<0?t+360:t}function se(t){return Math.max(0,Math.min(1,t||0))}function dr(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function nl(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}function el(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<n-1?t[r+2]:2*a-i;return nl((e-r/n)*n,o,i,a,s)}}const fi=t=>()=>t;function rl(t,n){return function(e){return t+e*n}}function il(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function ol(t){return(t=+t)==1?Zo:function(n,e){return e-n?il(n,e,t):fi(isNaN(n)?e:n)}}function Zo(t,n){var e=n-t;return e?rl(t,e):fi(isNaN(t)?n:t)}const Re=function t(n){var e=ol(n);function r(i,a){var o=e((i=Ne(i)).r,(a=Ne(a)).r),s=e(i.g,a.g),f=e(i.b,a.b),u=Zo(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=f(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function al(t){return function(n){var e=n.length,r=new Array(e),i=new Array(e),a=new Array(e),o,s;for(o=0;o<e;++o)s=Ne(n[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(f){return s.r=r(f),s.g=i(f),s.b=a(f),s+""}}}var sl=al(el);function ul(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function ll(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cl(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=hi(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function fl(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Dt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function hl(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=hi(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var Lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pr=new RegExp(Lr.source,"g");function dl(t){return function(){return t}}function pl(t){return function(n){return t(n)+""}}function Wo(t,n){var e=Lr.lastIndex=pr.lastIndex=0,r,i,a,o=-1,s=[],f=[];for(t=t+"",n=n+"";(r=Lr.exec(t))&&(i=pr.exec(n));)(a=i.index)>e&&(a=n.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,f.push({i:o,x:Dt(r,i)})),e=pr.lastIndex;return e<n.length&&(a=n.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?f[0]?pl(f[0].x):dl(n):(n=f.length,function(u){for(var l=0,c;l<n;++l)s[(c=f[l]).i]=c.x(u);return s.join("")})}function hi(t,n){var e=typeof n,r;return n==null||e==="boolean"?fi(n):(e==="number"?Dt:e==="string"?(r=jt(n))?(n=r,Re):Wo:n instanceof jt?Re:n instanceof Date?fl:ll(n)?ul:Array.isArray(n)?cl:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?hl:Dt)(t,n)}function gl(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Ui=180/Math.PI,Pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jo(t,n,e,r,i,a){var o,s,f;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,f/=s),t*r<n*e&&(t=-t,n=-n,f=-f,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*Ui,skewX:Math.atan(f)*Ui,scaleX:o,scaleY:s}}var ue;function ml(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Pr:Jo(n.a,n.b,n.c,n.d,n.e,n.f)}function yl(t){return t==null||(ue||(ue=document.createElementNS("http://www.w3.org/2000/svg","g")),ue.setAttribute("transform",t),!(t=ue.transform.baseVal.consolidate()))?Pr:(t=t.matrix,Jo(t.a,t.b,t.c,t.d,t.e,t.f))}function Qo(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function a(u,l,c,h,d,g){if(u!==c||l!==h){var w=d.push("translate(",null,n,null,e);g.push({i:w-4,x:Dt(u,c)},{i:w-2,x:Dt(l,h)})}else(c||h)&&d.push("translate("+c+n+h+e)}function o(u,l,c,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Dt(u,l)})):l&&c.push(i(c)+"rotate("+l+r)}function s(u,l,c,h){u!==l?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Dt(u,l)}):l&&c.push(i(c)+"skewX("+l+r)}function f(u,l,c,h,d,g){if(u!==c||l!==h){var w=d.push(i(d)+"scale(",null,",",null,")");g.push({i:w-4,x:Dt(u,c)},{i:w-2,x:Dt(l,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(u,l){var c=[],h=[];return u=t(u),l=t(l),a(u.translateX,u.translateY,l.translateX,l.translateY,c,h),o(u.rotate,l.rotate,c,h),s(u.skewX,l.skewX,c,h),f(u.scaleX,u.scaleY,l.scaleX,l.scaleY,c,h),u=l=null,function(d){for(var g=-1,w=h.length,S;++g<w;)c[(S=h[g]).i]=S.x(d);return c.join("")}}}var vl=Qo(ml,"px, ","px)","deg)"),wl=Qo(yl,", ",")",")"),xl=1e-12;function Ki(t){return((t=Math.exp(t))+1/t)/2}function _l(t){return((t=Math.exp(t))-1/t)/2}function bl(t){return((t=Math.exp(2*t))-1)/(t+1)}const Sl=function t(n,e,r){function i(a,o){var s=a[0],f=a[1],u=a[2],l=o[0],c=o[1],h=o[2],d=l-s,g=c-f,w=d*d+g*g,S,y;if(w<xl)y=Math.log(h/u)/n,S=function(B){return[s+B*d,f+B*g,u*Math.exp(n*B*y)]};else{var _=Math.sqrt(w),b=(h*h-u*u+r*w)/(2*u*e*_),M=(h*h-u*u-r*w)/(2*h*e*_),A=Math.log(Math.sqrt(b*b+1)-b),N=Math.log(Math.sqrt(M*M+1)-M);y=(N-A)/n,S=function(B){var L=B*y,z=Ki(A),D=u/(e*_)*(z*bl(n*L+A)-_l(A));return[s+D*d,f+D*g,u*z/Ki(n*L+A)]}}return S.duration=y*1e3*n/Math.SQRT2,S}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,f=s*s;return t(o,s,f)},i}(Math.SQRT2,2,4);var Tn=0,zn=0,Ln=0,jo=1e3,Ce,Fn,Ie=0,pn=0,Qe=0,Wn=typeof performance=="object"&&performance.now?performance:Date,ta=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function di(){return pn||(ta(Ml),pn=Wn.now()+Qe)}function Ml(){pn=0}function Le(){this._call=this._time=this._next=null}Le.prototype=na.prototype={constructor:Le,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?di():+e)+(n==null?0:+n),!this._next&&Fn!==this&&(Fn?Fn._next=this:Ce=this,Fn=this),this._call=t,this._time=e,Br()},stop:function(){this._call&&(this._call=null,this._time=1/0,Br())}};function na(t,n,e){var r=new Le;return r.restart(t,n,e),r}function El(){di(),++Tn;for(var t=Ce,n;t;)(n=pn-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Tn}function qi(){pn=(Ie=Wn.now())+Qe,Tn=zn=0;try{El()}finally{Tn=0,Tl(),pn=0}}function Al(){var t=Wn.now(),n=t-Ie;n>jo&&(Qe-=n,Ie=t)}function Tl(){for(var t,n=Ce,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ce=e);Fn=t,Br(r)}function Br(t){if(!Tn){zn&&(zn=clearTimeout(zn));var n=t-pn;n>24?(t<1/0&&(zn=setTimeout(qi,t-Wn.now()-Qe)),Ln&&(Ln=clearInterval(Ln))):(Ln||(Ie=Wn.now(),Ln=setInterval(Al,jo)),Tn=1,ta(qi))}}function Xi(t,n,e){var r=new Le;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var $l=si("start","end","cancel","interrupt"),Nl=[],ea=0,Zi=1,Dr=2,we=3,Wi=4,zr=5,xe=6;function je(t,n,e,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(e in o)return;kl(t,e,{name:n,index:r,group:i,on:$l,tween:Nl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ea})}function pi(t,n){var e=It(t,n);if(e.state>ea)throw new Error("too late; already scheduled");return e}function Ht(t,n){var e=It(t,n);if(e.state>we)throw new Error("too late; already running");return e}function It(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function kl(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=na(a,0,e.time);function a(u){e.state=Zi,e.timer.restart(o,e.delay,e.time),e.delay<=u&&o(u-e.delay)}function o(u){var l,c,h,d;if(e.state!==Zi)return f();for(l in r)if(d=r[l],d.name===e.name){if(d.state===we)return Xi(o);d.state===Wi?(d.state=xe,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<n&&(d.state=xe,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(Xi(function(){e.state===we&&(e.state=Wi,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=Dr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Dr){for(e.state=we,i=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(d=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(i[++c]=d);i.length=c+1}}function s(u){for(var l=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(f),e.state=zr,1),c=-1,h=i.length;++c<h;)i[c].call(t,l);e.state===zr&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){e.state=xe,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function _e(t,n){var e=t.__transition,r,i,a=!0,o;if(e){n=n==null?null:n+"";for(o in e){if((r=e[o]).name!==n){a=!1;continue}i=r.state>Dr&&r.state<zr,r.state=xe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[o]}a&&delete t.__transition}}function Rl(t){return this.each(function(){_e(this,t)})}function Cl(t,n){var e,r;return function(){var i=Ht(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Il(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var a=Ht(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},f=0,u=i.length;f<u;++f)if(i[f].name===n){i[f]=s;break}f===u&&i.push(s)}a.tween=i}}function Ll(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=It(this.node(),e).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((n==null?Cl:Il)(e,t,n))}function gi(t,n,e){var r=t._id;return t.each(function(){var i=Ht(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return It(i,r).value[n]}}function ra(t,n){var e;return(typeof n=="number"?Dt:n instanceof jt?Re:(e=jt(n))?(n=e,Re):Wo)(t,n)}function Pl(t){return function(){this.removeAttribute(t)}}function Bl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dl(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=n(r=o,e)}}function zl(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=n(r=o,e)}}function Fl(t,n,e){var r,i,a;return function(){var o,s=e(this),f;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),f=s+"",o===f?null:o===r&&f===i?a:(i=f,a=n(r=o,s)))}}function Ol(t,n,e){var r,i,a;return function(){var o,s=e(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),f=s+"",o===f?null:o===r&&f===i?a:(i=f,a=n(r=o,s)))}}function Hl(t,n){var e=Je(t),r=e==="transform"?wl:ra;return this.attrTween(t,typeof n=="function"?(e.local?Ol:Fl)(e,r,gi(this,"attr."+t,n)):n==null?(e.local?Bl:Pl)(e):(e.local?zl:Dl)(e,r,n))}function Yl(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Vl(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Gl(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&Vl(t,a)),e}return i._value=n,i}function Ul(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&Yl(t,a)),e}return i._value=n,i}function Kl(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Je(t);return this.tween(e,(r.local?Gl:Ul)(r,n))}function ql(t,n){return function(){pi(this,t).delay=+n.apply(this,arguments)}}function Xl(t,n){return n=+n,function(){pi(this,t).delay=n}}function Zl(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?ql:Xl)(n,t)):It(this.node(),n).delay}function Wl(t,n){return function(){Ht(this,t).duration=+n.apply(this,arguments)}}function Jl(t,n){return n=+n,function(){Ht(this,t).duration=n}}function Ql(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Wl:Jl)(n,t)):It(this.node(),n).duration}function jl(t,n){if(typeof n!="function")throw new Error;return function(){Ht(this,t).ease=n}}function tc(t){var n=this._id;return arguments.length?this.each(jl(n,t)):It(this.node(),n).ease}function nc(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Ht(this,t).ease=e}}function ec(t){if(typeof t!="function")throw new Error;return this.each(nc(this._id,t))}function rc(t){typeof t!="function"&&(t=Do(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],f,u=0;u<o;++u)(f=a[u])&&t.call(f,f.__data__,u,a)&&s.push(f);return new Zt(r,this._parents,this._name,this._id)}function ic(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var f=n[s],u=e[s],l=f.length,c=o[s]=new Array(l),h,d=0;d<l;++d)(h=f[d]||u[d])&&(c[d]=h);for(;s<r;++s)o[s]=n[s];return new Zt(o,this._parents,this._name,this._id)}function oc(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function ac(t,n,e){var r,i,a=oc(n)?pi:Ht;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}function sc(t,n){var e=this._id;return arguments.length<2?It(this.node(),e).on.on(t):this.each(ac(e,t,n))}function uc(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function lc(){return this.on("end.remove",uc(this._id))}function cc(t){var n=this._name,e=this._id;typeof t!="function"&&(t=ui(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],f=s.length,u=a[o]=new Array(f),l,c,h=0;h<f;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c,je(u[h],n,e,h,u,It(l,e)));return new Zt(a,this._parents,n,e)}function fc(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Bo(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var f=r[s],u=f.length,l,c=0;c<u;++c)if(l=f[c]){for(var h=t.call(l,l.__data__,c,f),d,g=It(l,e),w=0,S=h.length;w<S;++w)(d=h[w])&&je(d,n,e,w,h,g);a.push(h),o.push(l)}return new Zt(a,o,n,e)}var hc=ee.prototype.constructor;function dc(){return new hc(this._groups,this._parents)}function pc(t,n){var e,r,i;return function(){var a=An(this,t),o=(this.style.removeProperty(t),An(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function ia(t){return function(){this.style.removeProperty(t)}}function gc(t,n,e){var r,i=e+"",a;return function(){var o=An(this,t);return o===i?null:o===r?a:a=n(r=o,e)}}function mc(t,n,e){var r,i,a;return function(){var o=An(this,t),s=e(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),An(this,t))),o===f?null:o===r&&f===i?a:(i=f,a=n(r=o,s))}}function yc(t,n){var e,r,i,a="style."+n,o="end."+a,s;return function(){var f=Ht(this,t),u=f.on,l=f.value[a]==null?s||(s=ia(n)):void 0;(u!==e||i!==l)&&(r=(e=u).copy()).on(o,i=l),f.on=r}}function vc(t,n,e){var r=(t+="")=="transform"?vl:ra;return n==null?this.styleTween(t,pc(t,r)).on("end.style."+t,ia(t)):typeof n=="function"?this.styleTween(t,mc(t,r,gi(this,"style."+t,n))).each(yc(this._id,t)):this.styleTween(t,gc(t,r,n),e).on("end.style."+t,null)}function wc(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function xc(t,n,e){var r,i;function a(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&wc(t,o,e)),r}return a._value=n,a}function _c(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,xc(t,n,e??""))}function bc(t){return function(){this.textContent=t}}function Sc(t){return function(){var n=t(this);this.textContent=n??""}}function Mc(t){return this.tween("text",typeof t=="function"?Sc(gi(this,"text",t)):bc(t==null?"":t+""))}function Ec(t){return function(n){this.textContent=t.call(this,n)}}function Ac(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Ec(i)),n}return r._value=t,r}function Tc(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Ac(t))}function $c(){for(var t=this._name,n=this._id,e=oa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,f,u=0;u<s;++u)if(f=o[u]){var l=It(f,n);je(f,t,e,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Zt(r,this._parents,t,e)}function Nc(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(a,o){var s={value:o},f={value:function(){--i===0&&a()}};e.each(function(){var u=Ht(this,r),l=u.on;l!==t&&(n=(t=l).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(f)),u.on=n}),i===0&&a()})}var kc=0;function Zt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function oa(){return++kc}var Kt=ee.prototype;Zt.prototype={constructor:Zt,select:cc,selectAll:fc,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:rc,merge:ic,selection:dc,transition:$c,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:sc,attr:Hl,attrTween:Kl,style:vc,styleTween:_c,text:Mc,textTween:Tc,remove:lc,tween:Ll,delay:Zl,duration:Ql,ease:tc,easeVarying:ec,end:Nc,[Symbol.iterator]:Kt[Symbol.iterator]};function Rc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Cc={time:null,delay:0,duration:250,ease:Rc};function Ic(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function Lc(t){var n,e;t instanceof Zt?(n=t._id,t=t._name):(n=oa(),(e=Cc).time=di(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,f,u=0;u<s;++u)(f=o[u])&&je(f,t,n,u,o,e||Ic(f,n));return new Zt(r,this._parents,t,n)}ee.prototype.interrupt=Rl;ee.prototype.transition=Lc;const Fr=Math.PI,Or=2*Fr,ln=1e-6,Pc=Or-ln;function aa(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Bc(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return aa;const e=10**n;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class Dc{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?aa:Bc(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,a,o){this._append`C${+n},${+e},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(n,e,r,i,a){if(n=+n,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,f=r-n,u=i-e,l=o-n,c=s-e,h=l*l+c*c;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(h>ln)if(!(Math.abs(c*f-u*l)>ln)||!a)this._append`L${this._x1=n},${this._y1=e}`;else{let d=r-o,g=i-s,w=f*f+u*u,S=d*d+g*g,y=Math.sqrt(w),_=Math.sqrt(h),b=a*Math.tan((Fr-Math.acos((w+h-S)/(2*y*_)))/2),M=b/_,A=b/y;Math.abs(M-1)>ln&&this._append`L${n+M*l},${e+M*c}`,this._append`A${a},${a},0,0,${+(c*d>l*g)},${this._x1=n+A*f},${this._y1=e+A*u}`}}arc(n,e,r,i,a,o){if(n=+n,e=+e,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),f=r*Math.sin(i),u=n+s,l=e+f,c=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>ln||Math.abs(this._y1-l)>ln)&&this._append`L${u},${l}`,r&&(h<0&&(h=h%Or+Or),h>Pc?this._append`A${r},${r},0,1,${c},${n-s},${e-f}A${r},${r},0,1,${c},${this._x1=u},${this._y1=l}`:h>ln&&this._append`A${r},${r},0,${+(h>=Fr)},${c},${this._x1=n+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var Ji={},gr={},mr=34,Pn=10,yr=13;function sa(t){return new Function("d","return {"+t.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function zc(t,n){var e=sa(t);return function(r,i){return n(e(r),i,t)}}function Qi(t){var n=Object.create(null),e=[];return t.forEach(function(r){for(var i in r)i in n||e.push(n[i]=i)}),e}function wt(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Fc(t){return t<0?"-"+wt(-t,6):t>9999?"+"+wt(t,6):wt(t,4)}function Oc(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Fc(t.getUTCFullYear())+"-"+wt(t.getUTCMonth()+1,2)+"-"+wt(t.getUTCDate(),2)+(i?"T"+wt(n,2)+":"+wt(e,2)+":"+wt(r,2)+"."+wt(i,3)+"Z":r?"T"+wt(n,2)+":"+wt(e,2)+":"+wt(r,2)+"Z":e||n?"T"+wt(n,2)+":"+wt(e,2)+"Z":"")}function Hc(t){var n=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function r(c,h){var d,g,w=i(c,function(S,y){if(d)return d(S,y-1);g=S,d=h?zc(S,h):sa(S)});return w.columns=g||[],w}function i(c,h){var d=[],g=c.length,w=0,S=0,y,_=g<=0,b=!1;c.charCodeAt(g-1)===Pn&&--g,c.charCodeAt(g-1)===yr&&--g;function M(){if(_)return gr;if(b)return b=!1,Ji;var N,B=w,L;if(c.charCodeAt(B)===mr){for(;w++<g&&c.charCodeAt(w)!==mr||c.charCodeAt(++w)===mr;);return(N=w)>=g?_=!0:(L=c.charCodeAt(w++))===Pn?b=!0:L===yr&&(b=!0,c.charCodeAt(w)===Pn&&++w),c.slice(B+1,N-1).replace(/""/g,'"')}for(;w<g;){if((L=c.charCodeAt(N=w++))===Pn)b=!0;else if(L===yr)b=!0,c.charCodeAt(w)===Pn&&++w;else if(L!==e)continue;return c.slice(B,N)}return _=!0,c.slice(B,g)}for(;(y=M())!==gr;){for(var A=[];y!==Ji&&y!==gr;)A.push(y),y=M();h&&(A=h(A,S++))==null||d.push(A)}return d}function a(c,h){return c.map(function(d){return h.map(function(g){return l(d[g])}).join(t)})}function o(c,h){return h==null&&(h=Qi(c)),[h.map(l).join(t)].concat(a(c,h)).join(`
`)}function s(c,h){return h==null&&(h=Qi(c)),a(c,h).join(`
`)}function f(c){return c.map(u).join(`
`)}function u(c){return c.map(l).join(t)}function l(c){return c==null?"":c instanceof Date?Oc(c):n.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:f,formatRow:u,formatValue:l}}var Yc=Hc(","),Vc=Yc.parse;function Gc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Uc(t,n){return fetch(t,n).then(Gc)}function Kc(t){return function(n,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),Uc(n,e).then(function(i){return t(i,r)})}}var ji=Kc(Vc);function qc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Xc(t,n){return fetch(t,n).then(qc)}function Zc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Pe(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function $n(t){return t=Pe(Math.abs(t)),t?t[1]:NaN}function Wc(t,n){return function(e,r){for(var i=e.length,a=[],o=0,s=t[0],f=0;i>0&&s>0&&(f+s+1>r&&(s=Math.max(1,r-f)),a.push(e.substring(i-=s,i+s)),!((f+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}}function Jc(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Qc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Be(t){if(!(n=Qc.exec(t)))throw new Error("invalid format: "+t);var n;return new mi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Be.prototype=mi.prototype;function mi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jc(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ua;function tf(t,n){var e=Pe(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(ua=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Pe(t,Math.max(0,n+a-1))[0]}function to(t,n){var e=Pe(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const no={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zc,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>to(t*100,n),r:to,s:tf,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function eo(t){return t}var ro=Array.prototype.map,io=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nf(t){var n=t.grouping===void 0||t.thousands===void 0?eo:Wc(ro.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?eo:Jc(ro.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(c){c=Be(c);var h=c.fill,d=c.align,g=c.sign,w=c.symbol,S=c.zero,y=c.width,_=c.comma,b=c.precision,M=c.trim,A=c.type;A==="n"?(_=!0,A="g"):no[A]||(b===void 0&&(b=12),M=!0,A="g"),(S||h==="0"&&d==="=")&&(S=!0,h="0",d="=");var N=w==="$"?e:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",B=w==="$"?r:/[%p]/.test(A)?o:"",L=no[A],z=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(E){var O=N,$=B,p,m,v;if(A==="c")$=L(E)+$,E="";else{E=+E;var T=E<0||1/E<0;if(E=isNaN(E)?f:L(Math.abs(E),b),M&&(E=jc(E)),T&&+E==0&&g!=="+"&&(T=!1),O=(T?g==="("?g:s:g==="-"||g==="("?"":g)+O,$=(A==="s"?io[8+ua/3]:"")+$+(T&&g==="("?")":""),z){for(p=-1,m=E.length;++p<m;)if(v=E.charCodeAt(p),48>v||v>57){$=(v===46?i+E.slice(p+1):E.slice(p))+$,E=E.slice(0,p);break}}}_&&!S&&(E=n(E,1/0));var I=O.length+E.length+$.length,P=I<y?new Array(y-I+1).join(h):"";switch(_&&S&&(E=n(P+E,P.length?y-$.length:1/0),P=""),d){case"<":E=O+E+$+P;break;case"=":E=O+P+E+$;break;case"^":E=P.slice(0,I=P.length>>1)+O+E+$+P.slice(I);break;default:E=P+O+E+$;break}return a(E)}return D.toString=function(){return c+""},D}function l(c,h){var d=u((c=Be(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor($n(h)/3)))*3,w=Math.pow(10,-g),S=io[8+g/3];return function(y){return d(w*y)+S}}return{format:u,formatPrefix:l}}var le,la,ca;ef({thousands:",",grouping:[3],currency:["$",""]});function ef(t){return le=nf(t),la=le.format,ca=le.formatPrefix,le}function rf(t){return Math.max(0,-$n(Math.abs(t)))}function of(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($n(n)/3)))*3-$n(Math.abs(t)))}function af(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,$n(n)-$n(t))+1}var Q=1e-6,K=Math.PI,_t=K/2,De=K/4,yt=K*2,St=180/K,j=K/180,et=Math.abs,fa=Math.atan,Nn=Math.atan2,tt=Math.cos,sf=Math.exp,uf=Math.log,nt=Math.sin,lf=Math.sign||function(t){return t>0?1:t<0?-1:0},mn=Math.sqrt,cf=Math.tan;function ff(t){return t>1?0:t<-1?K:Math.acos(t)}function Jn(t){return t>1?_t:t<-1?-_t:Math.asin(t)}function ft(){}function ze(t,n){t&&ao.hasOwnProperty(t.type)&&ao[t.type](t,n)}var oo={Feature:function(t,n){ze(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)ze(e[r].geometry,n)}},ao={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Hr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Hr(e[r],n,0)},Polygon:function(t,n){so(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)so(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)ze(e[r],n)}};function Hr(t,n,e){var r=-1,i=t.length-e,a;for(n.lineStart();++r<i;)a=t[r],n.point(a[0],a[1],a[2]);n.lineEnd()}function so(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Hr(t[e],n,1);n.polygonEnd()}function cn(t,n){t&&oo.hasOwnProperty(t.type)?oo[t.type](t,n):ze(t,n)}var Yr=new Ct,Fe=new Ct,ha,da,Vr,Gr,Ur,Qn={point:ft,lineStart:ft,lineEnd:ft,polygonStart:function(){Yr=new Ct,Qn.lineStart=hf,Qn.lineEnd=df},polygonEnd:function(){var t=+Yr;Fe.add(t<0?yt+t:t),this.lineStart=this.lineEnd=this.point=ft},sphere:function(){Fe.add(yt)}};function hf(){Qn.point=pf}function df(){pa(ha,da)}function pf(t,n){Qn.point=pa,ha=t,da=n,t*=j,n*=j,Vr=t,Gr=tt(n=n/2+De),Ur=nt(n)}function pa(t,n){t*=j,n*=j,n=n/2+De;var e=t-Vr,r=e>=0?1:-1,i=r*e,a=tt(n),o=nt(n),s=Ur*o,f=Gr*a+s*tt(i),u=s*r*nt(i);Yr.add(Nn(u,f)),Vr=t,Gr=a,Ur=o}function gf(t){return Fe=new Ct,cn(t,Qn),Fe*2}function Kr(t){return[Nn(t[1],t[0]),Jn(t[2])]}function kn(t){var n=t[0],e=t[1],r=tt(e);return[r*tt(n),r*nt(n),nt(e)]}function ce(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Oe(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function vr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function fe(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function qr(t){var n=mn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Xr(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function Zr(t,n){return et(t)>K&&(t-=Math.round(t/yt)*yt),[t,n]}Zr.invert=Zr;function ga(t,n,e){return(t%=yt)?n||e?Xr(lo(t),co(n,e)):lo(t):n||e?co(n,e):Zr}function uo(t){return function(n,e){return n+=t,et(n)>K&&(n-=Math.round(n/yt)*yt),[n,e]}}function lo(t){var n=uo(t);return n.invert=uo(-t),n}function co(t,n){var e=tt(t),r=nt(t),i=tt(n),a=nt(n);function o(s,f){var u=tt(f),l=tt(s)*u,c=nt(s)*u,h=nt(f),d=h*e+l*r;return[Nn(c*i-d*a,l*e-h*r),Jn(d*i+c*a)]}return o.invert=function(s,f){var u=tt(f),l=tt(s)*u,c=nt(s)*u,h=nt(f),d=h*i-c*a;return[Nn(c*i+h*a,l*e+d*r),Jn(d*e-l*r)]},o}function mf(t){t=ga(t[0]*j,t[1]*j,t.length>2?t[2]*j:0);function n(e){return e=t(e[0]*j,e[1]*j),e[0]*=St,e[1]*=St,e}return n.invert=function(e){return e=t.invert(e[0]*j,e[1]*j),e[0]*=St,e[1]*=St,e},n}function yf(t,n,e,r,i,a){if(e){var o=tt(n),s=nt(n),f=r*e;i==null?(i=n+r*yt,a=n-f/2):(i=fo(o,i),a=fo(o,a),(r>0?i<a:i>a)&&(i+=r*yt));for(var u,l=i;r>0?l>a:l<a;l-=f)u=Kr([o,-s*tt(l),-s*nt(l)]),t.point(u[0],u[1])}}function fo(t,n){n=kn(n),n[0]-=t,qr(n);var e=ff(-n[1]);return((-n[2]<0?-e:e)+yt-Q)%yt}function ma(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:ft,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function be(t,n){return et(t[0]-n[0])<Q&&et(t[1]-n[1])<Q}function he(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ya(t,n,e,r,i){var a=[],o=[],s,f;if(t.forEach(function(g){if(!((w=g.length-1)<=0)){var w,S=g[0],y=g[w],_;if(be(S,y)){if(!S[2]&&!y[2]){for(i.lineStart(),s=0;s<w;++s)i.point((S=g[s])[0],S[1]);i.lineEnd();return}y[0]+=2*Q}a.push(_=new he(S,g,null,!0)),o.push(_.o=new he(S,null,_,!1)),a.push(_=new he(y,g,null,!1)),o.push(_.o=new he(y,null,_,!0))}}),!!a.length){for(o.sort(n),ho(a),ho(o),s=0,f=o.length;s<f;++s)o[s].e=e=!e;for(var u=a[0],l,c;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,f=l.length;s<f;++s)i.point((c=l[s])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,s=l.length-1;s>=0;--s)i.point((c=l[s])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,d=!d}while(!h.v);i.lineEnd()}}}function ho(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function wr(t){return et(t[0])<=K?t[0]:lf(t[0])*((et(t[0])+K)%yt-K)}function vf(t,n){var e=wr(n),r=n[1],i=nt(r),a=[nt(e),-tt(e),0],o=0,s=0,f=new Ct;i===1?r=_t+Q:i===-1&&(r=-_t-Q);for(var u=0,l=t.length;u<l;++u)if(h=(c=t[u]).length)for(var c,h,d=c[h-1],g=wr(d),w=d[1]/2+De,S=nt(w),y=tt(w),_=0;_<h;++_,g=M,S=N,y=B,d=b){var b=c[_],M=wr(b),A=b[1]/2+De,N=nt(A),B=tt(A),L=M-g,z=L>=0?1:-1,D=z*L,E=D>K,O=S*N;if(f.add(Nn(O*z*nt(D),y*B+O*tt(D))),o+=E?L+z*yt:L,E^g>=e^M>=e){var $=Oe(kn(d),kn(b));qr($);var p=Oe(a,$);qr(p);var m=(E^L>=0?-1:1)*Jn(p[2]);(r>m||r===m&&($[0]||$[1]))&&(s+=E^L>=0?1:-1)}}return(o<-1e-6||o<Q&&f<-1e-12)^s&1}function va(t,n,e,r){return function(i){var a=n(i),o=ma(),s=n(o),f=!1,u,l,c,h={point:d,lineStart:w,lineEnd:S,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=b,l=[],u=[]},polygonEnd:function(){h.point=d,h.lineStart=w,h.lineEnd=S,l=Io(l);var M=vf(u,r);l.length?(f||(i.polygonStart(),f=!0),ya(l,xf,M,e,i)):M&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(M,A){t(M,A)&&i.point(M,A)}function g(M,A){a.point(M,A)}function w(){h.point=g,a.lineStart()}function S(){h.point=d,a.lineEnd()}function y(M,A){c.push([M,A]),s.point(M,A)}function _(){s.lineStart(),c=[]}function b(){y(c[0][0],c[0][1]),s.lineEnd();var M=s.clean(),A=o.result(),N,B=A.length,L,z,D;if(c.pop(),u.push(c),c=null,!!B){if(M&1){if(z=A[0],(L=z.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),N=0;N<L;++N)i.point((D=z[N])[0],D[1]);i.lineEnd()}return}B>1&&M&2&&A.push(A.pop().concat(A.shift())),l.push(A.filter(wf))}}return h}}function wf(t){return t.length>1}function xf(t,n){return((t=t.x)[0]<0?t[1]-_t-Q:_t-t[1])-((n=n.x)[0]<0?n[1]-_t-Q:_t-n[1])}const po=va(function(){return!0},_f,Sf,[-K,-_t]);function _f(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?K:-K,f=et(a-n);et(f-K)<Q?(t.point(n,e=(e+o)/2>0?_t:-_t),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(a,e),i=0):r!==s&&f>=K&&(et(n-r)<Q&&(n-=r*Q),et(a-s)<Q&&(a-=s*Q),e=bf(n,e,a,o),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),i=0),t.point(n=a,e=o),r=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function bf(t,n,e,r){var i,a,o=nt(t-e);return et(o)>Q?fa((nt(n)*(a=tt(r))*nt(e)-nt(r)*(i=tt(n))*nt(t))/(i*a*o)):(n+r)/2}function Sf(t,n,e,r){var i;if(t==null)i=e*_t,r.point(-K,i),r.point(0,i),r.point(K,i),r.point(K,0),r.point(K,-i),r.point(0,-i),r.point(-K,-i),r.point(-K,0),r.point(-K,i);else if(et(t[0]-n[0])>Q){var a=t[0]<n[0]?K:-K;i=e*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(n[0],n[1])}function Mf(t){var n=tt(t),e=2*j,r=n>0,i=et(n)>Q;function a(l,c,h,d){yf(d,t,e,h,l,c)}function o(l,c){return tt(l)*tt(c)>n}function s(l){var c,h,d,g,w;return{lineStart:function(){g=d=!1,w=1},point:function(S,y){var _=[S,y],b,M=o(S,y),A=r?M?0:u(S,y):M?u(S+(S<0?K:-K),y):0;if(!c&&(g=d=M)&&l.lineStart(),M!==d&&(b=f(c,_),(!b||be(c,b)||be(_,b))&&(_[2]=1)),M!==d)w=0,M?(l.lineStart(),b=f(_,c),l.point(b[0],b[1])):(b=f(c,_),l.point(b[0],b[1],2),l.lineEnd()),c=b;else if(i&&c&&r^M){var N;!(A&h)&&(N=f(_,c,!0))&&(w=0,r?(l.lineStart(),l.point(N[0][0],N[0][1]),l.point(N[1][0],N[1][1]),l.lineEnd()):(l.point(N[1][0],N[1][1]),l.lineEnd(),l.lineStart(),l.point(N[0][0],N[0][1],3)))}M&&(!c||!be(c,_))&&l.point(_[0],_[1]),c=_,d=M,h=A},lineEnd:function(){d&&l.lineEnd(),c=null},clean:function(){return w|(g&&d)<<1}}}function f(l,c,h){var d=kn(l),g=kn(c),w=[1,0,0],S=Oe(d,g),y=ce(S,S),_=S[0],b=y-_*_;if(!b)return!h&&l;var M=n*y/b,A=-n*_/b,N=Oe(w,S),B=fe(w,M),L=fe(S,A);vr(B,L);var z=N,D=ce(B,z),E=ce(z,z),O=D*D-E*(ce(B,B)-1);if(!(O<0)){var $=mn(O),p=fe(z,(-D-$)/E);if(vr(p,B),p=Kr(p),!h)return p;var m=l[0],v=c[0],T=l[1],I=c[1],P;v<m&&(P=m,m=v,v=P);var F=v-m,Y=et(F-K)<Q,G=Y||F<Q;if(!Y&&I<T&&(P=T,T=I,I=P),G?Y?T+I>0^p[1]<(et(p[0]-m)<Q?T:I):T<=p[1]&&p[1]<=I:F>K^(m<=p[0]&&p[0]<=v)){var W=fe(z,(-D+$)/E);return vr(W,B),[p,Kr(W)]}}}function u(l,c){var h=r?t:K-t,d=0;return l<-h?d|=1:l>h&&(d|=2),c<-h?d|=4:c>h&&(d|=8),d}return va(o,s,a,r?[0,-t]:[-K,t-K])}function Ef(t,n,e,r,i,a){var o=t[0],s=t[1],f=n[0],u=n[1],l=0,c=1,h=f-o,d=u-s,g;if(g=e-o,!(!h&&g>0)){if(g/=h,h<0){if(g<l)return;g<c&&(c=g)}else if(h>0){if(g>c)return;g>l&&(l=g)}if(g=i-o,!(!h&&g<0)){if(g/=h,h<0){if(g>c)return;g>l&&(l=g)}else if(h>0){if(g<l)return;g<c&&(c=g)}if(g=r-s,!(!d&&g>0)){if(g/=d,d<0){if(g<l)return;g<c&&(c=g)}else if(d>0){if(g>c)return;g>l&&(l=g)}if(g=a-s,!(!d&&g<0)){if(g/=d,d<0){if(g>c)return;g>l&&(l=g)}else if(d>0){if(g<l)return;g<c&&(c=g)}return l>0&&(t[0]=o+l*h,t[1]=s+l*d),c<1&&(n[0]=o+c*h,n[1]=s+c*d),!0}}}}}var de=1e9,pe=-1e9;function Af(t,n,e,r){function i(u,l){return t<=u&&u<=e&&n<=l&&l<=r}function a(u,l,c,h){var d=0,g=0;if(u==null||(d=o(u,c))!==(g=o(l,c))||f(u,l)<0^c>0)do h.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+c+4)%4)!==g);else h.point(l[0],l[1])}function o(u,l){return et(u[0]-t)<Q?l>0?0:3:et(u[0]-e)<Q?l>0?2:1:et(u[1]-n)<Q?l>0?1:0:l>0?3:2}function s(u,l){return f(u.x,l.x)}function f(u,l){var c=o(u,1),h=o(l,1);return c!==h?c-h:c===0?l[1]-u[1]:c===1?u[0]-l[0]:c===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,c=ma(),h,d,g,w,S,y,_,b,M,A,N,B={point:L,lineStart:O,lineEnd:$,polygonStart:D,polygonEnd:E};function L(m,v){i(m,v)&&l.point(m,v)}function z(){for(var m=0,v=0,T=d.length;v<T;++v)for(var I=d[v],P=1,F=I.length,Y=I[0],G,W,Z=Y[0],X=Y[1];P<F;++P)G=Z,W=X,Y=I[P],Z=Y[0],X=Y[1],W<=r?X>r&&(Z-G)*(r-W)>(X-W)*(t-G)&&++m:X<=r&&(Z-G)*(r-W)<(X-W)*(t-G)&&--m;return m}function D(){l=c,h=[],d=[],N=!0}function E(){var m=z(),v=N&&m,T=(h=Io(h)).length;(v||T)&&(u.polygonStart(),v&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),T&&ya(h,s,m,a,u),u.polygonEnd()),l=u,h=d=g=null}function O(){B.point=p,d&&d.push(g=[]),A=!0,M=!1,_=b=NaN}function $(){h&&(p(w,S),y&&M&&c.rejoin(),h.push(c.result())),B.point=L,M&&l.lineEnd()}function p(m,v){var T=i(m,v);if(d&&g.push([m,v]),A)w=m,S=v,y=T,A=!1,T&&(l.lineStart(),l.point(m,v));else if(T&&M)l.point(m,v);else{var I=[_=Math.max(pe,Math.min(de,_)),b=Math.max(pe,Math.min(de,b))],P=[m=Math.max(pe,Math.min(de,m)),v=Math.max(pe,Math.min(de,v))];Ef(I,P,t,n,e,r)?(M||(l.lineStart(),l.point(I[0],I[1])),l.point(P[0],P[1]),T||l.lineEnd(),N=!1):T&&(l.lineStart(),l.point(m,v),N=!1)}_=m,b=v,M=T}return B}}const Wr=t=>t;var xr=new Ct,Jr=new Ct,wa,xa,Qr,jr,qt={point:ft,lineStart:ft,lineEnd:ft,polygonStart:function(){qt.lineStart=Tf,qt.lineEnd=Nf},polygonEnd:function(){qt.lineStart=qt.lineEnd=qt.point=ft,xr.add(et(Jr)),Jr=new Ct},result:function(){var t=xr/2;return xr=new Ct,t}};function Tf(){qt.point=$f}function $f(t,n){qt.point=_a,wa=Qr=t,xa=jr=n}function _a(t,n){Jr.add(jr*t-Qr*n),Qr=t,jr=n}function Nf(){_a(wa,xa)}var Rn=1/0,He=Rn,jn=-Rn,Ye=jn,Ve={point:kf,lineStart:ft,lineEnd:ft,polygonStart:ft,polygonEnd:ft,result:function(){var t=[[Rn,He],[jn,Ye]];return jn=Ye=-(He=Rn=1/0),t}};function kf(t,n){t<Rn&&(Rn=t),t>jn&&(jn=t),n<He&&(He=n),n>Ye&&(Ye=n)}var ti=0,ni=0,On=0,Ge=0,Ue=0,bn=0,ei=0,ri=0,Hn=0,ba,Sa,zt,Ft,Tt={point:gn,lineStart:go,lineEnd:mo,polygonStart:function(){Tt.lineStart=If,Tt.lineEnd=Lf},polygonEnd:function(){Tt.point=gn,Tt.lineStart=go,Tt.lineEnd=mo},result:function(){var t=Hn?[ei/Hn,ri/Hn]:bn?[Ge/bn,Ue/bn]:On?[ti/On,ni/On]:[NaN,NaN];return ti=ni=On=Ge=Ue=bn=ei=ri=Hn=0,t}};function gn(t,n){ti+=t,ni+=n,++On}function go(){Tt.point=Rf}function Rf(t,n){Tt.point=Cf,gn(zt=t,Ft=n)}function Cf(t,n){var e=t-zt,r=n-Ft,i=mn(e*e+r*r);Ge+=i*(zt+t)/2,Ue+=i*(Ft+n)/2,bn+=i,gn(zt=t,Ft=n)}function mo(){Tt.point=gn}function If(){Tt.point=Pf}function Lf(){Ma(ba,Sa)}function Pf(t,n){Tt.point=Ma,gn(ba=zt=t,Sa=Ft=n)}function Ma(t,n){var e=t-zt,r=n-Ft,i=mn(e*e+r*r);Ge+=i*(zt+t)/2,Ue+=i*(Ft+n)/2,bn+=i,i=Ft*t-zt*n,ei+=i*(zt+t),ri+=i*(Ft+n),Hn+=i*3,gn(zt=t,Ft=n)}function Ea(t){this._context=t}Ea.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,yt);break}}},result:ft};var ii=new Ct,_r,Aa,Ta,Yn,Vn,te={point:ft,lineStart:function(){te.point=Bf},lineEnd:function(){_r&&$a(Aa,Ta),te.point=ft},polygonStart:function(){_r=!0},polygonEnd:function(){_r=null},result:function(){var t=+ii;return ii=new Ct,t}};function Bf(t,n){te.point=$a,Aa=Yn=t,Ta=Vn=n}function $a(t,n){Yn-=t,Vn-=n,ii.add(mn(Yn*Yn+Vn*Vn)),Yn=t,Vn=n}let yo,Ke,vo,wo;class xo{constructor(n){this._append=n==null?Na:Df(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==vo||this._append!==Ke){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,vo=r,Ke=this._append,wo=this._,this._=i}this._+=wo;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Na(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Df(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Na;if(n!==yo){const e=10**n;yo=n,Ke=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*e)/e+i[a]}}return Ke}function zf(t,n){let e=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),cn(s,i(a))),a.result()}return o.area=function(s){return cn(s,i(qt)),qt.result()},o.measure=function(s){return cn(s,i(te)),te.result()},o.bounds=function(s){return cn(s,i(Ve)),Ve.result()},o.centroid=function(s){return cn(s,i(Tt)),Tt.result()},o.projection=function(s){return arguments.length?(i=s==null?(t=null,Wr):(t=s).stream,o):t},o.context=function(s){return arguments.length?(a=s==null?(n=null,new xo(e)):new Ea(n=s),typeof r!="function"&&a.pointRadius(r),o):n},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const f=Math.floor(s);if(!(f>=0))throw new RangeError(`invalid digits: ${s}`);e=f}return n===null&&(a=new xo(e)),o},o.projection(t).digits(e).context(n)}function yi(t){return function(n){var e=new oi;for(var r in t)e[r]=t[r];return e.stream=n,e}}function oi(){}oi.prototype={constructor:oi,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function vi(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),cn(e,t.stream(Ve)),n(Ve.result()),r!=null&&t.clipExtent(r),t}function ka(t,n,e){return vi(t,function(r){var i=n[1][0]-n[0][0],a=n[1][1]-n[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+n[0][0]+(i-o*(r[1][0]+r[0][0]))/2,f=+n[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,f])},e)}function Ff(t,n,e){return ka(t,[[0,0],n],e)}function Of(t,n,e){return vi(t,function(r){var i=+n,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},e)}function Hf(t,n,e){return vi(t,function(r){var i=+n,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},e)}var _o=16,Yf=tt(30*j);function bo(t,n){return+n?Gf(t,n):Vf(t)}function Vf(t){return yi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Gf(t,n){function e(r,i,a,o,s,f,u,l,c,h,d,g,w,S){var y=u-r,_=l-i,b=y*y+_*_;if(b>4*n&&w--){var M=o+h,A=s+d,N=f+g,B=mn(M*M+A*A+N*N),L=Jn(N/=B),z=et(et(N)-1)<Q||et(a-c)<Q?(a+c)/2:Nn(A,M),D=t(z,L),E=D[0],O=D[1],$=E-r,p=O-i,m=_*$-y*p;(m*m/b>n||et((y*$+_*p)/b-.5)>.3||o*h+s*d+f*g<Yf)&&(e(r,i,a,o,s,f,E,O,z,M/=B,A/=B,N,w,S),S.point(E,O),e(E,O,z,M,A,N,u,l,c,h,d,g,w,S))}}return function(r){var i,a,o,s,f,u,l,c,h,d,g,w,S={point:y,lineStart:_,lineEnd:M,polygonStart:function(){r.polygonStart(),S.lineStart=A},polygonEnd:function(){r.polygonEnd(),S.lineStart=_}};function y(L,z){L=t(L,z),r.point(L[0],L[1])}function _(){c=NaN,S.point=b,r.lineStart()}function b(L,z){var D=kn([L,z]),E=t(L,z);e(c,h,l,d,g,w,c=E[0],h=E[1],l=L,d=D[0],g=D[1],w=D[2],_o,r),r.point(c,h)}function M(){S.point=y,r.lineEnd()}function A(){_(),S.point=N,S.lineEnd=B}function N(L,z){b(i=L,z),a=c,o=h,s=d,f=g,u=w,S.point=b}function B(){e(c,h,l,d,g,w,a,o,i,s,f,u,_o,r),S.lineEnd=M,M()}return S}}var Uf=yi({point:function(t,n){this.stream.point(t*j,n*j)}});function Kf(t){return yi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function qf(t,n,e,r,i){function a(o,s){return o*=r,s*=i,[n+t*o,e-t*s]}return a.invert=function(o,s){return[(o-n)/t*r,(e-s)/t*i]},a}function So(t,n,e,r,i,a){if(!a)return qf(t,n,e,r,i);var o=tt(a),s=nt(a),f=o*t,u=s*t,l=o/t,c=s/t,h=(s*e-o*n)/t,d=(s*n+o*e)/t;function g(w,S){return w*=r,S*=i,[f*w-u*S+n,e-u*w-f*S]}return g.invert=function(w,S){return[r*(l*w-c*S+h),i*(d-c*w-l*S)]},g}function Xf(t){return Zf(function(){return t})()}function Zf(t){var n,e=150,r=480,i=250,a=0,o=0,s=0,f=0,u=0,l,c=0,h=1,d=1,g=null,w=po,S=null,y,_,b,M=Wr,A=.5,N,B,L,z,D;function E(m){return L(m[0]*j,m[1]*j)}function O(m){return m=L.invert(m[0],m[1]),m&&[m[0]*St,m[1]*St]}E.stream=function(m){return z&&D===m?z:z=Uf(Kf(l)(w(N(M(D=m)))))},E.preclip=function(m){return arguments.length?(w=m,g=void 0,p()):w},E.postclip=function(m){return arguments.length?(M=m,S=y=_=b=null,p()):M},E.clipAngle=function(m){return arguments.length?(w=+m?Mf(g=m*j):(g=null,po),p()):g*St},E.clipExtent=function(m){return arguments.length?(M=m==null?(S=y=_=b=null,Wr):Af(S=+m[0][0],y=+m[0][1],_=+m[1][0],b=+m[1][1]),p()):S==null?null:[[S,y],[_,b]]},E.scale=function(m){return arguments.length?(e=+m,$()):e},E.translate=function(m){return arguments.length?(r=+m[0],i=+m[1],$()):[r,i]},E.center=function(m){return arguments.length?(a=m[0]%360*j,o=m[1]%360*j,$()):[a*St,o*St]},E.rotate=function(m){return arguments.length?(s=m[0]%360*j,f=m[1]%360*j,u=m.length>2?m[2]%360*j:0,$()):[s*St,f*St,u*St]},E.angle=function(m){return arguments.length?(c=m%360*j,$()):c*St},E.reflectX=function(m){return arguments.length?(h=m?-1:1,$()):h<0},E.reflectY=function(m){return arguments.length?(d=m?-1:1,$()):d<0},E.precision=function(m){return arguments.length?(N=bo(B,A=m*m),p()):mn(A)},E.fitExtent=function(m,v){return ka(E,m,v)},E.fitSize=function(m,v){return Ff(E,m,v)},E.fitWidth=function(m,v){return Of(E,m,v)},E.fitHeight=function(m,v){return Hf(E,m,v)};function $(){var m=So(e,0,0,h,d,c).apply(null,n(a,o)),v=So(e,r-m[0],i-m[1],h,d,c);return l=ga(s,f,u),B=Xr(n,v),L=Xr(l,B),N=bo(B,A),p()}function p(){return z=D=null,E}return function(){return n=t.apply(this,arguments),E.invert=n.invert&&O,$()}}function wi(t,n){return[t,uf(cf((_t+n)/2))]}wi.invert=function(t,n){return[t,2*fa(sf(n))-_t]};function Wf(){return Jf(wi).scale(961/yt)}function Jf(t){var n=Xf(t),e=n.center,r=n.scale,i=n.translate,a=n.clipExtent,o=null,s,f,u;n.scale=function(c){return arguments.length?(r(c),l()):r()},n.translate=function(c){return arguments.length?(i(c),l()):i()},n.center=function(c){return arguments.length?(e(c),l()):e()},n.clipExtent=function(c){return arguments.length?(c==null?o=s=f=u=null:(o=+c[0][0],s=+c[0][1],f=+c[1][0],u=+c[1][1]),l()):o==null?null:[[o,s],[f,u]]};function l(){var c=K*r(),h=n(mf(n.rotate()).invert([0,0]));return a(o==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===wi?[[Math.max(h[0]-c,o),s],[Math.min(h[0]+c,f),u]]:[[o,Math.max(h[1]-c,s)],[f,Math.min(h[1]+c,u)]])}return l()}function Ra(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Qf(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const Mo=Symbol("implicit");function qe(){var t=new Ci,n=[],e=[],r=Mo;function i(a){let o=t.get(a);if(o===void 0){if(r!==Mo)return r;t.set(a,o=n.push(a)-1)}return e[o%e.length]}return i.domain=function(a){if(!arguments.length)return n.slice();n=[],t=new Ci;for(const o of a)t.has(o)||t.set(o,n.push(o)-1);return i},i.range=function(a){return arguments.length?(e=Array.from(a),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return qe(n,e).unknown(r)},Ra.apply(i,arguments),i}function ai(){var t=qe().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,a,o,s=!1,f=0,u=0,l=.5;delete t.unknown;function c(){var h=n().length,d=i<r,g=d?i:r,w=d?r:i;a=(w-g)/Math.max(1,h-f+u*2),s&&(a=Math.floor(a)),g+=(w-g-a*(h-f))*l,o=a*(1-f),s&&(g=Math.round(g),o=Math.round(o));var S=$r(h).map(function(y){return g+a*y});return e(d?S.reverse():S)}return t.domain=function(h){return arguments.length?(n(h),c()):n()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,c()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,c()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,c()):s},t.padding=function(h){return arguments.length?(f=Math.min(1,u=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(u=+h,c()):u},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),c()):l},t.copy=function(){return ai(n(),[r,i]).round(s).paddingInner(f).paddingOuter(u).align(l)},Ra.apply(c(),arguments)}function Ca(t){return t}function jf(t,n,e,r){var i=Wa(t,n,e),a;switch(r=Be(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=of(i,o))&&(r.precision=a),ca(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=af(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=rf(i))&&(r.precision=a-(r.type==="%")*2);break}}return la(r)}function th(t){var n=t.domain;return t.ticks=function(e){var r=n();return Za(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return jf(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,o=r[i],s=r[a],f,u,l=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);l-- >0;){if(u=Tr(o,s,e),u===f)return r[i]=o,r[a]=s,n(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;f=u}return t},t}function nh(){var t=0,n=1,e,r,i,a,o=Ca,s=!1,f;function u(c){return c==null||isNaN(c=+c)?f:o(i===0?.5:(c=(a(c)-e)*i,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([t,n]=c,e=a(t=+t),r=a(n=+n),i=e===r?0:1/(r-e),u):[t,n]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(o=c,u):o};function l(c){return function(h){var d,g;return arguments.length?([d,g]=h,o=c(d,g),u):[o(0),o(1)]}}return u.range=l(hi),u.rangeRound=l(gl),u.unknown=function(c){return arguments.length?(f=c,u):f},function(c){return a=c,e=c(t),r=c(n),i=e===r?0:1/(r-e),u}}function eh(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Gn(){var t=th(nh()(Ca));return t.copy=function(){return eh(t,Gn())},Qf.apply(t,arguments)}function xi(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const _i=t=>sl(t[t.length-1]);var rh=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(xi);const br=_i(rh);var ih=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(xi);const ge=_i(ih);var oh=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(xi);const Eo=_i(oh);function mt(t){return function(){return t}}const Ao=Math.abs,lt=Math.atan2,un=Math.cos,ah=Math.max,Sr=Math.min,Bt=Math.sin,Sn=Math.sqrt,vt=1e-12,ne=Math.PI,Xe=ne/2,Se=2*ne;function sh(t){return t>1?0:t<-1?ne:Math.acos(t)}function To(t){return t>=1?Xe:t<=-1?-Xe:Math.asin(t)}function uh(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new Dc(n)}function lh(t){return t.innerRadius}function ch(t){return t.outerRadius}function fh(t){return t.startAngle}function hh(t){return t.endAngle}function dh(t){return t&&t.padAngle}function ph(t,n,e,r,i,a,o,s){var f=e-t,u=r-n,l=o-i,c=s-a,h=c*f-l*u;if(!(h*h<vt))return h=(l*(n-a)-c*(t-i))/h,[t+h*f,n+h*u]}function me(t,n,e,r,i,a,o){var s=t-e,f=n-r,u=(o?a:-a)/Sn(s*s+f*f),l=u*f,c=-u*s,h=t+l,d=n+c,g=e+l,w=r+c,S=(h+g)/2,y=(d+w)/2,_=g-h,b=w-d,M=_*_+b*b,A=i-a,N=h*w-g*d,B=(b<0?-1:1)*Sn(ah(0,A*A*M-N*N)),L=(N*b-_*B)/M,z=(-N*_-b*B)/M,D=(N*b+_*B)/M,E=(-N*_+b*B)/M,O=L-S,$=z-y,p=D-S,m=E-y;return O*O+$*$>p*p+m*m&&(L=D,z=E),{cx:L,cy:z,x01:-l,y01:-c,x11:L*(i/A-1),y11:z*(i/A-1)}}function gh(){var t=lh,n=ch,e=mt(0),r=null,i=fh,a=hh,o=dh,s=null,f=uh(u);function u(){var l,c,h=+t.apply(this,arguments),d=+n.apply(this,arguments),g=i.apply(this,arguments)-Xe,w=a.apply(this,arguments)-Xe,S=Ao(w-g),y=w>g;if(s||(s=l=f()),d<h&&(c=d,d=h,h=c),!(d>vt))s.moveTo(0,0);else if(S>Se-vt)s.moveTo(d*un(g),d*Bt(g)),s.arc(0,0,d,g,w,!y),h>vt&&(s.moveTo(h*un(w),h*Bt(w)),s.arc(0,0,h,w,g,y));else{var _=g,b=w,M=g,A=w,N=S,B=S,L=o.apply(this,arguments)/2,z=L>vt&&(r?+r.apply(this,arguments):Sn(h*h+d*d)),D=Sr(Ao(d-h)/2,+e.apply(this,arguments)),E=D,O=D,$,p;if(z>vt){var m=To(z/h*Bt(L)),v=To(z/d*Bt(L));(N-=m*2)>vt?(m*=y?1:-1,M+=m,A-=m):(N=0,M=A=(g+w)/2),(B-=v*2)>vt?(v*=y?1:-1,_+=v,b-=v):(B=0,_=b=(g+w)/2)}var T=d*un(_),I=d*Bt(_),P=h*un(A),F=h*Bt(A);if(D>vt){var Y=d*un(b),G=d*Bt(b),W=h*un(M),Z=h*Bt(M),X;if(S<ne)if(X=ph(T,I,W,Z,Y,G,P,F)){var ht=T-X[0],at=I-X[1],dt=Y-X[0],Yt=G-X[1],ie=1/Bt(sh((ht*dt+at*Yt)/(Sn(ht*ht+at*at)*Sn(dt*dt+Yt*Yt)))/2),Wt=Sn(X[0]*X[0]+X[1]*X[1]);E=Sr(D,(h-Wt)/(ie-1)),O=Sr(D,(d-Wt)/(ie+1))}else E=O=0}B>vt?O>vt?($=me(W,Z,T,I,d,O,y),p=me(Y,G,P,F,d,O,y),s.moveTo($.cx+$.x01,$.cy+$.y01),O<D?s.arc($.cx,$.cy,O,lt($.y01,$.x01),lt(p.y01,p.x01),!y):(s.arc($.cx,$.cy,O,lt($.y01,$.x01),lt($.y11,$.x11),!y),s.arc(0,0,d,lt($.cy+$.y11,$.cx+$.x11),lt(p.cy+p.y11,p.cx+p.x11),!y),s.arc(p.cx,p.cy,O,lt(p.y11,p.x11),lt(p.y01,p.x01),!y))):(s.moveTo(T,I),s.arc(0,0,d,_,b,!y)):s.moveTo(T,I),!(h>vt)||!(N>vt)?s.lineTo(P,F):E>vt?($=me(P,F,Y,G,h,-E,y),p=me(T,I,W,Z,h,-E,y),s.lineTo($.cx+$.x01,$.cy+$.y01),E<D?s.arc($.cx,$.cy,E,lt($.y01,$.x01),lt(p.y01,p.x01),!y):(s.arc($.cx,$.cy,E,lt($.y01,$.x01),lt($.y11,$.x11),!y),s.arc(0,0,h,lt($.cy+$.y11,$.cx+$.x11),lt(p.cy+p.y11,p.cx+p.x11),y),s.arc(p.cx,p.cy,E,lt(p.y11,p.x11),lt(p.y01,p.x01),!y))):s.arc(0,0,h,A,M,y)}if(s.closePath(),l)return s=null,l+""||null}return u.centroid=function(){var l=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-ne/2;return[un(c)*l,Bt(c)*l]},u.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:mt(+l),u):t},u.outerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:mt(+l),u):n},u.cornerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:mt(+l),u):e},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:mt(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:mt(+l),u):i},u.endAngle=function(l){return arguments.length?(a=typeof l=="function"?l:mt(+l),u):a},u.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:mt(+l),u):o},u.context=function(l){return arguments.length?(s=l??null,u):s},u}function mh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yh(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function vh(t){return t}function wh(){var t=vh,n=yh,e=null,r=mt(0),i=mt(Se),a=mt(0);function o(s){var f,u=(s=mh(s)).length,l,c,h=0,d=new Array(u),g=new Array(u),w=+r.apply(this,arguments),S=Math.min(Se,Math.max(-Se,i.apply(this,arguments)-w)),y,_=Math.min(Math.abs(S)/u,a.apply(this,arguments)),b=_*(S<0?-1:1),M;for(f=0;f<u;++f)(M=g[d[f]=f]=+t(s[f],f,s))>0&&(h+=M);for(n!=null?d.sort(function(A,N){return n(g[A],g[N])}):e!=null&&d.sort(function(A,N){return e(s[A],s[N])}),f=0,c=h?(S-u*b)/h:0;f<u;++f,w=y)l=d[f],M=g[l],y=w+(M>0?M*c:0)+b,g[l]={data:s[l],index:f,value:M,startAngle:w,endAngle:y,padAngle:_};return g}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:mt(+s),o):t},o.sortValues=function(s){return arguments.length?(n=s,e=null,o):n},o.sort=function(s){return arguments.length?(e=s,n=null,o):e},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:mt(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:mt(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:mt(+s),o):a},o}const ye=t=>()=>t;function xh(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Xt(t,n,e){this.k=t,this.x=n,this.y=e}Xt.prototype={constructor:Xt,scale:function(t){return t===1?this:new Xt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Xt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qn=new Xt(1,0,0);Xt.prototype;function Mr(t){t.stopImmediatePropagation()}function Bn(t){t.preventDefault(),t.stopImmediatePropagation()}function _h(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function bh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $o(){return this.__zoom||qn}function Sh(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Mh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eh(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],a=t.invertY(n[0][1])-e[0][1],o=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Ah(){var t=_h,n=bh,e=Eh,r=Sh,i=Mh,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Sl,u=si("start","zoom","end"),l,c,h,d=500,g=150,w=0,S=10;function y(p){p.property("__zoom",$o).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(p,m,v,T){var I=p.selection?p.selection():p;I.property("__zoom",$o),p!==I?A(p,m,v,T):I.interrupt().each(function(){N(this,arguments).event(T).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},y.scaleBy=function(p,m,v,T){y.scaleTo(p,function(){var I=this.__zoom.k,P=typeof m=="function"?m.apply(this,arguments):m;return I*P},v,T)},y.scaleTo=function(p,m,v,T){y.transform(p,function(){var I=n.apply(this,arguments),P=this.__zoom,F=v==null?M(I):typeof v=="function"?v.apply(this,arguments):v,Y=P.invert(F),G=typeof m=="function"?m.apply(this,arguments):m;return e(b(_(P,G),F,Y),I,o)},v,T)},y.translateBy=function(p,m,v,T){y.transform(p,function(){return e(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof v=="function"?v.apply(this,arguments):v),n.apply(this,arguments),o)},null,T)},y.translateTo=function(p,m,v,T,I){y.transform(p,function(){var P=n.apply(this,arguments),F=this.__zoom,Y=T==null?M(P):typeof T=="function"?T.apply(this,arguments):T;return e(qn.translate(Y[0],Y[1]).scale(F.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof v=="function"?-v.apply(this,arguments):-v),P,o)},T,I)};function _(p,m){return m=Math.max(a[0],Math.min(a[1],m)),m===p.k?p:new Xt(m,p.x,p.y)}function b(p,m,v){var T=m[0]-v[0]*p.k,I=m[1]-v[1]*p.k;return T===p.x&&I===p.y?p:new Xt(p.k,T,I)}function M(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function A(p,m,v,T){p.on("start.zoom",function(){N(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(T).end()}).tween("zoom",function(){var I=this,P=arguments,F=N(I,P).event(T),Y=n.apply(I,P),G=v==null?M(Y):typeof v=="function"?v.apply(I,P):v,W=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),Z=I.__zoom,X=typeof m=="function"?m.apply(I,P):m,ht=f(Z.invert(G).concat(W/Z.k),X.invert(G).concat(W/X.k));return function(at){if(at===1)at=X;else{var dt=ht(at),Yt=W/dt[2];at=new Xt(Yt,G[0]-dt[0]*Yt,G[1]-dt[1]*Yt)}F.zoom(null,at)}})}function N(p,m,v){return!v&&p.__zooming||new B(p,m)}function B(p,m){this.that=p,this.args=m,this.active=0,this.sourceEvent=null,this.extent=n.apply(p,m),this.taps=0}B.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,m){return this.mouse&&p!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var m=ut(this.that).datum();u.call(p,this.that,new xh(p,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),m)}};function L(p,...m){if(!t.apply(this,arguments))return;var v=N(this,m).event(p),T=this.__zoom,I=Math.max(a[0],Math.min(a[1],T.k*Math.pow(2,r.apply(this,arguments)))),P=sn(p);if(v.wheel)(v.mouse[0][0]!==P[0]||v.mouse[0][1]!==P[1])&&(v.mouse[1]=T.invert(v.mouse[0]=P)),clearTimeout(v.wheel);else{if(T.k===I)return;v.mouse=[P,T.invert(P)],_e(this),v.start()}Bn(p),v.wheel=setTimeout(F,g),v.zoom("mouse",e(b(_(T,I),v.mouse[0],v.mouse[1]),v.extent,o));function F(){v.wheel=null,v.end()}}function z(p,...m){if(h||!t.apply(this,arguments))return;var v=p.currentTarget,T=N(this,m,!0).event(p),I=ut(p.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",W,!0),P=sn(p,v),F=p.clientX,Y=p.clientY;Yu(p.view),Mr(p),T.mouse=[P,this.__zoom.invert(P)],_e(this),T.start();function G(Z){if(Bn(Z),!T.moved){var X=Z.clientX-F,ht=Z.clientY-Y;T.moved=X*X+ht*ht>w}T.event(Z).zoom("mouse",e(b(T.that.__zoom,T.mouse[0]=sn(Z,v),T.mouse[1]),T.extent,o))}function W(Z){I.on("mousemove.zoom mouseup.zoom",null),Vu(Z.view,T.moved),Bn(Z),T.event(Z).end()}}function D(p,...m){if(t.apply(this,arguments)){var v=this.__zoom,T=sn(p.changedTouches?p.changedTouches[0]:p,this),I=v.invert(T),P=v.k*(p.shiftKey?.5:2),F=e(b(_(v,P),T,I),n.apply(this,m),o);Bn(p),s>0?ut(this).transition().duration(s).call(A,F,T,p):ut(this).call(y.transform,F,T,p)}}function E(p,...m){if(t.apply(this,arguments)){var v=p.touches,T=v.length,I=N(this,m,p.changedTouches.length===T).event(p),P,F,Y,G;for(Mr(p),F=0;F<T;++F)Y=v[F],G=sn(Y,this),G=[G,this.__zoom.invert(G),Y.identifier],I.touch0?!I.touch1&&I.touch0[2]!==G[2]&&(I.touch1=G,I.taps=0):(I.touch0=G,P=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),P&&(I.taps<2&&(c=G[0],l=setTimeout(function(){l=null},d)),_e(this),I.start())}}function O(p,...m){if(this.__zooming){var v=N(this,m).event(p),T=p.changedTouches,I=T.length,P,F,Y,G;for(Bn(p),P=0;P<I;++P)F=T[P],Y=sn(F,this),v.touch0&&v.touch0[2]===F.identifier?v.touch0[0]=Y:v.touch1&&v.touch1[2]===F.identifier&&(v.touch1[0]=Y);if(F=v.that.__zoom,v.touch1){var W=v.touch0[0],Z=v.touch0[1],X=v.touch1[0],ht=v.touch1[1],at=(at=X[0]-W[0])*at+(at=X[1]-W[1])*at,dt=(dt=ht[0]-Z[0])*dt+(dt=ht[1]-Z[1])*dt;F=_(F,Math.sqrt(at/dt)),Y=[(W[0]+X[0])/2,(W[1]+X[1])/2],G=[(Z[0]+ht[0])/2,(Z[1]+ht[1])/2]}else if(v.touch0)Y=v.touch0[0],G=v.touch0[1];else return;v.zoom("touch",e(b(F,Y,G),v.extent,o))}}function $(p,...m){if(this.__zooming){var v=N(this,m).event(p),T=p.changedTouches,I=T.length,P,F;for(Mr(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),P=0;P<I;++P)F=T[P],v.touch0&&v.touch0[2]===F.identifier?delete v.touch0:v.touch1&&v.touch1[2]===F.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(F=sn(F,this),Math.hypot(c[0]-F[0],c[1]-F[1])<S)){var Y=ut(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:ye(+p),y):r},y.filter=function(p){return arguments.length?(t=typeof p=="function"?p:ye(!!p),y):t},y.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ye(!!p),y):i},y.extent=function(p){return arguments.length?(n=typeof p=="function"?p:ye([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),y):n},y.scaleExtent=function(p){return arguments.length?(a[0]=+p[0],a[1]=+p[1],y):[a[0],a[1]]},y.translateExtent=function(p){return arguments.length?(o[0][0]=+p[0][0],o[1][0]=+p[1][0],o[0][1]=+p[0][1],o[1][1]=+p[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(p){return arguments.length?(e=p,y):e},y.duration=function(p){return arguments.length?(s=+p,y):s},y.interpolate=function(p){return arguments.length?(f=p,y):f},y.on=function(){var p=u.on.apply(u,arguments);return p===u?y:p},y.clickDistance=function(p){return arguments.length?(w=(p=+p)*p,y):Math.sqrt(w)},y.tapDistance=function(p){return arguments.length?(S=+p,y):S},y}class Th{constructor(n=[],e=(r,i)=>r<i?-1:r>i?1:0){if(this.data=n,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:e,compare:r}=this,i=e[n];for(;n>0;){const a=n-1>>1,o=e[a];if(r(i,o)>=0)break;e[n]=o,n=a}e[n]=i}_down(n){const{data:e,compare:r}=this,i=this.length>>1,a=e[n];for(;n<i;){let o=(n<<1)+1;const s=o+1;if(s<this.length&&r(e[s],e[o])<0&&(o=s),r(e[o],a)>=0)break;e[n]=e[o],n=o}e[n]=a}}function No(t,n=1,e=!1){let r=1/0,i=1/0,a=-1/0,o=-1/0;for(const[y,_]of t[0])y<r&&(r=y),_<i&&(i=_),y>a&&(a=y),_>o&&(o=_);const s=a-r,f=o-i,u=Math.max(n,Math.min(s,f));if(u===n){const y=[r,i];return y.distance=0,y}const l=new Th([],(y,_)=>_.max-y.max);let c=Nh(t);const h=new Ze(r+s/2,i+f/2,0,t);h.d>c.d&&(c=h);let d=2;function g(y,_,b){const M=new Ze(y,_,b,t);d++,M.max>c.d+n&&l.push(M),M.d>c.d&&(c=M,e&&console.log(`found best ${Math.round(1e4*M.d)/1e4} after ${d} probes`))}let w=u/2;for(let y=r;y<a;y+=u)for(let _=i;_<o;_+=u)g(y+w,_+w,w);for(;l.length;){const{max:y,x:_,y:b,h:M}=l.pop();if(y-c.d<=n)break;w=M/2,g(_-w,b-w,w),g(_+w,b-w,w),g(_-w,b+w,w),g(_+w,b+w,w)}e&&console.log(`num probes: ${d}
best distance: ${c.d}`);const S=[c.x,c.y];return S.distance=c.d,S}function Ze(t,n,e,r){this.x=t,this.y=n,this.h=e,this.d=$h(t,n,r),this.max=this.d+this.h*Math.SQRT2}function $h(t,n,e){let r=!1,i=1/0;for(const a of e)for(let o=0,s=a.length,f=s-1;o<s;f=o++){const u=a[o],l=a[f];u[1]>n!=l[1]>n&&t<(l[0]-u[0])*(n-u[1])/(l[1]-u[1])+u[0]&&(r=!r),i=Math.min(i,kh(t,n,u,l))}return i===0?0:(r?1:-1)*Math.sqrt(i)}function Nh(t){let n=0,e=0,r=0;const i=t[0];for(let o=0,s=i.length,f=s-1;o<s;f=o++){const u=i[o],l=i[f],c=u[0]*l[1]-l[0]*u[1];e+=(u[0]+l[0])*c,r+=(u[1]+l[1])*c,n+=c*3}const a=new Ze(e/n,r/n,0,t);return n===0||a.d<0?new Ze(i[0][0],i[0][1],0,t):a}function kh(t,n,e,r){let i=e[0],a=e[1],o=r[0]-i,s=r[1]-a;if(o!==0||s!==0){const f=((t-i)*o+(n-a)*s)/(o*o+s*s);f>1?(i=r[0],a=r[1]):f>0&&(i+=o*f,a+=s*f)}return o=t-i,s=n-a,o*o+s*s}function Rh(){const t=document.getElementById("chart-modal");t&&(t.classList.remove("hidden"),document.body.style.overflow="hidden",Ch())}function ko(){const t=document.getElementById("chart-modal");if(t){t.classList.add("hidden"),document.body.style.overflow="auto";const n=document.getElementById("modal-content");n&&(n.innerHTML="");const e=document.getElementById("modal-window");e&&(e.style.transform="")}}function Ch(){const t=document.getElementById("modal-header"),n=document.getElementById("modal-window");if(!t||!n)return;let e=!1,r=0,i=0,a=0,o=0;t.addEventListener("mousedown",s=>{e=!0,r=s.clientX,i=s.clientY;const u=n.style.transform.match(/translate\(([^,]+),\s*([^)]+)\)/);u?(a=parseFloat(u[1])||0,o=parseFloat(u[2])||0):(a=0,o=0),t.style.cursor="grabbing",s.preventDefault()}),document.addEventListener("mousemove",s=>{if(!e)return;const f=s.clientX-r,u=s.clientY-i,l=a+f,c=o+u;n.style.transform=`translate(${l}px, ${c}px)`}),document.addEventListener("mouseup",()=>{e&&(e=!1,t.style.cursor="move")})}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("close-modal");t&&t.addEventListener("click",ko);const n=document.getElementById("chart-modal");n&&n.addEventListener("click",e=>{e.target===n&&ko()})});const Ia={AFG:"AF",AGO:"AO",ALB:"AL",ARE:"AE",ARG:"AR",ARM:"AM",ATA:"AQ",ATF:"TF",AUS:"AU",AUT:"AT",AZE:"AZ",BDI:"BI",BEL:"BE",BEN:"BJ",BFA:"BF",BGD:"BD",BGR:"BG",BHS:"BS",BIH:"BA",BLR:"BY",BLZ:"BZ",BOL:"BO",BRA:"BR",BRN:"BN",BTN:"BT",BWA:"BW",CAF:"CF",CAN:"CA",CHE:"CH",CHL:"CL",CHN:"CN",CIV:"CI",CMR:"CM",COD:"CD",COG:"CG",COL:"CO",CRI:"CR",CUB:"CU","-99":"CY",CYP:"CY",CZE:"CZ",DEU:"DE",DJI:"DJ",DNK:"DK",DOM:"DO",DZA:"DZ",ECU:"EC",EGY:"EG",ERI:"ER",ESP:"ES",EST:"EE",ETH:"ET",FIN:"FI",FJI:"FJ",FLK:"FK",FRA:"FR",GAB:"GA",GBR:"GB",GEO:"GE",GHA:"GH",GIN:"GN",GMB:"GM",GNB:"GW",GNQ:"GQ",GRC:"GR",GTM:"GT",GUY:"GY",HND:"HN",HRV:"HR",HTI:"HT",HUN:"HU",IDN:"ID",IND:"IN",IRL:"IE",IRN:"IR",IRQ:"IQ",ISL:"IS",ISR:"IL",ITA:"IT",JAM:"JM",JOR:"JO",JPN:"JP",KAZ:"KZ",KEN:"KE",KGZ:"KG",KHM:"KH",KOR:"KR",KWT:"KW",LAO:"LA",LBN:"LB",LBR:"LR",LBY:"LY",LKA:"LK",LSO:"LS",LTU:"LT",LUX:"LU",LVA:"LV",MAR:"MA",MDA:"MD",MDG:"MG",MEX:"MX",MKD:"MK",MLI:"ML",MMR:"MM",MNE:"ME",MNG:"MN",MOZ:"MZ",MRT:"MR",MWI:"MW",MYS:"MY",NAM:"NA",NCL:"NC",NER:"NE",NGA:"NG",NIC:"NI",NLD:"NL",NOR:"NO",NPL:"NP",NZL:"NZ",OMN:"OM",PAK:"PK",PAN:"PA",PER:"PE",PHL:"PH",PNG:"PG",POL:"PL",PRI:"PR",PRK:"KP",PRT:"PT",PRY:"PY",QAT:"QA",ROU:"RO",RUS:"RU",RWA:"RW",ESH:"EH",SAU:"SA",SDN:"SD",SSD:"SS",SEN:"SN",SLB:"SB",SLE:"SL",SLV:"SV",SOM:"SO",SRB:"RS",SUR:"SR",SVK:"SK",SVN:"SI",SWE:"SE",SWZ:"SZ",SYR:"SY",TCD:"TD",TGO:"TG",THA:"TH",TJK:"TJ",TKM:"TM",TLS:"TL",TTO:"TT",TUN:"TN",TUR:"TR",TWN:"TW",TZA:"TZ",UGA:"UG",UKR:"UA",URY:"UY",USA:"US",UZB:"UZ",VEN:"VE",VNM:"VN",VUT:"VU",YEM:"YE",ZAF:"ZA",ZMB:"ZM",ZWE:"ZW"},En=1200,hn=700,Nt=ut("#world-map").attr("viewBox",`0 0 ${En} ${hn}`).attr("preserveAspectRatio","xMidYMid meet"),Me=Nt.append("g"),Un=Wf().scale(150).translate([En/2,hn/1.6]),Ro=zf().projection(Un),Er=ut("body").append("div").attr("class","tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("background","rgba(255,255,255,0.8)").style("border","1px solid #ccc").style("padding","10px").style("border-radius","5px").style("font-family","sans-serif").style("font-size","14px"),Ee=Ah().scaleExtent([1,8]).translateExtent([[-500,-500],[En+500,hn+500]]).on("zoom",t=>{Me.attr("transform",t.transform)});Nt.call(Ee);Object.fromEntries(Object.entries(Ia).map(([t,n])=>[n,t]));const Ih="https://docs.google.com/spreadsheets/d/e/2PACX-1vRMpij3w_R0ZWyvWT8zBSi25VKx1X928VAfxc8FKBp6hanTbEkbgEs_V5XuR1koFRwtY3qvjh4ew_kk/pub?gid=1648232698&single=true&output=csv",Lh="https://docs.google.com/spreadsheets/d/e/2PACX-1vRZKEDLZNIvWdVYvdT-Re-GKVf_cRG2TfdVOxViBloLyHa5bbLukwBy19n1aNw3O3S_SPACFLWpTMn-/pub?gid=4146846&single=true&output=csv",Ph="./";let bt="policies",kt="Electricity",We="latest";function Bh(t){return Number.isFinite(t)?t<=2025?"2020":t>=2025&&t<=2035?"2030":t>=2035&&t<=2050?"2050":null:null}let ct={},Ar=!1,Kn=null;function La(){const t=document.getElementById("submenuOptions"),n=document.getElementById("targetsSubmenu"),e=document.getElementById("submenuClose"),r=document.getElementById("yearGroupOptions"),i=document.getElementById("yearGroupWrapper");if(document.getElementById("filterModeOptions"),!t||!n||!e)return;const a=ct.targets.allTargetTypes||[];console.log("Initializing submenu with target types:",a),!Ar||t.children.length!==a.length?(t.innerHTML="",i&&i.classList.remove("hidden"),r&&r.children.length===0&&["latest","2020","2030","2050"].forEach(s=>{const f=document.createElement("button");f.className="year-option",f.textContent=s==="latest"?"Latest Target":s,s===We&&f.classList.add("active"),f.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),We=s,r.querySelectorAll(".year-option").forEach(l=>l.classList.remove("active")),f.classList.add("active"),Kn&&Kn()}),r.appendChild(f)}),a.forEach(o=>{const s=document.createElement("button");s.className="submenu-option",s.textContent=o,s.dataset.targetType=o,o===kt&&s.classList.add("active"),s.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation(),console.log("Target type clicked:",o),kt=o,bt="targets",console.log("Updated currentTargetType to:",kt),t.querySelectorAll(".submenu-option").forEach(u=>{u.classList.remove("active")}),s.classList.add("active"),console.log("Calling updateMap for target type:",o),Kn?Kn():console.error("updateMap function not available yet")}),t.appendChild(s)}),Ar||e.addEventListener("click",Pa),Ar=!0):t.querySelectorAll(".submenu-option").forEach(o=>{o.classList.remove("active"),o.textContent===kt&&o.classList.add("active")})}function Dh(){La();const t=document.getElementById("targetsSubmenu");t&&t.classList.add("visible")}function Pa(){const t=document.getElementById("targetsSubmenu");t&&t.classList.remove("visible")}function zh(){const t=document.getElementById("loading-message");t&&t.classList.add("visible")}function Co(){const t=document.getElementById("loading-message");t&&t.classList.remove("visible")}zh();Promise.all([Xc(`${Ph}world.geojson`),ji(Ih),ji(Lh)]).then(([t,n,e])=>{var Ai,Ti,$i;console.log("Data loaded successfully:"),console.log("Policy CSV rows:",n.length),console.log("Targets CSV rows:",e.length),console.log("First few targets rows:",e.slice(0,3)),!e||e.length===0||!e[0]||Object.keys(e[0]).length<5?(console.log("Targets CSV appears to be empty or malformed, using sample data"),e=[{Country:"DEU",A:"DEU",F:"2021-06-01",H:"2030",K:"65"},{Country:"FRA",A:"FRA",F:"2020-04-15",H:"2030",K:"40"},{Country:"ESP",A:"ESP",F:"2021-03-20",H:"2030",K:"42"},{Country:"ITA",A:"ITA",F:"2020-12-10",H:"2030",K:"30"},{Country:"GBR",A:"GBR",F:"2021-04-22",H:"2030",K:"40"},{Country:"NLD",A:"NLD",F:"2019-06-28",H:"2030",K:"70"},{Country:"DNK",A:"DNK",F:"2020-06-25",H:"2030",K:"50"},{Country:"SWE",A:"SWE",F:"2017-06-15",H:"2030",K:"100"},{Country:"NOR",A:"NOR",F:"2016-06-11",H:"2030",K:"67.5"},{Country:"USA",A:"USA",F:"2021-04-22",H:"2030",K:"50"},{Country:"CAN",A:"CAN",F:"2020-12-11",H:"2030",K:"90"},{Country:"JPN",A:"JPN",F:"2020-10-26",H:"2030",K:"36-38"},{Country:"AUS",A:"AUS",F:"2021-10-26",H:"2030",K:"43"},{Country:"BRA",A:"BRA",F:"2021-04-22",H:"2030",K:"45"},{Country:"IND",A:"IND",F:"2021-11-01",H:"2030",K:"50"},{Country:"CHN",A:"CHN",F:"2020-09-22",H:"2030",K:"25"}]):(console.log("Successfully loaded targets CSV with",e.length,"rows"),console.log("First row keys:",Object.keys(e[0])),console.log("First few rows:",e.slice(0,3))),console.log("D3 detected columns:",n.columns);const r=(()=>{const x=n.columns||[],k=x.find(C=>C&&C.trim().toLowerCase()==="policy_changed_detail");return k||x.find(C=>C&&C.trim().toLowerCase()==="policy_changed")||null})();function i(x){if(!r)return!1;const k=x[r];return k==null?!1:String(k).trim().toLowerCase()==="introduced"}const a=t.features.reduce((x,k)=>(x[k.properties.name]=k.id,x),{}),o=new Set,s=new Set;n.forEach(x=>{const k=x.measure?String(x.measure):"Unknown";o.add(k);const R=x.Technology_type?String(x.Technology_type):"Unknown";s.add(R)});const f=Array.from(o).sort(),u=Array.from(s).sort(),l=["#8fb9e0","#f4b37d","#9fd18b","#e79aa0","#b7a6d9","#c7a58a","#e6a9c8","#9bb8bf","#c9c97a","#86cdd3","#b9d7ef","#f7cfa2","#cfe8b9","#e8b9bd","#d6c3e9","#b8c6da"],c=qe().domain(f).range(l),h=qe().domain(u).range(l);function d(x){const k=String(x||"Unknown"),R=k.toLowerCase(),C=Ir("#8fb9e0"),H=Ir(220,C.s,Math.max(0,C.l-.25)).toString();return R.includes("tender")||R.includes("auction")?H:c(k)||"#8fb9e0"}const g=n.reduce((x,k)=>{if(!i(k))return x;const R=k.country;if(R){const C=a[R];C&&(x[C]||(x[C]=0),x[C]++)}return x},{}),w=n.reduce((x,k)=>{if(!i(k))return x;const R=k.country,C=k.Technology_type||"Unknown";if(R){const H=a[R];H&&(x[H]||(x[H]={}),x[H][C]||(x[H][C]=0),x[H][C]++)}return x},{}),S=["introduc","reintr","resume","reactiv","adopt","pass","enact","implement","launch","start"],y=["suspend","terminat","repeal","remove","expire","cancel","end","discontinu","phase","sunset","halt"],_=x=>{const k=x.toLowerCase();return S.some(R=>k.includes(R))?"activate":y.some(R=>k.includes(R))?"deactivate":"other"},b={};let M=null,A=null;n.forEach(x=>{const k=x.country,R=x.measure||"Unknown",C=x.year,H=r?x[r]:null,q=C!=null?Number(C):NaN,V=H!=null?String(H):"";if(!k||!Number.isFinite(q))return;const pt=_(V);if(pt==="other")return;const rt=a[k];rt&&(b[rt]||(b[rt]={}),b[rt][R]||(b[rt][R]=[]),b[rt][R].push({year:q,type:pt}),(M===null||q<M)&&(M=q),(A===null||q>A)&&(A=q))});const N=M??1990,B=Math.max(A??N,2025),L={};Object.entries(b).forEach(([x,k])=>{L[x]||(L[x]={}),Object.entries(k).forEach(([R,C])=>{C.sort((V,pt)=>V.year-pt.year);let H=!1;const q={};C.forEach(V=>{q[V.year]||(q[V.year]=[]),q[V.year].push(V.type)});for(let V=N;V<=B;V++){const pt=q[V]||[];pt.length>0&&pt.forEach(rt=>{rt==="activate"?H=!0:rt==="deactivate"&&(H=!1)}),L[x][V]||(L[x][V]={}),L[x][V][R]=H?1:0}})}),Object.keys(g).length===0&&console.warn("Warning: No policy data was processed. Check if the 'country' column in the spreadsheet is named correctly and if the header row is not sorted with the data."),console.log("Targets CSV columns:",e.columns);const z=Object.fromEntries(t.features.map(x=>[x.id,x.properties.name])),D={},E=new Set;e.forEach((x,k)=>{const R=x[Object.keys(x)[0]],C=x[Object.keys(x)[5]],H=x[Object.keys(x)[7]],q=x[Object.keys(x)[10]],V=x[Object.keys(x)[13]];if(k<5&&console.log(`Row ${k}:`,{countryCode3:R,decisionDate:C,targetYear:H,targetValue:q,targetType:V,allKeys:Object.keys(x)}),V&&R&&C&&H&&q){E.add(V);const pt=new Date(C),rt=parseFloat(q),yn=parseInt(H);!isNaN(pt.getTime())&&!isNaN(rt)&&!isNaN(yn)&&(D[V]||(D[V]={}),(!D[V][R]||new Date(D[V][R].decisionDate)<pt)&&(D[V][R]={decisionDate:C,targetYear:yn,targetValue:rt,countryName:z[R]||R,targetType:V}))}});const O=D["Primary energy"]||{};console.log("Available target types:",Array.from(E)),console.log("Processed targets data by type:",Object.keys(D)),console.log("Primary energy targets:",Object.keys(O).length,"countries"),console.log("Sample targets data:",Object.entries(O).slice(0,3)),ct={geoData:t,policies:{data:g,typeData:w,timeSeriesData:L,colorScale:null,globalColorScale:c},targets:{data:O,dataByType:D,allTargetTypes:Array.from(E),colorScale:null,colorScales:{},minMax:{}}},!ct.targets.allTargetTypes.includes("Electricity")&&ct.targets.allTargetTypes.length>0&&(kt=ct.targets.allTargetTypes[0]);const $=Object.values(g).reduce((x,k)=>(typeof k=="number"&&x.push(k),x),[]),p=cr($),m=lr($),v=Gn(ge).domain([p,m]),T={},I={};E.forEach(x=>{const k=D[x]||{},R=Object.values(k).map(C=>C.targetValue);if(R.length>0){const C=cr(R),H=lr(R);I[x]={min:C,max:H},T[x]=Gn(br).domain([C,H])}});const P=D["Primary energy"]||{},F=Object.values(P).map(x=>x.targetValue),Y=F.length>0?cr(F):0,G=F.length>0?lr(F):100,W=Y,Z=G,X=T["Primary energy"]||Gn(br).domain([Y,G]),ht=Gn(Eo).domain([0,100]);ct.policies.colorScale=v,ct.targets.colorScale=X,ct.targets.colorScales=T,ct.targets.minMax=I,ct.ev={colorScale:ht};function at(x){if(bt==="policies")return x&&g[x]?v(g[x]):"#ccc";if(bt==="targets"){const k=ct.targets.dataByType[kt]||{},R=ct.targets.colorScales[kt];if((x==="USA"||x==="DEU"||x==="CHN")&&console.log(`getCountryColor for ${x}:`,{currentTargetType:kt,currentTargetData:k[x],currentColorScale:!!R,allTargetTypes:ct.targets.allTargetTypes,dataByTypeKeys:Object.keys(ct.targets.dataByType||{}),colorScalesKeys:Object.keys(ct.targets.colorScales||{})}),x&&k[x]&&R){const C=k[x],H=C.targetValue;{if(We==="latest")return R(H);const q=Bh(Number(C.targetYear));return q&&q===We?R(H):"#eee"}}else return"#ccc"}else if(bt==="ev")return"#ccc";return"#ccc"}function dt(x,k){if(bt==="policies"){const R=g[x]||"No data";return`<strong>${k}</strong><br/>Policies: ${R}`}else if(bt==="targets"){const C=(ct.targets.dataByType[kt]||{})[x];return C?`<strong>${k}</strong><br/>Target Type: ${kt}<br/>Target: ${C.targetValue}% by ${C.targetYear}<br/>Decision: ${C.decisionDate}`:`<strong>${k}</strong><br/>No ${kt} target data`}else if(bt==="ev")return`<strong>${k}</strong><br/>EV data coming soon`;return`<strong>${k}</strong>`}function Yt(x){const k=Nt.select("#gradient-color");let R,C,H;switch(x){case"policies":R=ge,C=p,H=m;break;case"targets":R=br,C=W,H=Z;break;case"ev":R=Eo,C=0,H=100;break;default:R=ge,C=p,H=m}const q=$r(0,1.01,.25).map(V=>({offset:`${V*100}%`,color:R(V)}));k.selectAll("stop").data(q).attr("stop-color",V=>V.color),Nt.select(".legend").selectAll("text").remove(),Nt.select(".legend").append("text").attr("x",0).attr("y",40).style("font-size","12px").text(Math.round(C)),Nt.select(".legend").append("text").attr("x",300).attr("y",40).style("font-size","12px").text(Math.round(H))}function ie(x){const k=[5,48];if(x==="policies"){const C=Un(k);Nt.transition().duration(750).call(Ee.transform,qn.translate(En/2-C[0]*5,hn/2-C[1]*5).scale(5))}else if(x==="targets"){const R=[5,48],C=1.3,H=Un(R);Nt.transition().duration(750).call(Ee.transform,qn.translate(En/2-H[0]*C,hn/2-H[1]*C).scale(C))}}function Wt(){Me.selectAll("path").transition().duration(500).attr("fill",x=>at(x.id)),Yt(bt),ie(bt),bt==="targets"&&La()}Kn=Wt;function Ba(x,k){const R=document.getElementById("modal-content"),C=document.getElementById("modal-title");if(!R)return;C&&(C.textContent=`${k}  Dashboard`);const H=q=>{const V=q.toLowerCase();return new Set(["fit","tgc","pv"]).has(V)?V.toUpperCase():V.split(/\s+/).map(rt=>rt.charAt(0).toUpperCase()+rt.slice(1)).join(" ")};R.innerHTML=`
            <div id="dashboard-top" style="display:flex; gap:16px; width:100%; height:100%; flex-direction:row;">
                <div id="dashboard-pie" style="flex:1; min-height:300px; background:#f8fafc; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06);"></div>
                <div id="dashboard-timeseries" style="flex:1; min-height:300px; background:#f8fafc; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06);"></div>
            </div>
        `,Rh(),requestAnimationFrame(()=>{const q=document.getElementById("dashboard-top");if(q){const gt=()=>{const Et=q.getBoundingClientRect().width;q.style.flexDirection=Et<768?"column":"row"};gt(),window.addEventListener("resize",gt,{once:!0})}const V=document.getElementById("dashboard-pie"),pt=w[x]||{},rt=Object.entries(pt).map(([gt,Et])=>({type:gt,count:Et}));if(V&&rt.length>0){const gt=V.getBoundingClientRect(),Et=ut(V).append("svg").attr("width",gt.width).attr("height",gt.height).style("filter","drop-shadow(0 4px 8px rgba(0,0,0,0.06))"),tn=Et.append("g").attr("transform",`translate(${gt.width/2}, ${gt.height/2})`);Et.append("text").attr("x",gt.width/2).attr("y",18).style("text-anchor","middle").style("font-size","14px").style("font-weight","600").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#334155").text("Technology Support");const nn=Math.max(60,Math.min(gt.width,gt.height)*.35),en=gh().outerRadius(nn).innerRadius(nn*.45).cornerRadius(8),or=wh().value(J=>J.count).sort(null),ar=Et.append("defs"),rn=J=>J.replace(/[^a-zA-Z0-9_-]/g,"-");rt.forEach(J=>{var Lt,Cn;const it=h(J.type)||"#8fb9e0",Gt=`dash-pie-${rn(J.type)}`,wn=ar.append("linearGradient").attr("id",Gt).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");wn.append("stop").attr("offset","0%").attr("stop-color",it).attr("stop-opacity",1),wn.append("stop").attr("offset","100%").attr("stop-color",((Cn=(Lt=jt(it))==null?void 0:Lt.darker(.3))==null?void 0:Cn.toString())||"#1e40af").attr("stop-opacity",1)});const on=tn.selectAll(".slice").data(or(rt)).enter().append("g").attr("class","slice");on.append("path").attr("d",en).attr("fill",J=>`url(#dash-pie-${rn(J.data.type)})`).style("opacity",.95).on("mouseover",function(){ut(this).style("filter","brightness(1.1)")}).on("mouseout",function(){ut(this).style("filter",null)});const $t=rt.reduce((J,it)=>J+it.count,0);on.append("text").attr("transform",J=>`translate(${en.centroid(J)})`).attr("text-anchor","middle").attr("font-size","12px").attr("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").attr("fill","#ffffff").attr("font-weight","600").style("text-shadow","0 1px 2px rgba(0,0,0,0.5)").text(J=>{const it=Math.round(J.data.count/$t*100);return it>5?`${it}%`:""});const Vt={top:12,right:12},vn=Et.append("g").attr("transform",`translate(${gt.width-160-Vt.right}, ${Vt.top})`);rt.sort((J,it)=>it.count-J.count).slice(0,10).forEach((J,it)=>{const Gt=vn.append("g").attr("transform",`translate(0, ${it*18})`);Gt.append("circle").attr("cx",6).attr("cy",6).attr("r",5).attr("fill",h(J.type)).style("stroke","rgba(255,255,255,0.9)").style("stroke-width",1),Gt.append("text").attr("x",18).attr("y",6).attr("dy","0.35em").style("font-size","11px").style("font-weight","500").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#334155").text(H(String(J.type)))})}const yn=document.getElementById("dashboard-timeseries"),ir=L[x];if(yn&&ir){let gt=function(U,ot,Jt){const Ut=document.getElementById("modal-content");if(!Ut)return;Ut.querySelectorAll(".policy-detail-popup").forEach(oe=>oe.remove());const st=document.createElement("div");st.className="policy-detail-popup",st.style.position="absolute",st.style.right="24px",st.style.bottom="24px",st.style.maxWidth="360px",st.style.background="rgba(255,255,255,0.95)",st.style.border="1px solid #e5e7eb",st.style.borderRadius="12px",st.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)",st.style.padding="14px",st.style.zIndex="1000";const At=document.createElement("div");At.style.display="flex",At.style.justifyContent="space-between",At.style.alignItems="center",At.style.marginBottom="8px",At.innerHTML=`<span style="font-weight:600; color:#111827">${k}  ${U} (${ot})</span>`;const Pt=document.createElement("button");Pt.textContent="",Pt.style.fontSize="18px",Pt.style.color="#6b7280",Pt.style.border="none",Pt.style.background="none",Pt.style.cursor="pointer",Pt.onclick=()=>st.remove(),At.appendChild(Pt),st.appendChild(At);const Qt=document.createElement("div");Qt.style.display="flex",Qt.style.flexDirection="column",Qt.style.gap="8px";const xn=Jt.slice(0,5);xn.length===0?Qt.innerHTML='<div style="color:#6b7280">No specific policies matched.</div>':xn.forEach(oe=>{const an=document.createElement("div");an.style.padding="10px",an.style.borderRadius="8px",an.style.background="#f9fafb",an.style.border="1px solid #e5e7eb";const _n=In=>oe[In]??"";an.innerHTML=`
                                <div style="font-weight:600; color:#374151;">${_n("level_1")||"(no title)"}</div>
                                <div style="font-size:12px; color:#4b5563;">Tech: ${_n("Technology_type")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Currency: ${_n("level_1_currency")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Percent Detail: ${_n("level_1_percent_type_detail")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Unit: ${_n("level_1_unit")||"-"}</div>
                            `,Qt.appendChild(an)}),st.appendChild(Qt),Ut.appendChild(st)};const Et=Object.keys(ir).map(Number).sort(),tn={},nn=new Set;Et.forEach(U=>{tn[U]={};const ot=ir[U];ot&&Object.entries(ot).forEach(([Jt,Ut])=>{Ut>0&&(tn[U][Jt]=1,nn.add(Jt))})});const en=Et.filter(U=>Object.values(tn[U]||{}).some(ot=>ot>0));if(en.length===0)return;const or=en[0],ar=en[en.length-1],rn=Et.filter(U=>U>=or&&U<=ar),on=yn.getBoundingClientRect(),$t={top:24,right:60,bottom:80,left:120},Vt=on.width-$t.left-$t.right,vn=on.height-$t.top-$t.bottom,sr=ut(yn).append("svg").attr("width",on.width).attr("height",on.height).style("border-radius","12px").style("filter","drop-shadow(0 2px 8px rgba(0,0,0,0.06))"),J=sr.append("g").attr("transform",`translate(${$t.left},${$t.top})`);sr.append("text").attr("x",$t.left+Vt/2).attr("y",Math.max(16,$t.top-6)).style("text-anchor","middle").style("font-size","14px").style("font-weight","600").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#334155").text("Policy Timeline by Type");const it=ai().domain(rn.map(String)).range([0,Vt]).padding(.06),Gt={};Array.from(nn).forEach(U=>{Gt[U]=0}),rn.forEach(U=>{Array.from(nn).forEach(ot=>{tn[U][ot]&&(Gt[ot]+=1)})});const wn=Array.from(nn).sort((U,ot)=>Gt[U]-Gt[ot]),Lt=ai().domain(wn).range([0,vn]).padding(.1),Cn=J.append("g");Cn.selectAll(".hline").data(wn).enter().append("line").attr("class","hline").attr("x1",0).attr("x2",Vt).attr("y1",U=>(Lt(U)||0)+Lt.bandwidth()).attr("y2",U=>(Lt(U)||0)+Lt.bandwidth()).style("stroke","#e2e8f0").style("stroke-dasharray","2,2").style("opacity",.2),Cn.selectAll(".vline").data(rn).enter().append("line").attr("class","vline").attr("y1",0).attr("y2",vn).attr("x1",U=>(it(String(U))||0)+it.bandwidth()).attr("x2",U=>(it(String(U))||0)+it.bandwidth()).style("stroke","#e2e8f0").style("stroke-dasharray","2,2").style("opacity",.08);const Ni=[];rn.forEach(U=>{wn.forEach(ot=>{tn[U][ot]&&Ni.push({year:U,measure:ot})})}),J.selectAll(".policy-cell").data(Ni).enter().append("rect").attr("class","policy-cell").attr("x",U=>it(String(U.year))||0).attr("y",U=>Lt(U.measure)||0).attr("width",it.bandwidth()).attr("height",Lt.bandwidth()).attr("rx",3).attr("ry",3).attr("fill",U=>d(U.measure)).style("opacity",.95).on("click",function(U,ot){const Jt=ot.measure,Ut=Number(ot.year),st=n.filter(At=>{const Pt=At.country,Qt=At.measure||"Unknown",xn=Number(At.year);return!i(At)||a[Pt||""]!==x||Qt!==Jt||!Number.isFinite(xn)||xn>Ut?!1:!(b[x]&&b[x][Jt]||[]).some(In=>In.type==="deactivate"&&In.year>xn&&In.year<=Ut)});gt(Jt,Ut,st)}).on("mouseover",function(){ut(this).style("opacity",1)}).on("mouseout",function(){ut(this).style("opacity",.95)});const ur=it.domain(),Oa=ur.length>24?3:ur.length>14?2:1,Ha=ur.filter((U,ot)=>ot%Oa===0),ki=J.append("g").attr("transform",`translate(0, ${vn})`).call(is(it).tickValues(Ha).tickSize(0)),Ya=Vt<=420?"9px":Vt<=560?"10px":"12px";ki.selectAll("text").style("font-size",Ya).style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569").style("text-anchor","middle").attr("dx","0").attr("dy","0"),ki.select(".domain").style("stroke","#e2e8f0").style("stroke-width",1);const Ri=J.append("g").call(os(Lt).tickSize(0).tickFormat(U=>H(String(U))));Ri.selectAll("text").style("font-size","12px").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569"),Ri.select(".domain").style("stroke","#e2e8f0").style("stroke-width",1),J.append("text").attr("transform",`translate(${Vt/2}, ${vn+$t.bottom-5})`).style("text-anchor","middle").style("font-size","12px").style("font-weight","600").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569").text("Year")}})}Me.selectAll("path").data(t.features).enter().append("path").attr("d",Ro).attr("fill",x=>at(x.id)).attr("class","country").on("mouseover",function(x,k){ut(this).style("stroke","black").style("stroke-width",1.5);const R=k.id,C=k.properties.name;Er.style("visibility","visible").html(dt(R,C))}).on("mousemove",function(x){Er.style("top",x.pageY-10+"px").style("left",x.pageX+10+"px")}).on("mouseout",function(){ut(this).style("stroke",null).style("stroke-width",null),Er.style("visibility","hidden")}).on("click",function(x,k){const R=k.id,C=k.properties.name;Ba(R,C)}),(Ai=document.getElementById("close-panel"))==null||Ai.addEventListener("click",()=>{var x,k;(x=document.getElementById("policy-panel"))==null||x.classList.remove("visible"),(k=document.getElementById("panel-backdrop"))==null||k.classList.remove("visible")}),(Ti=document.getElementById("panel-backdrop"))==null||Ti.addEventListener("click",()=>{var x,k;(x=document.getElementById("policy-panel"))==null||x.classList.remove("visible"),(k=document.getElementById("panel-backdrop"))==null||k.classList.remove("visible")}),Me.selectAll("text.country-label").data(t.features).enter().append("text").attr("class","country-label").attr("transform",x=>{let k;if(x.geometry.type==="Polygon"){const R=No(x.geometry.coordinates);k=[R[0],R[1]]}else if(x.geometry.type==="MultiPolygon"){let R=x.geometry.coordinates[0],C=0;x.geometry.coordinates.forEach(q=>{const V=gf({type:"Polygon",coordinates:q});V>C&&(C=V,R=q)});const H=No(R);k=[H[0],H[1]]}else{const R=Ro.centroid(x);k=[R[0],R[1]]}return isNaN(k[0])||isNaN(k[1])?"translate(-9999, -9999)":`translate(${Un(k)})`}).attr("text-anchor","middle").attr("font-size","2px").attr("fill","black").style("pointer-events","none").text(x=>Ia[x.id]||"");const bi=300,tr=20,nr=Nt.append("g").attr("class","legend").attr("transform",`translate(20, ${hn-50})`),Da=Nt.append("defs").append("linearGradient").attr("id","gradient-color"),za=$r(0,1.01,.25).map(x=>({offset:`${x*100}%`,color:ge(x)}));Da.selectAll("stop").data(za).enter().append("stop").attr("offset",x=>x.offset).attr("stop-color",x=>x.color),nr.append("rect").attr("width",bi).attr("height",tr).style("fill","url(#gradient-color)"),nr.append("text").attr("x",0).attr("y",tr+20).style("font-size","12px").text(p),nr.append("text").attr("x",bi).attr("y",tr+20).style("text-anchor","end").style("font-size","12px").text(m);const Fa=[5,48],er=5,Si=Un(Fa);Nt.call(Ee.transform,qn.translate(En/2-Si[0]*er,hn/2-Si[1]*er).scale(er)),($i=document.getElementById("world-map-container"))==null||$i.classList.add("loaded"),document.querySelectorAll('input[name="mapType"]').forEach(x=>{x.addEventListener("change",k=>{const R=k.target;R.checked&&(bt=R.value,Wt())})});const rr=document.getElementById("mapTypeToggle"),Mi=document.querySelectorAll(".toggle-option");rr&&Mi.length>0&&Mi.forEach((x,k)=>{x.addEventListener("click",()=>{const C=["policies","ev","targets"][k];if(C==="targets")bt="targets",rr.setAttribute("data-active",C),Dh(),Wt();else{Pa(),rr.setAttribute("data-active",C);const H=document.querySelector(`input[name="mapType"][value="${C}"]`);H&&(H.checked=!0,bt=C,Wt())}})}),Wt(),Co();function Ei(){const x=document.getElementById("world-map-container"),k=document.getElementById("mapTypeToggle"),R=document.getElementById("targetsSubmenu");if(!x||!k)return;const C=x.getBoundingClientRect(),H=Math.round(C.width*.08),q=Math.max(220,Math.min(380,H)),V=Math.max(40,Math.min(72,Math.round(q*.17)));if(k.style.width=`${q}px`,k.style.height=`${V}px`,R){const pt=Math.max(380,q);R.style.width=`${pt}px`}}requestAnimationFrame(Ei),window.addEventListener("resize",Ei)}).catch(t=>{console.error("Error loading data:",t),Co()});
