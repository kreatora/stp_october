import"./input.js";function ve(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Qa(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Do(t){let n,e,r;t.length!==2?(n=ve,e=(s,f)=>ve(t(s),f),r=(s,f)=>t(s)-f):(n=t===ve||t===Qa?t:ja,e=t,r=t);function i(s,f,u=0,l=s.length){if(u<l){if(n(f,f)!==0)return l;do{const c=u+l>>>1;e(s[c],f)<0?u=c+1:l=c}while(u<l)}return u}function o(s,f,u=0,l=s.length){if(u<l){if(n(f,f)!==0)return l;do{const c=u+l>>>1;e(s[c],f)<=0?u=c+1:l=c}while(u<l)}return u}function a(s,f,u=0,l=s.length){const c=i(s,f,u,l-1);return c>u&&r(s[c-1],f)>-r(s[c],f)?c-1:c}return{left:i,center:a,right:o}}function ja(){return 0}function ts(t){return t===null?NaN:+t}const ns=Do(ve),es=ns.right;Do(ts).center;class Bt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(e[r++]=s),n=a}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,a=0;if(e>0){for(a=n[--e];e>0&&(r=a,i=n[--e],a=r+i,o=i-(a-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Pi extends Map{constructor(n,e=os){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Li(this,n))}has(n){return super.has(Li(this,n))}set(n,e){return super.set(rs(this,n),e)}delete(n){return super.delete(is(this,n))}}function Li({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function rs({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function is({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function os(t){return t!==null&&typeof t=="object"?t.valueOf():t}const as=Math.sqrt(50),ss=Math.sqrt(10),us=Math.sqrt(2);function $e(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=as?10:o>=ss?5:o>=us?2:1;let s,f,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),f=Math.round(n*u),s/u<t&&++s,f/u>n&&--f,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),f=Math.round(n/u),s*u<t&&++s,f*u>n&&--f),f<s&&.5<=e&&e<2?$e(t,n,e*2):[s,f,u]}function ls(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?$e(n,t,e):$e(t,n,e);if(!(o>=i))return[];const s=o-i+1,f=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)f[u]=(o-u)/-a;else for(let u=0;u<s;++u)f[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)f[u]=(i+u)/-a;else for(let u=0;u<s;++u)f[u]=(i+u)*a;return f}function $r(t,n,e){return n=+n,t=+t,e=+e,$e(t,n,e)[2]}function cs(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?$r(n,t,e):$r(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function lr(t,n){let e;for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);return e}function cr(t,n){let e;for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);return e}function*fs(t){for(const n of t)yield*n}function Fo(t){return Array.from(fs(t))}function Nr(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}function hs(t){return t}var fr=1,hr=2,Tr=3,Bn=4,Bi=1e-6;function ds(t){return"translate("+t+",0)"}function ps(t){return"translate(0,"+t+")"}function gs(t){return n=>+t(n)}function ms(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function ys(){return!this.__axis}function Oo(t,n){var e=[],r=null,i=null,o=6,a=6,s=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===fr||t===Bn?-1:1,l=t===Bn||t===hr?"x":"y",c=t===fr||t===Tr?ds:ps;function h(d){var g=r??(n.ticks?n.ticks.apply(n,e):n.domain()),w=i??(n.tickFormat?n.tickFormat.apply(n,e):hs),M=Math.max(o,0)+s,y=n.range(),_=+y[0]+f,b=+y[y.length-1]+f,S=(n.bandwidth?ms:gs)(n.copy(),f),A=d.selection?d.selection():d,T=A.selectAll(".domain").data([null]),B=A.selectAll(".tick").data(g,n).order(),P=B.exit(),D=B.enter().append("g").attr("class","tick"),z=B.select("line"),E=B.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(D),z=z.merge(D.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),E=E.merge(D.append("text").attr("fill","currentColor").attr(l,u*M).attr("dy",t===fr?"0em":t===Tr?"0.71em":"0.32em")),d!==A&&(T=T.transition(d),B=B.transition(d),z=z.transition(d),E=E.transition(d),P=P.transition(d).attr("opacity",Bi).attr("transform",function(O){return isFinite(O=S(O))?c(O+f):this.getAttribute("transform")}),D.attr("opacity",Bi).attr("transform",function(O){var N=this.parentNode.__axis;return c((N&&isFinite(N=N(O))?N:S(O))+f)})),P.remove(),T.attr("d",t===Bn||t===hr?a?"M"+u*a+","+_+"H"+f+"V"+b+"H"+u*a:"M"+f+","+_+"V"+b:a?"M"+_+","+u*a+"V"+f+"H"+b+"V"+u*a:"M"+_+","+f+"H"+b),B.attr("opacity",1).attr("transform",function(O){return c(S(O)+f)}),z.attr(l+"2",u*o),E.attr(l,u*M).text(w),A.filter(ys).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===hr?"start":t===Bn?"end":"middle"),A.each(function(){this.__axis=S})}return h.scale=function(d){return arguments.length?(n=d,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),h):e.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(o=a=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(f=+d,h):f},h}function vs(t){return Oo(Tr,t)}function ws(t){return Oo(Bn,t)}var xs={value:()=>{}};function ui(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new we(e)}function we(t){this._=t}function _s(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}we.prototype=ui.prototype={constructor:we,on:function(t,n){var e=this._,r=_s(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=bs(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=zi(e[i],t.name,n);else if(n==null)for(i in e)e[i]=zi(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new we(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function bs(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function zi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=xs,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var kr="http://www.w3.org/1999/xhtml";const Di={svg:"http://www.w3.org/2000/svg",xhtml:kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Je(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Di.hasOwnProperty(n)?{space:Di[n],local:t}:t}function Ms(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===kr&&n.documentElement.namespaceURI===kr?n.createElement(t):n.createElementNS(e,t)}}function Ss(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ho(t){var n=Je(t);return(n.local?Ss:Ms)(n)}function Es(){}function li(t){return t==null?Es:function(){return this.querySelector(t)}}function As(t){typeof t!="function"&&(t=li(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),f,u,l=0;l<a;++l)(f=o[l])&&(u=t.call(f,f.__data__,l,o))&&("__data__"in f&&(u.__data__=f.__data__),s[l]=u);return new $t(r,this._parents)}function $s(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ns(){return[]}function Yo(t){return t==null?Ns:function(){return this.querySelectorAll(t)}}function Ts(t){return function(){return $s(t.apply(this,arguments))}}function ks(t){typeof t=="function"?t=Ts(t):t=Yo(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,f,u=0;u<s;++u)(f=a[u])&&(r.push(t.call(f,f.__data__,u,a)),i.push(f));return new $t(r,i)}function Uo(t){return function(){return this.matches(t)}}function Vo(t){return function(n){return n.matches(t)}}var Rs=Array.prototype.find;function Cs(t){return function(){return Rs.call(this.children,t)}}function Is(){return this.firstElementChild}function Ps(t){return this.select(t==null?Is:Cs(typeof t=="function"?t:Vo(t)))}var Ls=Array.prototype.filter;function Bs(){return Array.from(this.children)}function zs(t){return function(){return Ls.call(this.children,t)}}function Ds(t){return this.selectAll(t==null?Bs:zs(typeof t=="function"?t:Vo(t)))}function Fs(t){typeof t!="function"&&(t=Uo(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],f,u=0;u<a;++u)(f=o[u])&&t.call(f,f.__data__,u,o)&&s.push(f);return new $t(r,this._parents)}function Go(t){return new Array(t.length)}function Os(){return new $t(this._enter||this._groups.map(Go),this._parents)}function Ne(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Ne.prototype={constructor:Ne,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Hs(t){return function(){return t}}function Ys(t,n,e,r,i,o){for(var a=0,s,f=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new Ne(t,o[a]);for(;a<f;++a)(s=n[a])&&(i[a]=s)}function Us(t,n,e,r,i,o,a){var s,f,u=new Map,l=n.length,c=o.length,h=new Array(l),d;for(s=0;s<l;++s)(f=n[s])&&(h[s]=d=a.call(f,f.__data__,s,n)+"",u.has(d)?i[s]=f:u.set(d,f));for(s=0;s<c;++s)d=a.call(t,o[s],s,o)+"",(f=u.get(d))?(r[s]=f,f.__data__=o[s],u.delete(d)):e[s]=new Ne(t,o[s]);for(s=0;s<l;++s)(f=n[s])&&u.get(h[s])===f&&(i[s]=f)}function Vs(t){return t.__data__}function Gs(t,n){if(!arguments.length)return Array.from(this,Vs);var e=n?Us:Ys,r=this._parents,i=this._groups;typeof t!="function"&&(t=Hs(t));for(var o=i.length,a=new Array(o),s=new Array(o),f=new Array(o),u=0;u<o;++u){var l=r[u],c=i[u],h=c.length,d=Ks(t.call(l,l&&l.__data__,u,r)),g=d.length,w=s[u]=new Array(g),M=a[u]=new Array(g),y=f[u]=new Array(h);e(l,c,w,M,y,d,n);for(var _=0,b=0,S,A;_<g;++_)if(S=w[_]){for(_>=b&&(b=_+1);!(A=M[b])&&++b<g;);S._next=A||null}}return a=new $t(a,r),a._enter=s,a._exit=f,a}function Ks(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qs(){return new $t(this._exit||this._groups.map(Go),this._parents)}function Xs(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Zs(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),f=0;f<a;++f)for(var u=e[f],l=r[f],c=u.length,h=s[f]=new Array(c),d,g=0;g<c;++g)(d=u[g]||l[g])&&(h[g]=d);for(;f<i;++f)s[f]=e[f];return new $t(s,this._parents)}function Ws(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Js(t){t||(t=Qs);function n(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,f=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(f[l]=u);f.sort(n)}return new $t(i,this._parents).order()}function Qs(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function js(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function tu(){return Array.from(this)}function nu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function eu(){let t=0;for(const n of this)++t;return t}function ru(){return!this.node()}function iu(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function ou(t){return function(){this.removeAttribute(t)}}function au(t){return function(){this.removeAttributeNS(t.space,t.local)}}function su(t,n){return function(){this.setAttribute(t,n)}}function uu(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function lu(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function cu(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function fu(t,n){var e=Je(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?au:ou:typeof n=="function"?e.local?cu:lu:e.local?uu:su)(e,n))}function Ko(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function hu(t){return function(){this.style.removeProperty(t)}}function du(t,n,e){return function(){this.style.setProperty(t,n,e)}}function pu(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function gu(t,n,e){return arguments.length>1?this.each((n==null?hu:typeof n=="function"?pu:du)(t,n,e??"")):En(this.node(),t)}function En(t,n){return t.style.getPropertyValue(n)||Ko(t).getComputedStyle(t,null).getPropertyValue(n)}function mu(t){return function(){delete this[t]}}function yu(t,n){return function(){this[t]=n}}function vu(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function wu(t,n){return arguments.length>1?this.each((n==null?mu:typeof n=="function"?vu:yu)(t,n)):this.node()[t]}function qo(t){return t.trim().split(/^|\s+/)}function ci(t){return t.classList||new Xo(t)}function Xo(t){this._node=t,this._names=qo(t.getAttribute("class")||"")}Xo.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Zo(t,n){for(var e=ci(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Wo(t,n){for(var e=ci(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function xu(t){return function(){Zo(this,t)}}function _u(t){return function(){Wo(this,t)}}function bu(t,n){return function(){(n.apply(this,arguments)?Zo:Wo)(this,t)}}function Mu(t,n){var e=qo(t+"");if(arguments.length<2){for(var r=ci(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?bu:n?xu:_u)(e,n))}function Su(){this.textContent=""}function Eu(t){return function(){this.textContent=t}}function Au(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function $u(t){return arguments.length?this.each(t==null?Su:(typeof t=="function"?Au:Eu)(t)):this.node().textContent}function Nu(){this.innerHTML=""}function Tu(t){return function(){this.innerHTML=t}}function ku(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Ru(t){return arguments.length?this.each(t==null?Nu:(typeof t=="function"?ku:Tu)(t)):this.node().innerHTML}function Cu(){this.nextSibling&&this.parentNode.appendChild(this)}function Iu(){return this.each(Cu)}function Pu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lu(){return this.each(Pu)}function Bu(t){var n=typeof t=="function"?t:Ho(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function zu(){return null}function Du(t,n){var e=typeof t=="function"?t:Ho(t),r=n==null?zu:typeof n=="function"?n:li(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Fu(){var t=this.parentNode;t&&t.removeChild(this)}function Ou(){return this.each(Fu)}function Hu(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Yu(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Uu(t){return this.select(t?Yu:Hu)}function Vu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Gu(t){return function(n){t.call(this,n,this.__data__)}}function Ku(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function qu(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Xu(t,n,e){return function(){var r=this.__on,i,o=Gu(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function Zu(t,n,e){var r=Ku(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,u=s.length,l;f<u;++f)for(i=0,l=s[f];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=n?Xu:qu,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function Jo(t,n,e){var r=Ko(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Wu(t,n){return function(){return Jo(this,t,n)}}function Ju(t,n){return function(){return Jo(this,t,n.apply(this,arguments))}}function Qu(t,n){return this.each((typeof n=="function"?Ju:Wu)(t,n))}function*ju(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Qo=[null];function $t(t,n){this._groups=t,this._parents=n}function te(){return new $t([[document.documentElement]],Qo)}function tl(){return this}$t.prototype=te.prototype={constructor:$t,select:As,selectAll:ks,selectChild:Ps,selectChildren:Ds,filter:Fs,data:Gs,enter:Os,exit:qs,join:Xs,merge:Zs,selection:tl,order:Ws,sort:Js,call:js,nodes:tu,node:nu,size:eu,empty:ru,each:iu,attr:fu,style:gu,property:wu,classed:Mu,text:$u,html:Ru,raise:Iu,lower:Lu,append:Bu,insert:Du,remove:Ou,clone:Uu,datum:Vu,on:Zu,dispatch:Qu,[Symbol.iterator]:ju};function at(t){return typeof t=="string"?new $t([[document.querySelector(t)]],[document.documentElement]):new $t([[t]],Qo)}function nl(t){let n;for(;n=t.sourceEvent;)t=n;return t}function an(t,n){if(t=nl(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const Rr={capture:!0,passive:!1};function Cr(t){t.preventDefault(),t.stopImmediatePropagation()}function el(t){var n=t.document.documentElement,e=at(t).on("dragstart.drag",Cr,Rr);"onselectstart"in n?e.on("selectstart.drag",Cr,Rr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function rl(t,n){var e=t.document.documentElement,r=at(t).on("dragstart.drag",null);n&&(r.on("click.drag",Cr,Rr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function fi(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function jo(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ne(){}var Kn=.7,Te=1/Kn,Mn="\\s*([+-]?\\d+)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",il=/^#([0-9a-f]{3,8})$/,ol=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),al=new RegExp(`^rgb\\(${Ut},${Ut},${Ut}\\)$`),sl=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${qn}\\)$`),ul=new RegExp(`^rgba\\(${Ut},${Ut},${Ut},${qn}\\)$`),ll=new RegExp(`^hsl\\(${qn},${Ut},${Ut}\\)$`),cl=new RegExp(`^hsla\\(${qn},${Ut},${Ut},${qn}\\)$`),Fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fi(ne,Zt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Oi,formatHex:Oi,formatHex8:fl,formatHsl:hl,formatRgb:Hi,toString:Hi});function Oi(){return this.rgb().formatHex()}function fl(){return this.rgb().formatHex8()}function hl(){return ta(this).formatHsl()}function Hi(){return this.rgb().formatRgb()}function Zt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=il.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Yi(n):e===3?new bt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ae(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ae(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ol.exec(t))?new bt(n[1],n[2],n[3],1):(n=al.exec(t))?new bt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=sl.exec(t))?ae(n[1],n[2],n[3],n[4]):(n=ul.exec(t))?ae(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=ll.exec(t))?Gi(n[1],n[2]/100,n[3]/100,1):(n=cl.exec(t))?Gi(n[1],n[2]/100,n[3]/100,n[4]):Fi.hasOwnProperty(t)?Yi(Fi[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function Yi(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function ae(t,n,e,r){return r<=0&&(t=n=e=NaN),new bt(t,n,e,r)}function dl(t){return t instanceof ne||(t=Zt(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function ke(t,n,e,r){return arguments.length===1?dl(t):new bt(t,n,e,r??1)}function bt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}fi(bt,ke,jo(ne,{brighter(t){return t=t==null?Te:Math.pow(Te,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Kn:Math.pow(Kn,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bt(hn(this.r),hn(this.g),hn(this.b),Re(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ui,formatHex:Ui,formatHex8:pl,formatRgb:Vi,toString:Vi}));function Ui(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}`}function pl(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}${cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vi(){const t=Re(this.opacity);return`${t===1?"rgb(":"rgba("}${hn(this.r)}, ${hn(this.g)}, ${hn(this.b)}${t===1?")":`, ${t})`}`}function Re(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cn(t){return t=hn(t),(t<16?"0":"")+t.toString(16)}function Gi(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Lt(t,n,e,r)}function ta(t){if(t instanceof Lt)return new Lt(t.h,t.s,t.l,t.opacity);if(t instanceof ne||(t=Zt(t)),!t)return new Lt;if(t instanceof Lt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,f=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new Lt(a,s,f,t.opacity)}function Ir(t,n,e,r){return arguments.length===1?ta(t):new Lt(t,n,e,r??1)}function Lt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}fi(Lt,Ir,jo(ne,{brighter(t){return t=t==null?Te:Math.pow(Te,t),new Lt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Kn:Math.pow(Kn,t),new Lt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new bt(dr(t>=240?t-240:t+120,i,r),dr(t,i,r),dr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Lt(Ki(this.h),se(this.s),se(this.l),Re(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Re(this.opacity);return`${t===1?"hsl(":"hsla("}${Ki(this.h)}, ${se(this.s)*100}%, ${se(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ki(t){return t=(t||0)%360,t<0?t+360:t}function se(t){return Math.max(0,Math.min(1,t||0))}function dr(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function gl(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function ml(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<n-1?t[r+2]:2*o-i;return gl((e-r/n)*n,a,i,o,s)}}const hi=t=>()=>t;function yl(t,n){return function(e){return t+e*n}}function vl(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function wl(t){return(t=+t)==1?na:function(n,e){return e-n?vl(n,e,t):hi(isNaN(n)?e:n)}}function na(t,n){var e=n-t;return e?yl(t,e):hi(isNaN(t)?n:t)}const Ce=function t(n){var e=wl(n);function r(i,o){var a=e((i=ke(i)).r,(o=ke(o)).r),s=e(i.g,o.g),f=e(i.b,o.b),u=na(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=f(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function xl(t){return function(n){var e=n.length,r=new Array(e),i=new Array(e),o=new Array(e),a,s;for(a=0;a<e;++a)s=ke(n[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(f){return s.r=r(f),s.g=i(f),s.b=o(f),s+""}}}var _l=xl(ml);function bl(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function Ml(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sl(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=Qe(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function El(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Pt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Al(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=Qe(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var Pr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pr=new RegExp(Pr.source,"g");function $l(t){return function(){return t}}function Nl(t){return function(n){return t(n)+""}}function ea(t,n){var e=Pr.lastIndex=pr.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",n=n+"";(r=Pr.exec(t))&&(i=pr.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:Pt(r,i)})),e=pr.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?Nl(f[0].x):$l(n):(n=f.length,function(u){for(var l=0,c;l<n;++l)s[(c=f[l]).i]=c.x(u);return s.join("")})}function Qe(t,n){var e=typeof n,r;return n==null||e==="boolean"?hi(n):(e==="number"?Pt:e==="string"?(r=Zt(n))?(n=r,Ce):ea:n instanceof Zt?Ce:n instanceof Date?El:Ml(n)?bl:Array.isArray(n)?Sl:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Al:Pt)(t,n)}function ra(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var qi=180/Math.PI,Lr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ia(t,n,e,r,i,o){var a,s,f;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,f/=s),t*r<n*e&&(t=-t,n=-n,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*qi,skewX:Math.atan(f)*qi,scaleX:a,scaleY:s}}var ue;function Tl(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Lr:ia(n.a,n.b,n.c,n.d,n.e,n.f)}function kl(t){return t==null||(ue||(ue=document.createElementNS("http://www.w3.org/2000/svg","g")),ue.setAttribute("transform",t),!(t=ue.transform.baseVal.consolidate()))?Lr:(t=t.matrix,ia(t.a,t.b,t.c,t.d,t.e,t.f))}function oa(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,c,h,d,g){if(u!==c||l!==h){var w=d.push("translate(",null,n,null,e);g.push({i:w-4,x:Pt(u,c)},{i:w-2,x:Pt(l,h)})}else(c||h)&&d.push("translate("+c+n+h+e)}function a(u,l,c,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Pt(u,l)})):l&&c.push(i(c)+"rotate("+l+r)}function s(u,l,c,h){u!==l?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Pt(u,l)}):l&&c.push(i(c)+"skewX("+l+r)}function f(u,l,c,h,d,g){if(u!==c||l!==h){var w=d.push(i(d)+"scale(",null,",",null,")");g.push({i:w-4,x:Pt(u,c)},{i:w-2,x:Pt(l,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(u,l){var c=[],h=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,c,h),a(u.rotate,l.rotate,c,h),s(u.skewX,l.skewX,c,h),f(u.scaleX,u.scaleY,l.scaleX,l.scaleY,c,h),u=l=null,function(d){for(var g=-1,w=h.length,M;++g<w;)c[(M=h[g]).i]=M.x(d);return c.join("")}}}var Rl=oa(Tl,"px, ","px)","deg)"),Cl=oa(kl,", ",")",")"),Il=1e-12;function Xi(t){return((t=Math.exp(t))+1/t)/2}function Pl(t){return((t=Math.exp(t))-1/t)/2}function Ll(t){return((t=Math.exp(2*t))-1)/(t+1)}const Bl=function t(n,e,r){function i(o,a){var s=o[0],f=o[1],u=o[2],l=a[0],c=a[1],h=a[2],d=l-s,g=c-f,w=d*d+g*g,M,y;if(w<Il)y=Math.log(h/u)/n,M=function(B){return[s+B*d,f+B*g,u*Math.exp(n*B*y)]};else{var _=Math.sqrt(w),b=(h*h-u*u+r*w)/(2*u*e*_),S=(h*h-u*u-r*w)/(2*h*e*_),A=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(S*S+1)-S);y=(T-A)/n,M=function(B){var P=B*y,D=Xi(A),z=u/(e*_)*(D*Ll(n*P+A)-Pl(A));return[s+z*d,f+z*g,u*D/Xi(n*P+A)]}}return M.duration=y*1e3*n/Math.SQRT2,M}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,f=s*s;return t(a,s,f)},i}(Math.SQRT2,2,4);var An=0,zn=0,In=0,aa=1e3,Ie,Dn,Pe=0,dn=0,je=0,Xn=typeof performance=="object"&&performance.now?performance:Date,sa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function di(){return dn||(sa(zl),dn=Xn.now()+je)}function zl(){dn=0}function Le(){this._call=this._time=this._next=null}Le.prototype=ua.prototype={constructor:Le,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?di():+e)+(n==null?0:+n),!this._next&&Dn!==this&&(Dn?Dn._next=this:Ie=this,Dn=this),this._call=t,this._time=e,Br()},stop:function(){this._call&&(this._call=null,this._time=1/0,Br())}};function ua(t,n,e){var r=new Le;return r.restart(t,n,e),r}function Dl(){di(),++An;for(var t=Ie,n;t;)(n=dn-t._time)>=0&&t._call.call(void 0,n),t=t._next;--An}function Zi(){dn=(Pe=Xn.now())+je,An=zn=0;try{Dl()}finally{An=0,Ol(),dn=0}}function Fl(){var t=Xn.now(),n=t-Pe;n>aa&&(je-=n,Pe=t)}function Ol(){for(var t,n=Ie,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ie=e);Dn=t,Br(r)}function Br(t){if(!An){zn&&(zn=clearTimeout(zn));var n=t-dn;n>24?(t<1/0&&(zn=setTimeout(Zi,t-Xn.now()-je)),In&&(In=clearInterval(In))):(In||(Pe=Xn.now(),In=setInterval(Fl,aa)),An=1,sa(Zi))}}function Wi(t,n,e){var r=new Le;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var Hl=ui("start","end","cancel","interrupt"),Yl=[],la=0,Ji=1,zr=2,xe=3,Qi=4,Dr=5,_e=6;function tr(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Ul(t,e,{name:n,index:r,group:i,on:Hl,tween:Yl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:la})}function pi(t,n){var e=zt(t,n);if(e.state>la)throw new Error("too late; already scheduled");return e}function Vt(t,n){var e=zt(t,n);if(e.state>xe)throw new Error("too late; already running");return e}function zt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Ul(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=ua(o,0,e.time);function o(u){e.state=Ji,e.timer.restart(a,e.delay,e.time),e.delay<=u&&a(u-e.delay)}function a(u){var l,c,h,d;if(e.state!==Ji)return f();for(l in r)if(d=r[l],d.name===e.name){if(d.state===xe)return Wi(a);d.state===Qi?(d.state=_e,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<n&&(d.state=_e,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(Wi(function(){e.state===xe&&(e.state=Qi,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=zr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===zr){for(e.state=xe,i=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(d=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(i[++c]=d);i.length=c+1}}function s(u){for(var l=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(f),e.state=Dr,1),c=-1,h=i.length;++c<h;)i[c].call(t,l);e.state===Dr&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){e.state=_e,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function be(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>zr&&r.state<Dr,r.state=_e,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function Vl(t){return this.each(function(){be(this,t)})}function Gl(t,n){var e,r;return function(){var i=Vt(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Kl(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=Vt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},f=0,u=i.length;f<u;++f)if(i[f].name===n){i[f]=s;break}f===u&&i.push(s)}o.tween=i}}function ql(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=zt(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?Gl:Kl)(e,t,n))}function gi(t,n,e){var r=t._id;return t.each(function(){var i=Vt(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return zt(i,r).value[n]}}function ca(t,n){var e;return(typeof n=="number"?Pt:n instanceof Zt?Ce:(e=Zt(n))?(n=e,Ce):ea)(t,n)}function Xl(t){return function(){this.removeAttribute(t)}}function Zl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wl(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function Jl(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function Ql(t,n,e){var r,i,o;return function(){var a,s=e(this),f;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=n(r=a,s)))}}function jl(t,n,e){var r,i,o;return function(){var a,s=e(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=n(r=a,s)))}}function tc(t,n){var e=Je(t),r=e==="transform"?Cl:ca;return this.attrTween(t,typeof n=="function"?(e.local?jl:Ql)(e,r,gi(this,"attr."+t,n)):n==null?(e.local?Zl:Xl)(e):(e.local?Jl:Wl)(e,r,n))}function nc(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ec(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function rc(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ec(t,o)),e}return i._value=n,i}function ic(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&nc(t,o)),e}return i._value=n,i}function oc(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Je(t);return this.tween(e,(r.local?rc:ic)(r,n))}function ac(t,n){return function(){pi(this,t).delay=+n.apply(this,arguments)}}function sc(t,n){return n=+n,function(){pi(this,t).delay=n}}function uc(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?ac:sc)(n,t)):zt(this.node(),n).delay}function lc(t,n){return function(){Vt(this,t).duration=+n.apply(this,arguments)}}function cc(t,n){return n=+n,function(){Vt(this,t).duration=n}}function fc(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?lc:cc)(n,t)):zt(this.node(),n).duration}function hc(t,n){if(typeof n!="function")throw new Error;return function(){Vt(this,t).ease=n}}function dc(t){var n=this._id;return arguments.length?this.each(hc(n,t)):zt(this.node(),n).ease}function pc(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Vt(this,t).ease=e}}function gc(t){if(typeof t!="function")throw new Error;return this.each(pc(this._id,t))}function mc(t){typeof t!="function"&&(t=Uo(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],f,u=0;u<a;++u)(f=o[u])&&t.call(f,f.__data__,u,o)&&s.push(f);return new Wt(r,this._parents,this._name,this._id)}function yc(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var f=n[s],u=e[s],l=f.length,c=a[s]=new Array(l),h,d=0;d<l;++d)(h=f[d]||u[d])&&(c[d]=h);for(;s<r;++s)a[s]=n[s];return new Wt(a,this._parents,this._name,this._id)}function vc(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function wc(t,n,e){var r,i,o=vc(n)?pi:Vt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function xc(t,n){var e=this._id;return arguments.length<2?zt(this.node(),e).on.on(t):this.each(wc(e,t,n))}function _c(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function bc(){return this.on("end.remove",_c(this._id))}function Mc(t){var n=this._name,e=this._id;typeof t!="function"&&(t=li(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],f=s.length,u=o[a]=new Array(f),l,c,h=0;h<f;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c,tr(u[h],n,e,h,u,zt(l,e)));return new Wt(o,this._parents,n,e)}function Sc(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Yo(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var f=r[s],u=f.length,l,c=0;c<u;++c)if(l=f[c]){for(var h=t.call(l,l.__data__,c,f),d,g=zt(l,e),w=0,M=h.length;w<M;++w)(d=h[w])&&tr(d,n,e,w,h,g);o.push(h),a.push(l)}return new Wt(o,a,n,e)}var Ec=te.prototype.constructor;function Ac(){return new Ec(this._groups,this._parents)}function $c(t,n){var e,r,i;return function(){var o=En(this,t),a=(this.style.removeProperty(t),En(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function fa(t){return function(){this.style.removeProperty(t)}}function Nc(t,n,e){var r,i=e+"",o;return function(){var a=En(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function Tc(t,n,e){var r,i,o;return function(){var a=En(this,t),s=e(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),En(this,t))),a===f?null:a===r&&f===i?o:(i=f,o=n(r=a,s))}}function kc(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var f=Vt(this,t),u=f.on,l=f.value[o]==null?s||(s=fa(n)):void 0;(u!==e||i!==l)&&(r=(e=u).copy()).on(a,i=l),f.on=r}}function Rc(t,n,e){var r=(t+="")=="transform"?Rl:ca;return n==null?this.styleTween(t,$c(t,r)).on("end.style."+t,fa(t)):typeof n=="function"?this.styleTween(t,Tc(t,r,gi(this,"style."+t,n))).each(kc(this._id,t)):this.styleTween(t,Nc(t,r,n),e).on("end.style."+t,null)}function Cc(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Ic(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Cc(t,a,e)),r}return o._value=n,o}function Pc(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Ic(t,n,e??""))}function Lc(t){return function(){this.textContent=t}}function Bc(t){return function(){var n=t(this);this.textContent=n??""}}function zc(t){return this.tween("text",typeof t=="function"?Bc(gi(this,"text",t)):Lc(t==null?"":t+""))}function Dc(t){return function(n){this.textContent=t.call(this,n)}}function Fc(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Dc(i)),n}return r._value=t,r}function Oc(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Fc(t))}function Hc(){for(var t=this._name,n=this._id,e=ha(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,u=0;u<s;++u)if(f=a[u]){var l=zt(f,n);tr(f,t,e,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Wt(r,this._parents,t,e)}function Yc(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},f={value:function(){--i===0&&o()}};e.each(function(){var u=Vt(this,r),l=u.on;l!==t&&(n=(t=l).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(f)),u.on=n}),i===0&&o()})}var Uc=0;function Wt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ha(){return++Uc}var Kt=te.prototype;Wt.prototype={constructor:Wt,select:Mc,selectAll:Sc,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:mc,merge:yc,selection:Ac,transition:Hc,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:xc,attr:tc,attrTween:oc,style:Rc,styleTween:Pc,text:zc,textTween:Oc,remove:bc,tween:ql,delay:uc,duration:fc,ease:dc,easeVarying:gc,end:Yc,[Symbol.iterator]:Kt[Symbol.iterator]};function Vc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gc={time:null,delay:0,duration:250,ease:Vc};function Kc(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function qc(t){var n,e;t instanceof Wt?(n=t._id,t=t._name):(n=ha(),(e=Gc).time=di(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,u=0;u<s;++u)(f=a[u])&&tr(f,t,n,u,a,e||Kc(f,n));return new Wt(r,this._parents,t,n)}te.prototype.interrupt=Vl;te.prototype.transition=qc;const Fr=Math.PI,Or=2*Fr,un=1e-6,Xc=Or-un;function da(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Zc(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return da;const e=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class Wc{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?da:Zc(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,o,a){this._append`C${+n},${+e},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(n,e,r,i,o){if(n=+n,e=+e,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,f=r-n,u=i-e,l=a-n,c=s-e,h=l*l+c*c;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(h>un)if(!(Math.abs(c*f-u*l)>un)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let d=r-a,g=i-s,w=f*f+u*u,M=d*d+g*g,y=Math.sqrt(w),_=Math.sqrt(h),b=o*Math.tan((Fr-Math.acos((w+h-M)/(2*y*_)))/2),S=b/_,A=b/y;Math.abs(S-1)>un&&this._append`L${n+S*l},${e+S*c}`,this._append`A${o},${o},0,0,${+(c*d>l*g)},${this._x1=n+A*f},${this._y1=e+A*u}`}}arc(n,e,r,i,o,a){if(n=+n,e=+e,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),f=r*Math.sin(i),u=n+s,l=e+f,c=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>un||Math.abs(this._y1-l)>un)&&this._append`L${u},${l}`,r&&(h<0&&(h=h%Or+Or),h>Xc?this._append`A${r},${r},0,1,${c},${n-s},${e-f}A${r},${r},0,1,${c},${this._x1=u},${this._y1=l}`:h>un&&this._append`A${r},${r},0,${+(h>=Fr)},${c},${this._x1=n+r*Math.cos(o)},${this._y1=e+r*Math.sin(o)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var ji={},gr={},mr=34,Pn=10,yr=13;function pa(t){return new Function("d","return {"+t.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function Jc(t,n){var e=pa(t);return function(r,i){return n(e(r),i,t)}}function to(t){var n=Object.create(null),e=[];return t.forEach(function(r){for(var i in r)i in n||e.push(n[i]=i)}),e}function _t(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Qc(t){return t<0?"-"+_t(-t,6):t>9999?"+"+_t(t,6):_t(t,4)}function jc(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Qc(t.getUTCFullYear())+"-"+_t(t.getUTCMonth()+1,2)+"-"+_t(t.getUTCDate(),2)+(i?"T"+_t(n,2)+":"+_t(e,2)+":"+_t(r,2)+"."+_t(i,3)+"Z":r?"T"+_t(n,2)+":"+_t(e,2)+":"+_t(r,2)+"Z":e||n?"T"+_t(n,2)+":"+_t(e,2)+"Z":"")}function tf(t){var n=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function r(c,h){var d,g,w=i(c,function(M,y){if(d)return d(M,y-1);g=M,d=h?Jc(M,h):pa(M)});return w.columns=g||[],w}function i(c,h){var d=[],g=c.length,w=0,M=0,y,_=g<=0,b=!1;c.charCodeAt(g-1)===Pn&&--g,c.charCodeAt(g-1)===yr&&--g;function S(){if(_)return gr;if(b)return b=!1,ji;var T,B=w,P;if(c.charCodeAt(B)===mr){for(;w++<g&&c.charCodeAt(w)!==mr||c.charCodeAt(++w)===mr;);return(T=w)>=g?_=!0:(P=c.charCodeAt(w++))===Pn?b=!0:P===yr&&(b=!0,c.charCodeAt(w)===Pn&&++w),c.slice(B+1,T-1).replace(/""/g,'"')}for(;w<g;){if((P=c.charCodeAt(T=w++))===Pn)b=!0;else if(P===yr)b=!0,c.charCodeAt(w)===Pn&&++w;else if(P!==e)continue;return c.slice(B,T)}return _=!0,c.slice(B,g)}for(;(y=S())!==gr;){for(var A=[];y!==ji&&y!==gr;)A.push(y),y=S();h&&(A=h(A,M++))==null||d.push(A)}return d}function o(c,h){return c.map(function(d){return h.map(function(g){return l(d[g])}).join(t)})}function a(c,h){return h==null&&(h=to(c)),[h.map(l).join(t)].concat(o(c,h)).join(`
`)}function s(c,h){return h==null&&(h=to(c)),o(c,h).join(`
`)}function f(c){return c.map(u).join(`
`)}function u(c){return c.map(l).join(t)}function l(c){return c==null?"":c instanceof Date?jc(c):n.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:f,formatRow:u,formatValue:l}}var nf=tf(","),ef=nf.parse;function rf(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function of(t,n){return fetch(t,n).then(rf)}function af(t){return function(n,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),of(n,e).then(function(i){return t(i,r)})}}var no=af(ef);function sf(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function uf(t,n){return fetch(t,n).then(sf)}function lf(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Be(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function $n(t){return t=Be(Math.abs(t)),t?t[1]:NaN}function cf(t,n){return function(e,r){for(var i=e.length,o=[],a=0,s=t[0],f=0;i>0&&s>0&&(f+s+1>r&&(s=Math.max(1,r-f)),o.push(e.substring(i-=s,i+s)),!((f+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function ff(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var hf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ze(t){if(!(n=hf.exec(t)))throw new Error("invalid format: "+t);var n;return new mi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ze.prototype=mi.prototype;function mi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function df(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ga;function pf(t,n){var e=Be(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ga=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Be(t,Math.max(0,n+o-1))[0]}function eo(t,n){var e=Be(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ro={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lf,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>eo(t*100,n),r:eo,s:pf,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function io(t){return t}var oo=Array.prototype.map,ao=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gf(t){var n=t.grouping===void 0||t.thousands===void 0?io:cf(oo.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?io:ff(oo.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(c){c=ze(c);var h=c.fill,d=c.align,g=c.sign,w=c.symbol,M=c.zero,y=c.width,_=c.comma,b=c.precision,S=c.trim,A=c.type;A==="n"?(_=!0,A="g"):ro[A]||(b===void 0&&(b=12),S=!0,A="g"),(M||h==="0"&&d==="=")&&(M=!0,h="0",d="=");var T=w==="$"?e:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",B=w==="$"?r:/[%p]/.test(A)?a:"",P=ro[A],D=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function z(E){var O=T,N=B,p,m,v;if(A==="c")N=P(E)+N,E="";else{E=+E;var $=E<0||1/E<0;if(E=isNaN(E)?f:P(Math.abs(E),b),S&&(E=df(E)),$&&+E==0&&g!=="+"&&($=!1),O=($?g==="("?g:s:g==="-"||g==="("?"":g)+O,N=(A==="s"?ao[8+ga/3]:"")+N+($&&g==="("?")":""),D){for(p=-1,m=E.length;++p<m;)if(v=E.charCodeAt(p),48>v||v>57){N=(v===46?i+E.slice(p+1):E.slice(p))+N,E=E.slice(0,p);break}}}_&&!M&&(E=n(E,1/0));var I=O.length+E.length+N.length,L=I<y?new Array(y-I+1).join(h):"";switch(_&&M&&(E=n(L+E,L.length?y-N.length:1/0),L=""),d){case"<":E=O+E+N+L;break;case"=":E=O+L+E+N;break;case"^":E=L.slice(0,I=L.length>>1)+O+E+N+L.slice(I);break;default:E=L+O+E+N;break}return o(E)}return z.toString=function(){return c+""},z}function l(c,h){var d=u((c=ze(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor($n(h)/3)))*3,w=Math.pow(10,-g),M=ao[8+g/3];return function(y){return d(w*y)+M}}return{format:u,formatPrefix:l}}var le,ma,ya;mf({thousands:",",grouping:[3],currency:["$",""]});function mf(t){return le=gf(t),ma=le.format,ya=le.formatPrefix,le}function yf(t){return Math.max(0,-$n(Math.abs(t)))}function vf(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($n(n)/3)))*3-$n(Math.abs(t)))}function wf(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,$n(n)-$n(t))+1}var J=1e-6,K=Math.PI,Mt=K/2,De=K/4,yt=K*2,At=180/K,j=K/180,rt=Math.abs,va=Math.atan,Nn=Math.atan2,tt=Math.cos,xf=Math.exp,_f=Math.log,nt=Math.sin,bf=Math.sign||function(t){return t>0?1:t<0?-1:0},gn=Math.sqrt,Mf=Math.tan;function Sf(t){return t>1?0:t<-1?K:Math.acos(t)}function Zn(t){return t>1?Mt:t<-1?-Mt:Math.asin(t)}function dt(){}function Fe(t,n){t&&uo.hasOwnProperty(t.type)&&uo[t.type](t,n)}var so={Feature:function(t,n){Fe(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Fe(e[r].geometry,n)}},uo={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Hr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Hr(e[r],n,0)},Polygon:function(t,n){lo(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)lo(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Fe(e[r],n)}};function Hr(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function lo(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Hr(t[e],n,1);n.polygonEnd()}function ln(t,n){t&&so.hasOwnProperty(t.type)?so[t.type](t,n):Fe(t,n)}var Yr=new Bt,Oe=new Bt,wa,xa,Ur,Vr,Gr,Wn={point:dt,lineStart:dt,lineEnd:dt,polygonStart:function(){Yr=new Bt,Wn.lineStart=Ef,Wn.lineEnd=Af},polygonEnd:function(){var t=+Yr;Oe.add(t<0?yt+t:t),this.lineStart=this.lineEnd=this.point=dt},sphere:function(){Oe.add(yt)}};function Ef(){Wn.point=$f}function Af(){_a(wa,xa)}function $f(t,n){Wn.point=_a,wa=t,xa=n,t*=j,n*=j,Ur=t,Vr=tt(n=n/2+De),Gr=nt(n)}function _a(t,n){t*=j,n*=j,n=n/2+De;var e=t-Ur,r=e>=0?1:-1,i=r*e,o=tt(n),a=nt(n),s=Gr*a,f=Vr*o+s*tt(i),u=s*r*nt(i);Yr.add(Nn(u,f)),Ur=t,Vr=o,Gr=a}function Nf(t){return Oe=new Bt,ln(t,Wn),Oe*2}function Kr(t){return[Nn(t[1],t[0]),Zn(t[2])]}function Tn(t){var n=t[0],e=t[1],r=tt(e);return[r*tt(n),r*nt(n),nt(e)]}function ce(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function He(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function vr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function fe(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function qr(t){var n=gn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Xr(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function Zr(t,n){return rt(t)>K&&(t-=Math.round(t/yt)*yt),[t,n]}Zr.invert=Zr;function ba(t,n,e){return(t%=yt)?n||e?Xr(fo(t),ho(n,e)):fo(t):n||e?ho(n,e):Zr}function co(t){return function(n,e){return n+=t,rt(n)>K&&(n-=Math.round(n/yt)*yt),[n,e]}}function fo(t){var n=co(t);return n.invert=co(-t),n}function ho(t,n){var e=tt(t),r=nt(t),i=tt(n),o=nt(n);function a(s,f){var u=tt(f),l=tt(s)*u,c=nt(s)*u,h=nt(f),d=h*e+l*r;return[Nn(c*i-d*o,l*e-h*r),Zn(d*i+c*o)]}return a.invert=function(s,f){var u=tt(f),l=tt(s)*u,c=nt(s)*u,h=nt(f),d=h*i-c*o;return[Nn(c*i+h*o,l*e+d*r),Zn(d*e-l*r)]},a}function Tf(t){t=ba(t[0]*j,t[1]*j,t.length>2?t[2]*j:0);function n(e){return e=t(e[0]*j,e[1]*j),e[0]*=At,e[1]*=At,e}return n.invert=function(e){return e=t.invert(e[0]*j,e[1]*j),e[0]*=At,e[1]*=At,e},n}function kf(t,n,e,r,i,o){if(e){var a=tt(n),s=nt(n),f=r*e;i==null?(i=n+r*yt,o=n-f/2):(i=po(a,i),o=po(a,o),(r>0?i<o:i>o)&&(i+=r*yt));for(var u,l=i;r>0?l>o:l<o;l-=f)u=Kr([a,-s*tt(l),-s*nt(l)]),t.point(u[0],u[1])}}function po(t,n){n=Tn(n),n[0]-=t,qr(n);var e=Sf(-n[1]);return((-n[2]<0?-e:e)+yt-J)%yt}function Ma(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:dt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function Me(t,n){return rt(t[0]-n[0])<J&&rt(t[1]-n[1])<J}function he(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Sa(t,n,e,r,i){var o=[],a=[],s,f;if(t.forEach(function(g){if(!((w=g.length-1)<=0)){var w,M=g[0],y=g[w],_;if(Me(M,y)){if(!M[2]&&!y[2]){for(i.lineStart(),s=0;s<w;++s)i.point((M=g[s])[0],M[1]);i.lineEnd();return}y[0]+=2*J}o.push(_=new he(M,g,null,!0)),a.push(_.o=new he(M,null,_,!1)),o.push(_=new he(y,g,null,!1)),a.push(_.o=new he(y,null,_,!0))}}),!!o.length){for(a.sort(n),go(o),go(a),s=0,f=a.length;s<f;++s)a[s].e=e=!e;for(var u=o[0],l,c;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,f=l.length;s<f;++s)i.point((c=l[s])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,s=l.length-1;s>=0;--s)i.point((c=l[s])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,d=!d}while(!h.v);i.lineEnd()}}}function go(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function wr(t){return rt(t[0])<=K?t[0]:bf(t[0])*((rt(t[0])+K)%yt-K)}function Rf(t,n){var e=wr(n),r=n[1],i=nt(r),o=[nt(e),-tt(e),0],a=0,s=0,f=new Bt;i===1?r=Mt+J:i===-1&&(r=-Mt-J);for(var u=0,l=t.length;u<l;++u)if(h=(c=t[u]).length)for(var c,h,d=c[h-1],g=wr(d),w=d[1]/2+De,M=nt(w),y=tt(w),_=0;_<h;++_,g=S,M=T,y=B,d=b){var b=c[_],S=wr(b),A=b[1]/2+De,T=nt(A),B=tt(A),P=S-g,D=P>=0?1:-1,z=D*P,E=z>K,O=M*T;if(f.add(Nn(O*D*nt(z),y*B+O*tt(z))),a+=E?P+D*yt:P,E^g>=e^S>=e){var N=He(Tn(d),Tn(b));qr(N);var p=He(o,N);qr(p);var m=(E^P>=0?-1:1)*Zn(p[2]);(r>m||r===m&&(N[0]||N[1]))&&(s+=E^P>=0?1:-1)}}return(a<-1e-6||a<J&&f<-1e-12)^s&1}function Ea(t,n,e,r){return function(i){var o=n(i),a=Ma(),s=n(a),f=!1,u,l,c,h={point:d,lineStart:w,lineEnd:M,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=b,l=[],u=[]},polygonEnd:function(){h.point=d,h.lineStart=w,h.lineEnd=M,l=Fo(l);var S=Rf(u,r);l.length?(f||(i.polygonStart(),f=!0),Sa(l,If,S,e,i)):S&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(S,A){t(S,A)&&i.point(S,A)}function g(S,A){o.point(S,A)}function w(){h.point=g,o.lineStart()}function M(){h.point=d,o.lineEnd()}function y(S,A){c.push([S,A]),s.point(S,A)}function _(){s.lineStart(),c=[]}function b(){y(c[0][0],c[0][1]),s.lineEnd();var S=s.clean(),A=a.result(),T,B=A.length,P,D,z;if(c.pop(),u.push(c),c=null,!!B){if(S&1){if(D=A[0],(P=D.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),T=0;T<P;++T)i.point((z=D[T])[0],z[1]);i.lineEnd()}return}B>1&&S&2&&A.push(A.pop().concat(A.shift())),l.push(A.filter(Cf))}}return h}}function Cf(t){return t.length>1}function If(t,n){return((t=t.x)[0]<0?t[1]-Mt-J:Mt-t[1])-((n=n.x)[0]<0?n[1]-Mt-J:Mt-n[1])}const mo=Ea(function(){return!0},Pf,Bf,[-K,-Mt]);function Pf(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?K:-K,f=rt(o-n);rt(f-K)<J?(t.point(n,e=(e+a)/2>0?Mt:-Mt),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(o,e),i=0):r!==s&&f>=K&&(rt(n-r)<J&&(n-=r*J),rt(o-s)<J&&(o-=s*J),e=Lf(n,e,o,a),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(s,e),i=0),t.point(n=o,e=a),r=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function Lf(t,n,e,r){var i,o,a=nt(t-e);return rt(a)>J?va((nt(n)*(o=tt(r))*nt(e)-nt(r)*(i=tt(n))*nt(t))/(i*o*a)):(n+r)/2}function Bf(t,n,e,r){var i;if(t==null)i=e*Mt,r.point(-K,i),r.point(0,i),r.point(K,i),r.point(K,0),r.point(K,-i),r.point(0,-i),r.point(-K,-i),r.point(-K,0),r.point(-K,i);else if(rt(t[0]-n[0])>J){var o=t[0]<n[0]?K:-K;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function zf(t){var n=tt(t),e=2*j,r=n>0,i=rt(n)>J;function o(l,c,h,d){kf(d,t,e,h,l,c)}function a(l,c){return tt(l)*tt(c)>n}function s(l){var c,h,d,g,w;return{lineStart:function(){g=d=!1,w=1},point:function(M,y){var _=[M,y],b,S=a(M,y),A=r?S?0:u(M,y):S?u(M+(M<0?K:-K),y):0;if(!c&&(g=d=S)&&l.lineStart(),S!==d&&(b=f(c,_),(!b||Me(c,b)||Me(_,b))&&(_[2]=1)),S!==d)w=0,S?(l.lineStart(),b=f(_,c),l.point(b[0],b[1])):(b=f(c,_),l.point(b[0],b[1],2),l.lineEnd()),c=b;else if(i&&c&&r^S){var T;!(A&h)&&(T=f(_,c,!0))&&(w=0,r?(l.lineStart(),l.point(T[0][0],T[0][1]),l.point(T[1][0],T[1][1]),l.lineEnd()):(l.point(T[1][0],T[1][1]),l.lineEnd(),l.lineStart(),l.point(T[0][0],T[0][1],3)))}S&&(!c||!Me(c,_))&&l.point(_[0],_[1]),c=_,d=S,h=A},lineEnd:function(){d&&l.lineEnd(),c=null},clean:function(){return w|(g&&d)<<1}}}function f(l,c,h){var d=Tn(l),g=Tn(c),w=[1,0,0],M=He(d,g),y=ce(M,M),_=M[0],b=y-_*_;if(!b)return!h&&l;var S=n*y/b,A=-n*_/b,T=He(w,M),B=fe(w,S),P=fe(M,A);vr(B,P);var D=T,z=ce(B,D),E=ce(D,D),O=z*z-E*(ce(B,B)-1);if(!(O<0)){var N=gn(O),p=fe(D,(-z-N)/E);if(vr(p,B),p=Kr(p),!h)return p;var m=l[0],v=c[0],$=l[1],I=c[1],L;v<m&&(L=m,m=v,v=L);var F=v-m,H=rt(F-K)<J,V=H||F<J;if(!H&&I<$&&(L=$,$=I,I=L),V?H?$+I>0^p[1]<(rt(p[0]-m)<J?$:I):$<=p[1]&&p[1]<=I:F>K^(m<=p[0]&&p[0]<=v)){var W=fe(D,(-z+N)/E);return vr(W,B),[p,Kr(W)]}}}function u(l,c){var h=r?t:K-t,d=0;return l<-h?d|=1:l>h&&(d|=2),c<-h?d|=4:c>h&&(d|=8),d}return Ea(a,s,o,r?[0,-t]:[-K,t-K])}function Df(t,n,e,r,i,o){var a=t[0],s=t[1],f=n[0],u=n[1],l=0,c=1,h=f-a,d=u-s,g;if(g=e-a,!(!h&&g>0)){if(g/=h,h<0){if(g<l)return;g<c&&(c=g)}else if(h>0){if(g>c)return;g>l&&(l=g)}if(g=i-a,!(!h&&g<0)){if(g/=h,h<0){if(g>c)return;g>l&&(l=g)}else if(h>0){if(g<l)return;g<c&&(c=g)}if(g=r-s,!(!d&&g>0)){if(g/=d,d<0){if(g<l)return;g<c&&(c=g)}else if(d>0){if(g>c)return;g>l&&(l=g)}if(g=o-s,!(!d&&g<0)){if(g/=d,d<0){if(g>c)return;g>l&&(l=g)}else if(d>0){if(g<l)return;g<c&&(c=g)}return l>0&&(t[0]=a+l*h,t[1]=s+l*d),c<1&&(n[0]=a+c*h,n[1]=s+c*d),!0}}}}}var de=1e9,pe=-1e9;function Ff(t,n,e,r){function i(u,l){return t<=u&&u<=e&&n<=l&&l<=r}function o(u,l,c,h){var d=0,g=0;if(u==null||(d=a(u,c))!==(g=a(l,c))||f(u,l)<0^c>0)do h.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+c+4)%4)!==g);else h.point(l[0],l[1])}function a(u,l){return rt(u[0]-t)<J?l>0?0:3:rt(u[0]-e)<J?l>0?2:1:rt(u[1]-n)<J?l>0?1:0:l>0?3:2}function s(u,l){return f(u.x,l.x)}function f(u,l){var c=a(u,1),h=a(l,1);return c!==h?c-h:c===0?l[1]-u[1]:c===1?u[0]-l[0]:c===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,c=Ma(),h,d,g,w,M,y,_,b,S,A,T,B={point:P,lineStart:O,lineEnd:N,polygonStart:z,polygonEnd:E};function P(m,v){i(m,v)&&l.point(m,v)}function D(){for(var m=0,v=0,$=d.length;v<$;++v)for(var I=d[v],L=1,F=I.length,H=I[0],V,W,X=H[0],q=H[1];L<F;++L)V=X,W=q,H=I[L],X=H[0],q=H[1],W<=r?q>r&&(X-V)*(r-W)>(q-W)*(t-V)&&++m:q<=r&&(X-V)*(r-W)<(q-W)*(t-V)&&--m;return m}function z(){l=c,h=[],d=[],T=!0}function E(){var m=D(),v=T&&m,$=(h=Fo(h)).length;(v||$)&&(u.polygonStart(),v&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),$&&Sa(h,s,m,o,u),u.polygonEnd()),l=u,h=d=g=null}function O(){B.point=p,d&&d.push(g=[]),A=!0,S=!1,_=b=NaN}function N(){h&&(p(w,M),y&&S&&c.rejoin(),h.push(c.result())),B.point=P,S&&l.lineEnd()}function p(m,v){var $=i(m,v);if(d&&g.push([m,v]),A)w=m,M=v,y=$,A=!1,$&&(l.lineStart(),l.point(m,v));else if($&&S)l.point(m,v);else{var I=[_=Math.max(pe,Math.min(de,_)),b=Math.max(pe,Math.min(de,b))],L=[m=Math.max(pe,Math.min(de,m)),v=Math.max(pe,Math.min(de,v))];Df(I,L,t,n,e,r)?(S||(l.lineStart(),l.point(I[0],I[1])),l.point(L[0],L[1]),$||l.lineEnd(),T=!1):$&&(l.lineStart(),l.point(m,v),T=!1)}_=m,b=v,S=$}return B}}const Wr=t=>t;var xr=new Bt,Jr=new Bt,Aa,$a,Qr,jr,qt={point:dt,lineStart:dt,lineEnd:dt,polygonStart:function(){qt.lineStart=Of,qt.lineEnd=Yf},polygonEnd:function(){qt.lineStart=qt.lineEnd=qt.point=dt,xr.add(rt(Jr)),Jr=new Bt},result:function(){var t=xr/2;return xr=new Bt,t}};function Of(){qt.point=Hf}function Hf(t,n){qt.point=Na,Aa=Qr=t,$a=jr=n}function Na(t,n){Jr.add(jr*t-Qr*n),Qr=t,jr=n}function Yf(){Na(Aa,$a)}var kn=1/0,Ye=kn,Jn=-kn,Ue=Jn,Ve={point:Uf,lineStart:dt,lineEnd:dt,polygonStart:dt,polygonEnd:dt,result:function(){var t=[[kn,Ye],[Jn,Ue]];return Jn=Ue=-(Ye=kn=1/0),t}};function Uf(t,n){t<kn&&(kn=t),t>Jn&&(Jn=t),n<Ye&&(Ye=n),n>Ue&&(Ue=n)}var ti=0,ni=0,Fn=0,Ge=0,Ke=0,_n=0,ei=0,ri=0,On=0,Ta,ka,Ht,Yt,Tt={point:pn,lineStart:yo,lineEnd:vo,polygonStart:function(){Tt.lineStart=Kf,Tt.lineEnd=qf},polygonEnd:function(){Tt.point=pn,Tt.lineStart=yo,Tt.lineEnd=vo},result:function(){var t=On?[ei/On,ri/On]:_n?[Ge/_n,Ke/_n]:Fn?[ti/Fn,ni/Fn]:[NaN,NaN];return ti=ni=Fn=Ge=Ke=_n=ei=ri=On=0,t}};function pn(t,n){ti+=t,ni+=n,++Fn}function yo(){Tt.point=Vf}function Vf(t,n){Tt.point=Gf,pn(Ht=t,Yt=n)}function Gf(t,n){var e=t-Ht,r=n-Yt,i=gn(e*e+r*r);Ge+=i*(Ht+t)/2,Ke+=i*(Yt+n)/2,_n+=i,pn(Ht=t,Yt=n)}function vo(){Tt.point=pn}function Kf(){Tt.point=Xf}function qf(){Ra(Ta,ka)}function Xf(t,n){Tt.point=Ra,pn(Ta=Ht=t,ka=Yt=n)}function Ra(t,n){var e=t-Ht,r=n-Yt,i=gn(e*e+r*r);Ge+=i*(Ht+t)/2,Ke+=i*(Yt+n)/2,_n+=i,i=Yt*t-Ht*n,ei+=i*(Ht+t),ri+=i*(Yt+n),On+=i*3,pn(Ht=t,Yt=n)}function Ca(t){this._context=t}Ca.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,yt);break}}},result:dt};var ii=new Bt,_r,Ia,Pa,Hn,Yn,Qn={point:dt,lineStart:function(){Qn.point=Zf},lineEnd:function(){_r&&La(Ia,Pa),Qn.point=dt},polygonStart:function(){_r=!0},polygonEnd:function(){_r=null},result:function(){var t=+ii;return ii=new Bt,t}};function Zf(t,n){Qn.point=La,Ia=Hn=t,Pa=Yn=n}function La(t,n){Hn-=t,Yn-=n,ii.add(gn(Hn*Hn+Yn*Yn)),Hn=t,Yn=n}let wo,qe,xo,_o;class bo{constructor(n){this._append=n==null?Ba:Wf(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==xo||this._append!==qe){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,xo=r,qe=this._append,_o=this._,this._=i}this._+=_o;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ba(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Wf(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ba;if(n!==wo){const e=10**n;wo=n,qe=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+i[o]}}return qe}function Jf(t,n){let e=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),ln(s,i(o))),o.result()}return a.area=function(s){return ln(s,i(qt)),qt.result()},a.measure=function(s){return ln(s,i(Qn)),Qn.result()},a.bounds=function(s){return ln(s,i(Ve)),Ve.result()},a.centroid=function(s){return ln(s,i(Tt)),Tt.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,Wr):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(n=null,new bo(e)):new Ca(n=s),typeof r!="function"&&o.pointRadius(r),a):n},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const f=Math.floor(s);if(!(f>=0))throw new RangeError(`invalid digits: ${s}`);e=f}return n===null&&(o=new bo(e)),a},a.projection(t).digits(e).context(n)}function yi(t){return function(n){var e=new oi;for(var r in t)e[r]=t[r];return e.stream=n,e}}function oi(){}oi.prototype={constructor:oi,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function vi(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),ln(e,t.stream(Ve)),n(Ve.result()),r!=null&&t.clipExtent(r),t}function za(t,n,e){return vi(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+n[0][0]+(i-a*(r[1][0]+r[0][0]))/2,f=+n[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,f])},e)}function Qf(t,n,e){return za(t,[[0,0],n],e)}function jf(t,n,e){return vi(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},e)}function th(t,n,e){return vi(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},e)}var Mo=16,nh=tt(30*j);function So(t,n){return+n?rh(t,n):eh(t)}function eh(t){return yi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function rh(t,n){function e(r,i,o,a,s,f,u,l,c,h,d,g,w,M){var y=u-r,_=l-i,b=y*y+_*_;if(b>4*n&&w--){var S=a+h,A=s+d,T=f+g,B=gn(S*S+A*A+T*T),P=Zn(T/=B),D=rt(rt(T)-1)<J||rt(o-c)<J?(o+c)/2:Nn(A,S),z=t(D,P),E=z[0],O=z[1],N=E-r,p=O-i,m=_*N-y*p;(m*m/b>n||rt((y*N+_*p)/b-.5)>.3||a*h+s*d+f*g<nh)&&(e(r,i,o,a,s,f,E,O,D,S/=B,A/=B,T,w,M),M.point(E,O),e(E,O,D,S,A,T,u,l,c,h,d,g,w,M))}}return function(r){var i,o,a,s,f,u,l,c,h,d,g,w,M={point:y,lineStart:_,lineEnd:S,polygonStart:function(){r.polygonStart(),M.lineStart=A},polygonEnd:function(){r.polygonEnd(),M.lineStart=_}};function y(P,D){P=t(P,D),r.point(P[0],P[1])}function _(){c=NaN,M.point=b,r.lineStart()}function b(P,D){var z=Tn([P,D]),E=t(P,D);e(c,h,l,d,g,w,c=E[0],h=E[1],l=P,d=z[0],g=z[1],w=z[2],Mo,r),r.point(c,h)}function S(){M.point=y,r.lineEnd()}function A(){_(),M.point=T,M.lineEnd=B}function T(P,D){b(i=P,D),o=c,a=h,s=d,f=g,u=w,M.point=b}function B(){e(c,h,l,d,g,w,o,a,i,s,f,u,Mo,r),M.lineEnd=S,S()}return M}}var ih=yi({point:function(t,n){this.stream.point(t*j,n*j)}});function oh(t){return yi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function ah(t,n,e,r,i){function o(a,s){return a*=r,s*=i,[n+t*a,e-t*s]}return o.invert=function(a,s){return[(a-n)/t*r,(e-s)/t*i]},o}function Eo(t,n,e,r,i,o){if(!o)return ah(t,n,e,r,i);var a=tt(o),s=nt(o),f=a*t,u=s*t,l=a/t,c=s/t,h=(s*e-a*n)/t,d=(s*n+a*e)/t;function g(w,M){return w*=r,M*=i,[f*w-u*M+n,e-u*w-f*M]}return g.invert=function(w,M){return[r*(l*w-c*M+h),i*(d-c*w-l*M)]},g}function sh(t){return uh(function(){return t})()}function uh(t){var n,e=150,r=480,i=250,o=0,a=0,s=0,f=0,u=0,l,c=0,h=1,d=1,g=null,w=mo,M=null,y,_,b,S=Wr,A=.5,T,B,P,D,z;function E(m){return P(m[0]*j,m[1]*j)}function O(m){return m=P.invert(m[0],m[1]),m&&[m[0]*At,m[1]*At]}E.stream=function(m){return D&&z===m?D:D=ih(oh(l)(w(T(S(z=m)))))},E.preclip=function(m){return arguments.length?(w=m,g=void 0,p()):w},E.postclip=function(m){return arguments.length?(S=m,M=y=_=b=null,p()):S},E.clipAngle=function(m){return arguments.length?(w=+m?zf(g=m*j):(g=null,mo),p()):g*At},E.clipExtent=function(m){return arguments.length?(S=m==null?(M=y=_=b=null,Wr):Ff(M=+m[0][0],y=+m[0][1],_=+m[1][0],b=+m[1][1]),p()):M==null?null:[[M,y],[_,b]]},E.scale=function(m){return arguments.length?(e=+m,N()):e},E.translate=function(m){return arguments.length?(r=+m[0],i=+m[1],N()):[r,i]},E.center=function(m){return arguments.length?(o=m[0]%360*j,a=m[1]%360*j,N()):[o*At,a*At]},E.rotate=function(m){return arguments.length?(s=m[0]%360*j,f=m[1]%360*j,u=m.length>2?m[2]%360*j:0,N()):[s*At,f*At,u*At]},E.angle=function(m){return arguments.length?(c=m%360*j,N()):c*At},E.reflectX=function(m){return arguments.length?(h=m?-1:1,N()):h<0},E.reflectY=function(m){return arguments.length?(d=m?-1:1,N()):d<0},E.precision=function(m){return arguments.length?(T=So(B,A=m*m),p()):gn(A)},E.fitExtent=function(m,v){return za(E,m,v)},E.fitSize=function(m,v){return Qf(E,m,v)},E.fitWidth=function(m,v){return jf(E,m,v)},E.fitHeight=function(m,v){return th(E,m,v)};function N(){var m=Eo(e,0,0,h,d,c).apply(null,n(o,a)),v=Eo(e,r-m[0],i-m[1],h,d,c);return l=ba(s,f,u),B=Xr(n,v),P=Xr(l,B),T=So(B,A),p()}function p(){return D=z=null,E}return function(){return n=t.apply(this,arguments),E.invert=n.invert&&O,N()}}function wi(t,n){return[t,_f(Mf((Mt+n)/2))]}wi.invert=function(t,n){return[t,2*va(xf(n))-Mt]};function lh(){return ch(wi).scale(961/yt)}function ch(t){var n=sh(t),e=n.center,r=n.scale,i=n.translate,o=n.clipExtent,a=null,s,f,u;n.scale=function(c){return arguments.length?(r(c),l()):r()},n.translate=function(c){return arguments.length?(i(c),l()):i()},n.center=function(c){return arguments.length?(e(c),l()):e()},n.clipExtent=function(c){return arguments.length?(c==null?a=s=f=u=null:(a=+c[0][0],s=+c[0][1],f=+c[1][0],u=+c[1][1]),l()):a==null?null:[[a,s],[f,u]]};function l(){var c=K*r(),h=n(Tf(n.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===wi?[[Math.max(h[0]-c,a),s],[Math.min(h[0]+c,f),u]]:[[a,Math.max(h[1]-c,s)],[f,Math.min(h[1]+c,u)]])}return l()}function xi(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function fh(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const Ao=Symbol("implicit");function Xe(){var t=new Pi,n=[],e=[],r=Ao;function i(o){let a=t.get(o);if(a===void 0){if(r!==Ao)return r;t.set(o,a=n.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new Pi;for(const a of o)t.has(a)||t.set(a,n.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Xe(n,e).unknown(r)},xi.apply(i,arguments),i}function Da(){var t=Xe().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,o,a,s=!1,f=0,u=0,l=.5;delete t.unknown;function c(){var h=n().length,d=i<r,g=d?i:r,w=d?r:i;o=(w-g)/Math.max(1,h-f+u*2),s&&(o=Math.floor(o)),g+=(w-g-o*(h-f))*l,a=o*(1-f),s&&(g=Math.round(g),a=Math.round(a));var M=Nr(h).map(function(y){return g+o*y});return e(d?M.reverse():M)}return t.domain=function(h){return arguments.length?(n(h),c()):n()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,c()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,c()):s},t.padding=function(h){return arguments.length?(f=Math.min(1,u=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(u=+h,c()):u},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),c()):l},t.copy=function(){return Da(n(),[r,i]).round(s).paddingInner(f).paddingOuter(u).align(l)},xi.apply(c(),arguments)}function hh(t){return function(){return t}}function dh(t){return+t}var $o=[0,1];function tn(t){return t}function ai(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:hh(isNaN(n)?NaN:.5)}function ph(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function gh(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=ai(i,r),o=e(a,o)):(r=ai(r,i),o=e(o,a)),function(s){return o(r(s))}}function mh(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=ai(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var f=es(t,s,1,r)-1;return o[f](i[f](s))}}function yh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vh(){var t=$o,n=$o,e=Qe,r,i,o,a=tn,s,f,u;function l(){var h=Math.min(t.length,n.length);return a!==tn&&(a=ph(t[0],t[h-1])),s=h>2?mh:gh,f=u=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=s(t.map(r),n,e)))(r(a(h)))}return c.invert=function(h){return a(i((u||(u=s(n,t.map(r),Pt)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,dh),l()):t.slice()},c.range=function(h){return arguments.length?(n=Array.from(h),l()):n.slice()},c.rangeRound=function(h){return n=Array.from(h),e=ra,l()},c.clamp=function(h){return arguments.length?(a=h?!0:tn,l()):a!==tn},c.interpolate=function(h){return arguments.length?(e=h,l()):e},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,d){return r=h,i=d,l()}}function wh(){return vh()(tn,tn)}function xh(t,n,e,r){var i=cs(t,n,e),o;switch(r=ze(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=vf(i,a))&&(r.precision=o),ya(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=wf(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=yf(i))&&(r.precision=o-(r.type==="%")*2);break}}return ma(r)}function Fa(t){var n=t.domain;return t.ticks=function(e){var r=n();return ls(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return xh(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],s=r[o],f,u,l=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);l-- >0;){if(u=$r(a,s,e),u===f)return r[i]=a,r[o]=s,n(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;f=u}return t},t}function Oa(){var t=wh();return t.copy=function(){return yh(t,Oa())},xi.apply(t,arguments),Fa(t)}function _h(){var t=0,n=1,e,r,i,o,a=tn,s=!1,f;function u(c){return c==null||isNaN(c=+c)?f:a(i===0?.5:(c=(o(c)-e)*i,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([t,n]=c,e=o(t=+t),r=o(n=+n),i=e===r?0:1/(r-e),u):[t,n]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(a=c,u):a};function l(c){return function(h){var d,g;return arguments.length?([d,g]=h,a=c(d,g),u):[a(0),a(1)]}}return u.range=l(Qe),u.rangeRound=l(ra),u.unknown=function(c){return arguments.length?(f=c,u):f},function(c){return o=c,e=c(t),r=c(n),i=e===r?0:1/(r-e),u}}function bh(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Un(){var t=Fa(_h()(tn));return t.copy=function(){return bh(t,Un())},fh.apply(t,arguments)}function _i(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const bi=t=>_l(t[t.length-1]);var Mh=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_i);const br=bi(Mh);var Sh=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_i);const ge=bi(Sh);var Eh=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_i);const No=bi(Eh);function st(t){return function(){return t}}const To=Math.abs,ft=Math.atan2,sn=Math.cos,Ah=Math.max,Mr=Math.min,Ot=Math.sin,bn=Math.sqrt,xt=1e-12,jn=Math.PI,Ze=jn/2,Se=2*jn;function $h(t){return t>1?0:t<-1?jn:Math.acos(t)}function ko(t){return t>=1?Ze:t<=-1?-Ze:Math.asin(t)}function Nh(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new Wc(n)}function Th(t){return t.innerRadius}function kh(t){return t.outerRadius}function Rh(t){return t.startAngle}function Ch(t){return t.endAngle}function Ih(t){return t&&t.padAngle}function Ph(t,n,e,r,i,o,a,s){var f=e-t,u=r-n,l=a-i,c=s-o,h=c*f-l*u;if(!(h*h<xt))return h=(l*(n-o)-c*(t-i))/h,[t+h*f,n+h*u]}function me(t,n,e,r,i,o,a){var s=t-e,f=n-r,u=(a?o:-o)/bn(s*s+f*f),l=u*f,c=-u*s,h=t+l,d=n+c,g=e+l,w=r+c,M=(h+g)/2,y=(d+w)/2,_=g-h,b=w-d,S=_*_+b*b,A=i-o,T=h*w-g*d,B=(b<0?-1:1)*bn(Ah(0,A*A*S-T*T)),P=(T*b-_*B)/S,D=(-T*_-b*B)/S,z=(T*b+_*B)/S,E=(-T*_+b*B)/S,O=P-M,N=D-y,p=z-M,m=E-y;return O*O+N*N>p*p+m*m&&(P=z,D=E),{cx:P,cy:D,x01:-l,y01:-c,x11:P*(i/A-1),y11:D*(i/A-1)}}function Lh(){var t=Th,n=kh,e=st(0),r=null,i=Rh,o=Ch,a=Ih,s=null,f=Nh(u);function u(){var l,c,h=+t.apply(this,arguments),d=+n.apply(this,arguments),g=i.apply(this,arguments)-Ze,w=o.apply(this,arguments)-Ze,M=To(w-g),y=w>g;if(s||(s=l=f()),d<h&&(c=d,d=h,h=c),!(d>xt))s.moveTo(0,0);else if(M>Se-xt)s.moveTo(d*sn(g),d*Ot(g)),s.arc(0,0,d,g,w,!y),h>xt&&(s.moveTo(h*sn(w),h*Ot(w)),s.arc(0,0,h,w,g,y));else{var _=g,b=w,S=g,A=w,T=M,B=M,P=a.apply(this,arguments)/2,D=P>xt&&(r?+r.apply(this,arguments):bn(h*h+d*d)),z=Mr(To(d-h)/2,+e.apply(this,arguments)),E=z,O=z,N,p;if(D>xt){var m=ko(D/h*Ot(P)),v=ko(D/d*Ot(P));(T-=m*2)>xt?(m*=y?1:-1,S+=m,A-=m):(T=0,S=A=(g+w)/2),(B-=v*2)>xt?(v*=y?1:-1,_+=v,b-=v):(B=0,_=b=(g+w)/2)}var $=d*sn(_),I=d*Ot(_),L=h*sn(A),F=h*Ot(A);if(z>xt){var H=d*sn(b),V=d*Ot(b),W=h*sn(S),X=h*Ot(S),q;if(M<jn)if(q=Ph($,I,W,X,H,V,L,F)){var pt=$-q[0],ut=I-q[1],gt=H-q[0],Gt=V-q[1],ee=1/Ot($h((pt*gt+ut*Gt)/(bn(pt*pt+ut*ut)*bn(gt*gt+Gt*Gt)))/2),Jt=bn(q[0]*q[0]+q[1]*q[1]);E=Mr(z,(h-Jt)/(ee-1)),O=Mr(z,(d-Jt)/(ee+1))}else E=O=0}B>xt?O>xt?(N=me(W,X,$,I,d,O,y),p=me(H,V,L,F,d,O,y),s.moveTo(N.cx+N.x01,N.cy+N.y01),O<z?s.arc(N.cx,N.cy,O,ft(N.y01,N.x01),ft(p.y01,p.x01),!y):(s.arc(N.cx,N.cy,O,ft(N.y01,N.x01),ft(N.y11,N.x11),!y),s.arc(0,0,d,ft(N.cy+N.y11,N.cx+N.x11),ft(p.cy+p.y11,p.cx+p.x11),!y),s.arc(p.cx,p.cy,O,ft(p.y11,p.x11),ft(p.y01,p.x01),!y))):(s.moveTo($,I),s.arc(0,0,d,_,b,!y)):s.moveTo($,I),!(h>xt)||!(T>xt)?s.lineTo(L,F):E>xt?(N=me(L,F,H,V,h,-E,y),p=me($,I,W,X,h,-E,y),s.lineTo(N.cx+N.x01,N.cy+N.y01),E<z?s.arc(N.cx,N.cy,E,ft(N.y01,N.x01),ft(p.y01,p.x01),!y):(s.arc(N.cx,N.cy,E,ft(N.y01,N.x01),ft(N.y11,N.x11),!y),s.arc(0,0,h,ft(N.cy+N.y11,N.cx+N.x11),ft(p.cy+p.y11,p.cx+p.x11),y),s.arc(p.cx,p.cy,E,ft(p.y11,p.x11),ft(p.y01,p.x01),!y))):s.arc(0,0,h,A,S,y)}if(s.closePath(),l)return s=null,l+""||null}return u.centroid=function(){var l=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-jn/2;return[sn(c)*l,Ot(c)*l]},u.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:st(+l),u):t},u.outerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:st(+l),u):n},u.cornerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:st(+l),u):e},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:st(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:st(+l),u):i},u.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:st(+l),u):o},u.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:st(+l),u):a},u.context=function(l){return arguments.length?(s=l??null,u):s},u}function Ha(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bh(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function zh(t){return t}function Dh(){var t=zh,n=Bh,e=null,r=st(0),i=st(Se),o=st(0);function a(s){var f,u=(s=Ha(s)).length,l,c,h=0,d=new Array(u),g=new Array(u),w=+r.apply(this,arguments),M=Math.min(Se,Math.max(-Se,i.apply(this,arguments)-w)),y,_=Math.min(Math.abs(M)/u,o.apply(this,arguments)),b=_*(M<0?-1:1),S;for(f=0;f<u;++f)(S=g[d[f]=f]=+t(s[f],f,s))>0&&(h+=S);for(n!=null?d.sort(function(A,T){return n(g[A],g[T])}):e!=null&&d.sort(function(A,T){return e(s[A],s[T])}),f=0,c=h?(M-u*b)/h:0;f<u;++f,w=y)l=d[f],S=g[l],y=w+(S>0?S*c:0)+b,g[l]={data:s[l],index:f,value:S,startAngle:w,endAngle:y,padAngle:_};return g}return a.value=function(s){return arguments.length?(t=typeof s=="function"?s:st(+s),a):t},a.sortValues=function(s){return arguments.length?(n=s,e=null,a):n},a.sort=function(s){return arguments.length?(e=s,n=null,a):e},a.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:st(+s),a):r},a.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:st(+s),a):i},a.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:st(+s),a):o},a}function Ro(t,n){if((a=t.length)>1)for(var e=1,r,i,o=t[n[0]],a,s=o.length;e<a;++e)for(i=o,o=t[n[e]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Co(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function Fh(t,n){return t[n]}function Oh(t){const n=[];return n.key=t,n}function Hh(){var t=st([]),n=Co,e=Ro,r=Fh;function i(o){var a=Array.from(t.apply(this,arguments),Oh),s,f=a.length,u=-1,l;for(const c of o)for(s=0,++u;s<f;++s)(a[s][u]=[0,+r(c,a[s].key,u,o)]).data=c;for(s=0,l=Ha(n(a));s<f;++s)a[l[s]].index=s;return e(a,l),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:st(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:st(+o),i):r},i.order=function(o){return arguments.length?(n=o==null?Co:typeof o=="function"?o:st(Array.from(o)),i):n},i.offset=function(o){return arguments.length?(e=o??Ro,i):e},i}const ye=t=>()=>t;function Yh(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Xt(t,n,e){this.k=t,this.x=n,this.y=e}Xt.prototype={constructor:Xt,scale:function(t){return t===1?this:new Xt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Xt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gn=new Xt(1,0,0);Xt.prototype;function Sr(t){t.stopImmediatePropagation()}function Ln(t){t.preventDefault(),t.stopImmediatePropagation()}function Uh(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Vh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Io(){return this.__zoom||Gn}function Gh(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Kh(){return navigator.maxTouchPoints||"ontouchstart"in this}function qh(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Xh(){var t=Uh,n=Vh,e=qh,r=Gh,i=Kh,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Bl,u=ui("start","zoom","end"),l,c,h,d=500,g=150,w=0,M=10;function y(p){p.property("__zoom",Io).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(p,m,v,$){var I=p.selection?p.selection():p;I.property("__zoom",Io),p!==I?A(p,m,v,$):I.interrupt().each(function(){T(this,arguments).event($).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},y.scaleBy=function(p,m,v,$){y.scaleTo(p,function(){var I=this.__zoom.k,L=typeof m=="function"?m.apply(this,arguments):m;return I*L},v,$)},y.scaleTo=function(p,m,v,$){y.transform(p,function(){var I=n.apply(this,arguments),L=this.__zoom,F=v==null?S(I):typeof v=="function"?v.apply(this,arguments):v,H=L.invert(F),V=typeof m=="function"?m.apply(this,arguments):m;return e(b(_(L,V),F,H),I,a)},v,$)},y.translateBy=function(p,m,v,$){y.transform(p,function(){return e(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof v=="function"?v.apply(this,arguments):v),n.apply(this,arguments),a)},null,$)},y.translateTo=function(p,m,v,$,I){y.transform(p,function(){var L=n.apply(this,arguments),F=this.__zoom,H=$==null?S(L):typeof $=="function"?$.apply(this,arguments):$;return e(Gn.translate(H[0],H[1]).scale(F.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof v=="function"?-v.apply(this,arguments):-v),L,a)},$,I)};function _(p,m){return m=Math.max(o[0],Math.min(o[1],m)),m===p.k?p:new Xt(m,p.x,p.y)}function b(p,m,v){var $=m[0]-v[0]*p.k,I=m[1]-v[1]*p.k;return $===p.x&&I===p.y?p:new Xt(p.k,$,I)}function S(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function A(p,m,v,$){p.on("start.zoom",function(){T(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event($).end()}).tween("zoom",function(){var I=this,L=arguments,F=T(I,L).event($),H=n.apply(I,L),V=v==null?S(H):typeof v=="function"?v.apply(I,L):v,W=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),X=I.__zoom,q=typeof m=="function"?m.apply(I,L):m,pt=f(X.invert(V).concat(W/X.k),q.invert(V).concat(W/q.k));return function(ut){if(ut===1)ut=q;else{var gt=pt(ut),Gt=W/gt[2];ut=new Xt(Gt,V[0]-gt[0]*Gt,V[1]-gt[1]*Gt)}F.zoom(null,ut)}})}function T(p,m,v){return!v&&p.__zooming||new B(p,m)}function B(p,m){this.that=p,this.args=m,this.active=0,this.sourceEvent=null,this.extent=n.apply(p,m),this.taps=0}B.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,m){return this.mouse&&p!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var m=at(this.that).datum();u.call(p,this.that,new Yh(p,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),m)}};function P(p,...m){if(!t.apply(this,arguments))return;var v=T(this,m).event(p),$=this.__zoom,I=Math.max(o[0],Math.min(o[1],$.k*Math.pow(2,r.apply(this,arguments)))),L=an(p);if(v.wheel)(v.mouse[0][0]!==L[0]||v.mouse[0][1]!==L[1])&&(v.mouse[1]=$.invert(v.mouse[0]=L)),clearTimeout(v.wheel);else{if($.k===I)return;v.mouse=[L,$.invert(L)],be(this),v.start()}Ln(p),v.wheel=setTimeout(F,g),v.zoom("mouse",e(b(_($,I),v.mouse[0],v.mouse[1]),v.extent,a));function F(){v.wheel=null,v.end()}}function D(p,...m){if(h||!t.apply(this,arguments))return;var v=p.currentTarget,$=T(this,m,!0).event(p),I=at(p.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",W,!0),L=an(p,v),F=p.clientX,H=p.clientY;el(p.view),Sr(p),$.mouse=[L,this.__zoom.invert(L)],be(this),$.start();function V(X){if(Ln(X),!$.moved){var q=X.clientX-F,pt=X.clientY-H;$.moved=q*q+pt*pt>w}$.event(X).zoom("mouse",e(b($.that.__zoom,$.mouse[0]=an(X,v),$.mouse[1]),$.extent,a))}function W(X){I.on("mousemove.zoom mouseup.zoom",null),rl(X.view,$.moved),Ln(X),$.event(X).end()}}function z(p,...m){if(t.apply(this,arguments)){var v=this.__zoom,$=an(p.changedTouches?p.changedTouches[0]:p,this),I=v.invert($),L=v.k*(p.shiftKey?.5:2),F=e(b(_(v,L),$,I),n.apply(this,m),a);Ln(p),s>0?at(this).transition().duration(s).call(A,F,$,p):at(this).call(y.transform,F,$,p)}}function E(p,...m){if(t.apply(this,arguments)){var v=p.touches,$=v.length,I=T(this,m,p.changedTouches.length===$).event(p),L,F,H,V;for(Sr(p),F=0;F<$;++F)H=v[F],V=an(H,this),V=[V,this.__zoom.invert(V),H.identifier],I.touch0?!I.touch1&&I.touch0[2]!==V[2]&&(I.touch1=V,I.taps=0):(I.touch0=V,L=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),L&&(I.taps<2&&(c=V[0],l=setTimeout(function(){l=null},d)),be(this),I.start())}}function O(p,...m){if(this.__zooming){var v=T(this,m).event(p),$=p.changedTouches,I=$.length,L,F,H,V;for(Ln(p),L=0;L<I;++L)F=$[L],H=an(F,this),v.touch0&&v.touch0[2]===F.identifier?v.touch0[0]=H:v.touch1&&v.touch1[2]===F.identifier&&(v.touch1[0]=H);if(F=v.that.__zoom,v.touch1){var W=v.touch0[0],X=v.touch0[1],q=v.touch1[0],pt=v.touch1[1],ut=(ut=q[0]-W[0])*ut+(ut=q[1]-W[1])*ut,gt=(gt=pt[0]-X[0])*gt+(gt=pt[1]-X[1])*gt;F=_(F,Math.sqrt(ut/gt)),H=[(W[0]+q[0])/2,(W[1]+q[1])/2],V=[(X[0]+pt[0])/2,(X[1]+pt[1])/2]}else if(v.touch0)H=v.touch0[0],V=v.touch0[1];else return;v.zoom("touch",e(b(F,H,V),v.extent,a))}}function N(p,...m){if(this.__zooming){var v=T(this,m).event(p),$=p.changedTouches,I=$.length,L,F;for(Sr(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),L=0;L<I;++L)F=$[L],v.touch0&&v.touch0[2]===F.identifier?delete v.touch0:v.touch1&&v.touch1[2]===F.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(F=an(F,this),Math.hypot(c[0]-F[0],c[1]-F[1])<M)){var H=at(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return y.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:ye(+p),y):r},y.filter=function(p){return arguments.length?(t=typeof p=="function"?p:ye(!!p),y):t},y.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ye(!!p),y):i},y.extent=function(p){return arguments.length?(n=typeof p=="function"?p:ye([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),y):n},y.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],y):[o[0],o[1]]},y.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(p){return arguments.length?(e=p,y):e},y.duration=function(p){return arguments.length?(s=+p,y):s},y.interpolate=function(p){return arguments.length?(f=p,y):f},y.on=function(){var p=u.on.apply(u,arguments);return p===u?y:p},y.clickDistance=function(p){return arguments.length?(w=(p=+p)*p,y):Math.sqrt(w)},y.tapDistance=function(p){return arguments.length?(M=+p,y):M},y}class Zh{constructor(n=[],e=(r,i)=>r<i?-1:r>i?1:0){if(this.data=n,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:e,compare:r}=this,i=e[n];for(;n>0;){const o=n-1>>1,a=e[o];if(r(i,a)>=0)break;e[n]=a,n=o}e[n]=i}_down(n){const{data:e,compare:r}=this,i=this.length>>1,o=e[n];for(;n<i;){let a=(n<<1)+1;const s=a+1;if(s<this.length&&r(e[s],e[a])<0&&(a=s),r(e[a],o)>=0)break;e[n]=e[a],n=a}e[n]=o}}function Po(t,n=1,e=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const[y,_]of t[0])y<r&&(r=y),_<i&&(i=_),y>o&&(o=y),_>a&&(a=_);const s=o-r,f=a-i,u=Math.max(n,Math.min(s,f));if(u===n){const y=[r,i];return y.distance=0,y}const l=new Zh([],(y,_)=>_.max-y.max);let c=Jh(t);const h=new We(r+s/2,i+f/2,0,t);h.d>c.d&&(c=h);let d=2;function g(y,_,b){const S=new We(y,_,b,t);d++,S.max>c.d+n&&l.push(S),S.d>c.d&&(c=S,e&&console.log(`found best ${Math.round(1e4*S.d)/1e4} after ${d} probes`))}let w=u/2;for(let y=r;y<o;y+=u)for(let _=i;_<a;_+=u)g(y+w,_+w,w);for(;l.length;){const{max:y,x:_,y:b,h:S}=l.pop();if(y-c.d<=n)break;w=S/2,g(_-w,b-w,w),g(_+w,b-w,w),g(_-w,b+w,w),g(_+w,b+w,w)}e&&console.log(`num probes: ${d}
best distance: ${c.d}`);const M=[c.x,c.y];return M.distance=c.d,M}function We(t,n,e,r){this.x=t,this.y=n,this.h=e,this.d=Wh(t,n,r),this.max=this.d+this.h*Math.SQRT2}function Wh(t,n,e){let r=!1,i=1/0;for(const o of e)for(let a=0,s=o.length,f=s-1;a<s;f=a++){const u=o[a],l=o[f];u[1]>n!=l[1]>n&&t<(l[0]-u[0])*(n-u[1])/(l[1]-u[1])+u[0]&&(r=!r),i=Math.min(i,Qh(t,n,u,l))}return i===0?0:(r?1:-1)*Math.sqrt(i)}function Jh(t){let n=0,e=0,r=0;const i=t[0];for(let a=0,s=i.length,f=s-1;a<s;f=a++){const u=i[a],l=i[f],c=u[0]*l[1]-l[0]*u[1];e+=(u[0]+l[0])*c,r+=(u[1]+l[1])*c,n+=c*3}const o=new We(e/n,r/n,0,t);return n===0||o.d<0?new We(i[0][0],i[0][1],0,t):o}function Qh(t,n,e,r){let i=e[0],o=e[1],a=r[0]-i,s=r[1]-o;if(a!==0||s!==0){const f=((t-i)*a+(n-o)*s)/(a*a+s*s);f>1?(i=r[0],o=r[1]):f>0&&(i+=a*f,o+=s*f)}return a=t-i,s=n-o,a*a+s*s}function jh(){const t=document.getElementById("chart-modal");t&&(t.classList.remove("hidden"),document.body.style.overflow="hidden",t0())}function Lo(){const t=document.getElementById("chart-modal");if(t){t.classList.add("hidden"),document.body.style.overflow="auto";const n=document.getElementById("modal-content");n&&(n.innerHTML="");const e=document.getElementById("modal-window");e&&(e.style.transform="")}}function t0(){const t=document.getElementById("modal-header"),n=document.getElementById("modal-window");if(!t||!n)return;let e=!1,r=0,i=0,o=0,a=0;t.addEventListener("mousedown",s=>{e=!0,r=s.clientX,i=s.clientY;const u=n.style.transform.match(/translate\(([^,]+),\s*([^)]+)\)/);u?(o=parseFloat(u[1])||0,a=parseFloat(u[2])||0):(o=0,a=0),t.style.cursor="grabbing",s.preventDefault()}),document.addEventListener("mousemove",s=>{if(!e)return;const f=s.clientX-r,u=s.clientY-i,l=o+f,c=a+u;n.style.transform=`translate(${l}px, ${c}px)`}),document.addEventListener("mouseup",()=>{e&&(e=!1,t.style.cursor="move")})}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("close-modal");t&&t.addEventListener("click",Lo);const n=document.getElementById("chart-modal");n&&n.addEventListener("click",e=>{e.target===n&&Lo()})});const Ya={AFG:"AF",AGO:"AO",ALB:"AL",ARE:"AE",ARG:"AR",ARM:"AM",ATA:"AQ",ATF:"TF",AUS:"AU",AUT:"AT",AZE:"AZ",BDI:"BI",BEL:"BE",BEN:"BJ",BFA:"BF",BGD:"BD",BGR:"BG",BHS:"BS",BIH:"BA",BLR:"BY",BLZ:"BZ",BOL:"BO",BRA:"BR",BRN:"BN",BTN:"BT",BWA:"BW",CAF:"CF",CAN:"CA",CHE:"CH",CHL:"CL",CHN:"CN",CIV:"CI",CMR:"CM",COD:"CD",COG:"CG",COL:"CO",CRI:"CR",CUB:"CU","-99":"CY",CYP:"CY",CZE:"CZ",DEU:"DE",DJI:"DJ",DNK:"DK",DOM:"DO",DZA:"DZ",ECU:"EC",EGY:"EG",ERI:"ER",ESP:"ES",EST:"EE",ETH:"ET",FIN:"FI",FJI:"FJ",FLK:"FK",FRA:"FR",GAB:"GA",GBR:"GB",GEO:"GE",GHA:"GH",GIN:"GN",GMB:"GM",GNB:"GW",GNQ:"GQ",GRC:"GR",GTM:"GT",GUY:"GY",HND:"HN",HRV:"HR",HTI:"HT",HUN:"HU",IDN:"ID",IND:"IN",IRL:"IE",IRN:"IR",IRQ:"IQ",ISL:"IS",ISR:"IL",ITA:"IT",JAM:"JM",JOR:"JO",JPN:"JP",KAZ:"KZ",KEN:"KE",KGZ:"KG",KHM:"KH",KOR:"KR",KWT:"KW",LAO:"LA",LBN:"LB",LBR:"LR",LBY:"LY",LKA:"LK",LSO:"LS",LTU:"LT",LUX:"LU",LVA:"LV",MAR:"MA",MDA:"MD",MDG:"MG",MEX:"MX",MKD:"MK",MLI:"ML",MMR:"MM",MNE:"ME",MNG:"MN",MOZ:"MZ",MRT:"MR",MWI:"MW",MYS:"MY",NAM:"NA",NCL:"NC",NER:"NE",NGA:"NG",NIC:"NI",NLD:"NL",NOR:"NO",NPL:"NP",NZL:"NZ",OMN:"OM",PAK:"PK",PAN:"PA",PER:"PE",PHL:"PH",PNG:"PG",POL:"PL",PRI:"PR",PRK:"KP",PRT:"PT",PRY:"PY",QAT:"QA",ROU:"RO",RUS:"RU",RWA:"RW",ESH:"EH",SAU:"SA",SDN:"SD",SSD:"SS",SEN:"SN",SLB:"SB",SLE:"SL",SLV:"SV",SOM:"SO",SRB:"RS",SUR:"SR",SVK:"SK",SVN:"SI",SWE:"SE",SWZ:"SZ",SYR:"SY",TCD:"TD",TGO:"TG",THA:"TH",TJK:"TJ",TKM:"TM",TLS:"TL",TTO:"TT",TUN:"TN",TUR:"TR",TWN:"TW",TZA:"TZ",UGA:"UG",UKR:"UA",URY:"UY",USA:"US",UZB:"UZ",VEN:"VE",VNM:"VN",VUT:"VU",YEM:"YE",ZAF:"ZA",ZMB:"ZM",ZWE:"ZW"},Sn=1200,fn=700,Ct=at("#world-map").attr("viewBox",`0 0 ${Sn} ${fn}`).attr("preserveAspectRatio","xMidYMid meet"),Ee=Ct.append("g"),Vn=lh().scale(150).translate([Sn/2,fn/1.6]),Bo=Jf().projection(Vn),Er=at("body").append("div").attr("class","tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("background","rgba(255,255,255,0.8)").style("border","1px solid #ccc").style("padding","10px").style("border-radius","5px").style("font-family","sans-serif").style("font-size","14px"),Ae=Xh().scaleExtent([1,8]).translateExtent([[-500,-500],[Sn+500,fn+500]]).on("zoom",t=>{Ee.attr("transform",t.transform)});Ct.call(Ae);Object.fromEntries(Object.entries(Ya).map(([t,n])=>[n,t]));const n0="https://docs.google.com/spreadsheets/d/e/2PACX-1vRMpij3w_R0ZWyvWT8zBSi25VKx1X928VAfxc8FKBp6hanTbEkbgEs_V5XuR1koFRwtY3qvjh4ew_kk/pub?gid=1648232698&single=true&output=csv",e0="https://docs.google.com/spreadsheets/d/e/2PACX-1vTrnNiKOv8WUyhF14AzhoblMqyLsqEXgSbKHMO0d8O7X6_eIzkJwS-lzjtXGL277A/pub?gid=2106460736&single=true&output=csv",r0="./";let Et="policies",It="Electricity",ht={},Ar=!1,si=null;function Ua(){const t=document.getElementById("submenuOptions"),n=document.getElementById("targetsSubmenu"),e=document.getElementById("submenuClose");if(!t||!n||!e)return;const r=ht.targets.allTargetTypes||[];console.log("Initializing submenu with target types:",r),!Ar||t.children.length!==r.length?(t.innerHTML="",r.forEach(i=>{const o=document.createElement("button");o.className="submenu-option",o.textContent=i,o.dataset.targetType=i,i===It&&o.classList.add("active"),o.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),console.log("Target type clicked:",i),It=i,Et="targets",console.log("Updated currentTargetType to:",It),t.querySelectorAll(".submenu-option").forEach(s=>{s.classList.remove("active")}),o.classList.add("active"),console.log("Calling updateMap for target type:",i),si?si():console.error("updateMap function not available yet")}),t.appendChild(o)}),Ar||e.addEventListener("click",Va),Ar=!0):t.querySelectorAll(".submenu-option").forEach(i=>{i.classList.remove("active"),i.textContent===It&&i.classList.add("active")})}function i0(){Ua();const t=document.getElementById("targetsSubmenu");t&&t.classList.add("visible")}function Va(){const t=document.getElementById("targetsSubmenu");t&&t.classList.remove("visible")}function o0(){const t=document.getElementById("loading-message");t&&t.classList.add("visible")}function zo(){const t=document.getElementById("loading-message");t&&t.classList.remove("visible")}o0();Promise.all([uf(`${r0}world.geojson`),no(n0),no(e0)]).then(([t,n,e])=>{var $i,Ni,Ti;console.log("Data loaded successfully:"),console.log("Policy CSV rows:",n.length),console.log("Targets CSV rows:",e.length),console.log("First few targets rows:",e.slice(0,3)),!e||e.length===0||!e[0]||Object.keys(e[0]).length<5?(console.log("Targets CSV appears to be empty or malformed, using sample data"),e=[{Country:"DEU",A:"DEU",F:"2021-06-01",H:"2030",K:"65"},{Country:"FRA",A:"FRA",F:"2020-04-15",H:"2030",K:"40"},{Country:"ESP",A:"ESP",F:"2021-03-20",H:"2030",K:"42"},{Country:"ITA",A:"ITA",F:"2020-12-10",H:"2030",K:"30"},{Country:"GBR",A:"GBR",F:"2021-04-22",H:"2030",K:"40"},{Country:"NLD",A:"NLD",F:"2019-06-28",H:"2030",K:"70"},{Country:"DNK",A:"DNK",F:"2020-06-25",H:"2030",K:"50"},{Country:"SWE",A:"SWE",F:"2017-06-15",H:"2030",K:"100"},{Country:"NOR",A:"NOR",F:"2016-06-11",H:"2030",K:"67.5"},{Country:"USA",A:"USA",F:"2021-04-22",H:"2030",K:"50"},{Country:"CAN",A:"CAN",F:"2020-12-11",H:"2030",K:"90"},{Country:"JPN",A:"JPN",F:"2020-10-26",H:"2030",K:"36-38"},{Country:"AUS",A:"AUS",F:"2021-10-26",H:"2030",K:"43"},{Country:"BRA",A:"BRA",F:"2021-04-22",H:"2030",K:"45"},{Country:"IND",A:"IND",F:"2021-11-01",H:"2030",K:"50"},{Country:"CHN",A:"CHN",F:"2020-09-22",H:"2030",K:"25"}]):(console.log("Successfully loaded targets CSV with",e.length,"rows"),console.log("First row keys:",Object.keys(e[0])),console.log("First few rows:",e.slice(0,3))),console.log("D3 detected columns:",n.columns);const r=(()=>{const x=n.columns||[],k=x.find(C=>C&&C.trim().toLowerCase()==="policy_changed_detail");return k||x.find(C=>C&&C.trim().toLowerCase()==="policy_changed")||null})();function i(x){if(!r)return!1;const k=x[r];return k==null?!1:String(k).trim().toLowerCase()==="introduced"}const o=t.features.reduce((x,k)=>(x[k.properties.name]=k.id,x),{}),a=new Set,s=new Set;n.forEach(x=>{const k=x.measure?String(x.measure):"Unknown";a.add(k);const R=x.Technology_type?String(x.Technology_type):"Unknown";s.add(R)});const f=Array.from(a).sort(),u=Array.from(s).sort(),l=["#8fb9e0","#f4b37d","#9fd18b","#e79aa0","#b7a6d9","#c7a58a","#e6a9c8","#9bb8bf","#c9c97a","#86cdd3","#b9d7ef","#f7cfa2","#cfe8b9","#e8b9bd","#d6c3e9","#b8c6da"],c=Xe().domain(f).range(l),h=Xe().domain(u).range(l);function d(x){const k=String(x||"Unknown"),R=k.toLowerCase(),C=Ir("#8fb9e0"),Y=Ir(220,C.s,Math.max(0,C.l-.25)).toString();return R.includes("tender")||R.includes("auction")?Y:c(k)||"#8fb9e0"}const g=n.reduce((x,k)=>{if(!i(k))return x;const R=k.country;if(R){const C=o[R];C&&(x[C]||(x[C]=0),x[C]++)}return x},{}),w=n.reduce((x,k)=>{if(!i(k))return x;const R=k.country,C=k.Technology_type||"Unknown";if(R){const Y=o[R];Y&&(x[Y]||(x[Y]={}),x[Y][C]||(x[Y][C]=0),x[Y][C]++)}return x},{}),M=["introduc","reintr","resume","reactiv","adopt","pass","enact","implement","launch","start"],y=["suspend","terminat","repeal","remove","expire","cancel","end","discontinu","phase","sunset","halt"],_=x=>{const k=x.toLowerCase();return M.some(R=>k.includes(R))?"activate":y.some(R=>k.includes(R))?"deactivate":"other"},b={};let S=null,A=null;n.forEach(x=>{const k=x.country,R=x.measure||"Unknown",C=x.year,Y=r?x[r]:null,Z=C!=null?Number(C):NaN,G=Y!=null?String(Y):"";if(!k||!Number.isFinite(Z))return;const lt=_(G);if(lt==="other")return;const ct=o[k];ct&&(b[ct]||(b[ct]={}),b[ct][R]||(b[ct][R]=[]),b[ct][R].push({year:Z,type:lt}),(S===null||Z<S)&&(S=Z),(A===null||Z>A)&&(A=Z))});const T=S??1990,B=Math.max(A??T,2025),P={};Object.entries(b).forEach(([x,k])=>{P[x]||(P[x]={}),Object.entries(k).forEach(([R,C])=>{C.sort((G,lt)=>G.year-lt.year);let Y=!1;const Z={};C.forEach(G=>{Z[G.year]||(Z[G.year]=[]),Z[G.year].push(G.type)});for(let G=T;G<=B;G++){const lt=Z[G]||[];lt.length>0&&lt.forEach(ct=>{ct==="activate"?Y=!0:ct==="deactivate"&&(Y=!1)}),P[x][G]||(P[x][G]={}),P[x][G][R]=Y?1:0}})}),Object.keys(g).length===0&&console.warn("Warning: No policy data was processed. Check if the 'country' column in the spreadsheet is named correctly and if the header row is not sorted with the data."),console.log("Targets CSV columns:",e.columns);const D=Object.fromEntries(t.features.map(x=>[x.id,x.properties.name])),z={},E=new Set;e.forEach((x,k)=>{const R=x[Object.keys(x)[0]],C=x[Object.keys(x)[5]],Y=x[Object.keys(x)[7]],Z=x[Object.keys(x)[10]],G=x[Object.keys(x)[13]];if(k<5&&console.log(`Row ${k}:`,{countryCode3:R,decisionDate:C,targetYear:Y,targetValue:Z,targetType:G,allKeys:Object.keys(x)}),G&&R&&C&&Y&&Z){E.add(G);const lt=new Date(C),ct=parseFloat(Z),nn=parseInt(Y);!isNaN(lt.getTime())&&!isNaN(ct)&&!isNaN(nn)&&(z[G]||(z[G]={}),(!z[G][R]||new Date(z[G][R].decisionDate)<lt)&&(z[G][R]={decisionDate:C,targetYear:nn,targetValue:ct,countryName:D[R]||R,targetType:G}))}});const O=z["Primary energy"]||{};console.log("Available target types:",Array.from(E)),console.log("Processed targets data by type:",Object.keys(z)),console.log("Primary energy targets:",Object.keys(O).length,"countries"),console.log("Sample targets data:",Object.entries(O).slice(0,3)),ht={geoData:t,policies:{data:g,typeData:w,timeSeriesData:P,colorScale:null,globalColorScale:c},targets:{data:O,dataByType:z,allTargetTypes:Array.from(E),colorScale:null,colorScales:{},minMax:{}}},!ht.targets.allTargetTypes.includes("Electricity")&&ht.targets.allTargetTypes.length>0&&(It=ht.targets.allTargetTypes[0]);const N=Object.values(g).reduce((x,k)=>(typeof k=="number"&&x.push(k),x),[]),p=cr(N),m=lr(N),v=Un(ge).domain([p,m]),$={},I={};E.forEach(x=>{const k=z[x]||{},R=Object.values(k).map(C=>C.targetValue);if(R.length>0){const C=cr(R),Y=lr(R);I[x]={min:C,max:Y},$[x]=Un(br).domain([C,Y])}});const L=z["Primary energy"]||{},F=Object.values(L).map(x=>x.targetValue),H=F.length>0?cr(F):0,V=F.length>0?lr(F):100,W=H,X=V,q=$["Primary energy"]||Un(br).domain([H,V]),pt=Un(No).domain([0,100]);ht.policies.colorScale=v,ht.targets.colorScale=q,ht.targets.colorScales=$,ht.targets.minMax=I,ht.ev={colorScale:pt};function ut(x){if(Et==="policies")return x&&g[x]?v(g[x]):"#ccc";if(Et==="targets"){const k=ht.targets.dataByType[It]||{},R=ht.targets.colorScales[It];if((x==="USA"||x==="DEU"||x==="CHN")&&console.log(`getCountryColor for ${x}:`,{currentTargetType:It,currentTargetData:k[x],currentColorScale:!!R,allTargetTypes:ht.targets.allTargetTypes,dataByTypeKeys:Object.keys(ht.targets.dataByType||{}),colorScalesKeys:Object.keys(ht.targets.colorScales||{})}),x&&k[x]&&R){const C=k[x].targetValue;return R(C)}else return"#ccc"}else if(Et==="ev")return"#ccc";return"#ccc"}function gt(x,k){if(Et==="policies"){const R=g[x]||"No data";return`<strong>${k}</strong><br/>Policies: ${R}`}else if(Et==="targets"){const C=(ht.targets.dataByType[It]||{})[x];return C?`<strong>${k}</strong><br/>Target Type: ${It}<br/>Target: ${C.targetValue}% by ${C.targetYear}<br/>Decision: ${C.decisionDate}`:`<strong>${k}</strong><br/>No ${It} target data`}else if(Et==="ev")return`<strong>${k}</strong><br/>EV data coming soon`;return`<strong>${k}</strong>`}function Gt(x){const k=Ct.select("#gradient-color");let R,C,Y;switch(x){case"policies":R=ge,C=p,Y=m;break;case"targets":R=br,C=W,Y=X;break;case"ev":R=No,C=0,Y=100;break;default:R=ge,C=p,Y=m}const Z=Nr(0,1.01,.25).map(G=>({offset:`${G*100}%`,color:R(G)}));k.selectAll("stop").data(Z).attr("stop-color",G=>G.color),Ct.select(".legend").selectAll("text").remove(),Ct.select(".legend").append("text").attr("x",0).attr("y",40).style("font-size","12px").text(Math.round(C)),Ct.select(".legend").append("text").attr("x",300).attr("y",40).style("font-size","12px").text(Math.round(Y))}function ee(x){const k=[5,48];if(x==="policies"){const C=Vn(k);Ct.transition().duration(750).call(Ae.transform,Gn.translate(Sn/2-C[0]*5,fn/2-C[1]*5).scale(5))}else if(x==="targets"){const R=[5,48],C=1.3,Y=Vn(R);Ct.transition().duration(750).call(Ae.transform,Gn.translate(Sn/2-Y[0]*C,fn/2-Y[1]*C).scale(C))}}function Jt(){Ee.selectAll("path").transition().duration(500).attr("fill",x=>ut(x.id)),Gt(Et),ee(Et),Et==="targets"&&Ua()}si=Jt;function Ga(x,k){const R=document.getElementById("modal-content"),C=document.getElementById("modal-title");R&&(C&&(C.textContent=`${k}  Dashboard`),R.innerHTML=`
            <div id="dashboard-top" style="display:flex; gap:16px; width:100%; height:100%; flex-direction:row;">
                <div id="dashboard-pie" style="flex:1; min-height:300px; background:rgba(255,255,255,0.6); border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06);"></div>
                <div id="dashboard-timeseries" style="flex:1; min-height:300px; background:rgba(255,255,255,0.6); border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.06);"></div>
            </div>
        `,jh(),requestAnimationFrame(()=>{const Y=document.getElementById("dashboard-top");if(Y){const vt=()=>{const kt=Y.getBoundingClientRect().width;Y.style.flexDirection=kt<768?"column":"row"};vt(),window.addEventListener("resize",vt,{once:!0})}const Z=document.getElementById("dashboard-pie"),G=w[x]||{},lt=Object.entries(G).map(([vt,kt])=>({type:vt,count:kt}));if(Z&&lt.length>0){const vt=Z.getBoundingClientRect(),kt=at(Z).append("svg").attr("width",vt.width).attr("height",vt.height).style("filter","drop-shadow(0 4px 8px rgba(0,0,0,0.06))"),or=kt.append("g").attr("transform",`translate(${vt.width/2}, ${vt.height/2})`),Qt=Math.max(60,Math.min(vt.width,vt.height)*.35),en=Lh().outerRadius(Qt).innerRadius(Qt*.45).cornerRadius(8),mn=Dh().value(Q=>Q.count).sort(null),ar=kt.append("defs"),re=Q=>Q.replace(/[^a-zA-Z0-9_-]/g,"-");lt.forEach(Q=>{var ie,Ft;const wt=h(Q.type)||"#8fb9e0",Nt=`dash-pie-${re(Q.type)}`,vn=ar.append("linearGradient").attr("id",Nt).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");vn.append("stop").attr("offset","0%").attr("stop-color",wt).attr("stop-opacity",1),vn.append("stop").attr("offset","100%").attr("stop-color",((Ft=(ie=Zt(wt))==null?void 0:ie.darker(.3))==null?void 0:Ft.toString())||"#1e40af").attr("stop-opacity",1)});const yn=or.selectAll(".slice").data(mn(lt)).enter().append("g").attr("class","slice");yn.append("path").attr("d",en).attr("fill",Q=>`url(#dash-pie-${re(Q.data.type)})`).style("opacity",.95).on("mouseover",function(){at(this).style("filter","brightness(1.1)")}).on("mouseout",function(){at(this).style("filter",null)});const sr=lt.reduce((Q,wt)=>Q+wt.count,0);yn.append("text").attr("transform",Q=>`translate(${en.centroid(Q)})`).attr("text-anchor","middle").attr("font-size","12px").attr("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").attr("fill","#ffffff").attr("font-weight","600").style("text-shadow","0 1px 2px rgba(0,0,0,0.5)").text(Q=>{const wt=Math.round(Q.data.count/sr*100);return wt>5?`${wt}%`:""});const rn={top:12,right:12},Dt=kt.append("g").attr("transform",`translate(${vt.width-160-rn.right}, ${rn.top})`);lt.sort((Q,wt)=>wt.count-Q.count).slice(0,10).forEach((Q,wt)=>{const Nt=Dt.append("g").attr("transform",`translate(0, ${wt*18})`);Nt.append("circle").attr("cx",6).attr("cy",6).attr("r",5).attr("fill",h(Q.type)).style("stroke","rgba(255,255,255,0.9)").style("stroke-width",1),Nt.append("text").attr("x",18).attr("y",6).attr("dy","0.35em").style("font-size","11px").style("font-weight","500").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#334155").text(`${Q.type}`)})}const ct=document.getElementById("dashboard-timeseries"),nn=P[x];if(ct&&nn){let vt=function(U,it,et){const Rt=document.getElementById("modal-content");if(!Rt)return;Rt.querySelectorAll(".policy-detail-popup").forEach(oe=>oe.remove());const ot=document.createElement("div");ot.className="policy-detail-popup",ot.style.position="absolute",ot.style.right="24px",ot.style.bottom="24px",ot.style.maxWidth="360px",ot.style.background="rgba(255,255,255,0.95)",ot.style.border="1px solid #e5e7eb",ot.style.borderRadius="12px",ot.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)",ot.style.padding="14px",ot.style.zIndex="1000";const mt=document.createElement("div");mt.style.display="flex",mt.style.justifyContent="space-between",mt.style.alignItems="center",mt.style.marginBottom="8px",mt.innerHTML=`<span style="font-weight:600; color:#111827">${k}  ${U} (${it})</span>`;const St=document.createElement("button");St.textContent="",St.style.fontSize="18px",St.style.color="#6b7280",St.style.border="none",St.style.background="none",St.style.cursor="pointer",St.onclick=()=>ot.remove(),mt.appendChild(St),ot.appendChild(mt);const jt=document.createElement("div");jt.style.display="flex",jt.style.flexDirection="column",jt.style.gap="8px";const wn=et.slice(0,5);wn.length===0?jt.innerHTML='<div style="color:#6b7280">No specific policies matched.</div>':wn.forEach(oe=>{const on=document.createElement("div");on.style.padding="10px",on.style.borderRadius="8px",on.style.background="#f9fafb",on.style.border="1px solid #e5e7eb";const xn=Cn=>oe[Cn]??"";on.innerHTML=`
                                <div style="font-weight:600; color:#374151;">${xn("level_1")||"(no title)"}</div>
                                <div style="font-size:12px; color:#4b5563;">Tech: ${xn("Technology_type")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Currency: ${xn("level_1_currency")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Percent Detail: ${xn("level_1_percent_type_detail")||"-"}</div>
                                <div style="font-size:12px; color:#4b5563;">Unit: ${xn("level_1_unit")||"-"}</div>
                            `,jt.appendChild(on)}),ot.appendChild(jt),Rt.appendChild(ot)};const kt=Object.keys(nn).map(Number).sort(),or=new Set;Object.entries(nn).forEach(([U,it])=>{Object.keys(it).forEach(et=>or.add(et))});const Qt={},en=new Set;kt.forEach(U=>{Qt[U]={};const it=nn[U];it&&Object.entries(it).forEach(([et,Rt])=>{Rt>0&&(Qt[U][et]=1,en.add(et))})});const mn=kt.filter(U=>Object.values(Qt[U]||{}).some(it=>it>0));if(mn.length===0)return;const ar=mn[0],re=mn[mn.length-1],yn=kt.filter(U=>U>=ar&&U<=re),sr=yn.map(U=>{const it={year:U};return Array.from(en).forEach(et=>{it[et]=Qt[U][et]||0}),it}),rn=ct.getBoundingClientRect(),Dt={top:24,right:160,bottom:40,left:56},Rn=rn.width-Dt.left-Dt.right,Q=rn.height-Dt.top-Dt.bottom,wt=at(ct).append("svg").attr("width",rn.width).attr("height",rn.height).style("background","linear-gradient(180deg, rgba(248,250,252,0.9), rgba(241,245,249,0.9))").style("border-radius","12px").style("filter","drop-shadow(0 2px 8px rgba(0,0,0,0.06))"),Nt=wt.append("g").attr("transform",`translate(${Dt.left},${Dt.top})`),vn=Da().domain(yn.map(String)).range([0,Rn]).padding(.15),ie=Math.max(...yn.map(U=>Array.from(en).reduce((it,et)=>it+(Qt[U][et]||0),0))),Ft=Oa().domain([0,ie]).range([Q,0]),ur=Hh().keys(Array.from(en))(sr);Nt.append("g").selectAll(".grid-line").data(Ft.ticks(4)).enter().append("line").attr("x1",0).attr("x2",Rn).attr("y1",U=>Ft(U)).attr("y2",U=>Ft(U)).style("stroke","#e2e8f0").style("stroke-dasharray","2,2").style("opacity",.3);const Za=wt.append("defs");ur.forEach(U=>{U.forEach(it=>{var mt,St;const et=d(U.key)||"#8fb9e0",Rt=`dash-ts-${it.data.year}-${String(U.key).replace(/[^a-zA-Z0-9_-]/g,"-")}`,ot=Za.append("linearGradient").attr("id",Rt).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");ot.append("stop").attr("offset","0%").attr("stop-color",et).attr("stop-opacity",1),ot.append("stop").attr("offset","100%").attr("stop-color",((St=(mt=Zt(et))==null?void 0:mt.darker(.3))==null?void 0:St.toString())||"#1e40af").attr("stop-opacity",1)})}),Nt.selectAll(".stack").data(ur).enter().append("g").attr("class","stack").selectAll("rect").data(U=>U).enter().append("rect").attr("x",U=>vn(String(U.data.year))||0).attr("y",U=>Ft(U[1])).attr("height",U=>Ft(U[0])-Ft(U[1])).attr("width",vn.bandwidth()).attr("rx",3).attr("ry",3).attr("fill",function(U){const it=at(this.parentNode).datum().key,et=String(it).replace(/[^a-zA-Z0-9_-]/g,"-");return`url(#dash-ts-${U.data.year}-${et})`}).style("opacity",.9).on("click",function(U,it){const et=at(this.parentNode).datum().key,Rt=Number(it.data.year),ot=n.filter(mt=>{const St=mt.country,jt=mt.measure||"Unknown",wn=Number(mt.year);return!i(mt)||o[St||""]!==x||jt!==et||!Number.isFinite(wn)||wn>Rt?!1:!(b[x]&&b[x][et]||[]).some(Cn=>Cn.type==="deactivate"&&Cn.year>wn&&Cn.year<=Rt)});vt(et,Rt,ot)}).on("mouseover",function(){at(this).style("opacity",1)}).on("mouseout",function(){at(this).style("opacity",.9)}),Nt.append("g").attr("transform",`translate(0, ${Q})`).call(vs(vn)).selectAll("text").style("font-size","12px").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569"),Nt.append("g").call(ws(Ft).ticks(4)).selectAll("text").style("font-size","12px").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569");const Wa=ur.map(U=>U.key),ki=Array.from(new Set(Wa)).slice(0,6),Ri=130,Ci=16,Ja=ki.length*Ci+10,Ii=Nt.append("g").attr("class","ts-legend").attr("transform",`translate(${Rn-Ri-8}, 6)`);Ii.append("rect").attr("width",Ri).attr("height",Ja).attr("rx",8).attr("ry",8).style("fill","rgba(255,255,255,0.85)").style("stroke","#e5e7eb").style("stroke-width",1),ki.forEach((U,it)=>{const et=Ii.append("g").attr("transform",`translate(8, ${8+it*Ci})`);et.append("rect").attr("x",0).attr("y",2).attr("width",10).attr("height",10).attr("rx",2).attr("ry",2).style("fill",d(U)).style("stroke","rgba(255,255,255,0.9)").style("stroke-width",.8),et.append("text").attr("x",16).attr("y",12).text(String(U).length>18?`${String(U).slice(0,16)}`:String(U)).style("font-size","11px").style("fill","#334155").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif")}),Nt.append("text").attr("transform","rotate(-90)").attr("y",0-Dt.left).attr("x",0-Q/2).attr("dy","1em").style("text-anchor","middle").style("font-size","12px").style("font-weight","600").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569").text("Policy Types"),Nt.append("text").attr("transform",`translate(${Rn/2}, ${Q+Dt.bottom-5})`).style("text-anchor","middle").style("font-size","12px").style("font-weight","600").style("font-family","Inter, -apple-system, BlinkMacSystemFont, sans-serif").style("fill","#475569").text("Year")}}))}Ee.selectAll("path").data(t.features).enter().append("path").attr("d",Bo).attr("fill",x=>ut(x.id)).attr("class","country").on("mouseover",function(x,k){at(this).style("stroke","black").style("stroke-width",1.5);const R=k.id,C=k.properties.name;Er.style("visibility","visible").html(gt(R,C))}).on("mousemove",function(x){Er.style("top",x.pageY-10+"px").style("left",x.pageX+10+"px")}).on("mouseout",function(){at(this).style("stroke",null).style("stroke-width",null),Er.style("visibility","hidden")}).on("click",function(x,k){const R=k.id,C=k.properties.name;Ga(R,C)}),($i=document.getElementById("close-panel"))==null||$i.addEventListener("click",()=>{var x,k;(x=document.getElementById("policy-panel"))==null||x.classList.remove("visible"),(k=document.getElementById("panel-backdrop"))==null||k.classList.remove("visible")}),(Ni=document.getElementById("panel-backdrop"))==null||Ni.addEventListener("click",()=>{var x,k;(x=document.getElementById("policy-panel"))==null||x.classList.remove("visible"),(k=document.getElementById("panel-backdrop"))==null||k.classList.remove("visible")}),Ee.selectAll("text.country-label").data(t.features).enter().append("text").attr("class","country-label").attr("transform",x=>{let k;if(x.geometry.type==="Polygon"){const R=Po(x.geometry.coordinates);k=[R[0],R[1]]}else if(x.geometry.type==="MultiPolygon"){let R=x.geometry.coordinates[0],C=0;x.geometry.coordinates.forEach(Z=>{const G=Nf({type:"Polygon",coordinates:Z});G>C&&(C=G,R=Z)});const Y=Po(R);k=[Y[0],Y[1]]}else{const R=Bo.centroid(x);k=[R[0],R[1]]}return isNaN(k[0])||isNaN(k[1])?"translate(-9999, -9999)":`translate(${Vn(k)})`}).attr("text-anchor","middle").attr("font-size","2px").attr("fill","black").style("pointer-events","none").text(x=>Ya[x.id]||"");const Mi=300,nr=20,er=Ct.append("g").attr("class","legend").attr("transform",`translate(20, ${fn-50})`),Ka=Ct.append("defs").append("linearGradient").attr("id","gradient-color"),qa=Nr(0,1.01,.25).map(x=>({offset:`${x*100}%`,color:ge(x)}));Ka.selectAll("stop").data(qa).enter().append("stop").attr("offset",x=>x.offset).attr("stop-color",x=>x.color),er.append("rect").attr("width",Mi).attr("height",nr).style("fill","url(#gradient-color)"),er.append("text").attr("x",0).attr("y",nr+20).style("font-size","12px").text(p),er.append("text").attr("x",Mi).attr("y",nr+20).style("text-anchor","end").style("font-size","12px").text(m);const Xa=[5,48],rr=5,Si=Vn(Xa);Ct.call(Ae.transform,Gn.translate(Sn/2-Si[0]*rr,fn/2-Si[1]*rr).scale(rr)),(Ti=document.getElementById("world-map-container"))==null||Ti.classList.add("loaded"),document.querySelectorAll('input[name="mapType"]').forEach(x=>{x.addEventListener("change",k=>{const R=k.target;R.checked&&(Et=R.value,Jt())})});const ir=document.getElementById("mapTypeToggle"),Ei=document.querySelectorAll(".toggle-option");ir&&Ei.length>0&&Ei.forEach((x,k)=>{x.addEventListener("click",()=>{const C=["policies","ev","targets"][k];if(C==="targets")Et="targets",ir.setAttribute("data-active",C),i0(),Jt();else{Va(),ir.setAttribute("data-active",C);const Y=document.querySelector(`input[name="mapType"][value="${C}"]`);Y&&(Y.checked=!0,Et=C,Jt())}})}),Jt(),zo();function Ai(){const x=document.getElementById("world-map-container"),k=document.getElementById("mapTypeToggle"),R=document.getElementById("targetsSubmenu");if(!x||!k)return;const C=x.getBoundingClientRect(),Y=Math.round(C.width*.08),Z=Math.max(220,Math.min(380,Y)),G=Math.max(40,Math.min(72,Math.round(Z*.17)));k.style.width=`${Z}px`,k.style.height=`${G}px`,R&&(R.style.width=`${Z}px`)}requestAnimationFrame(Ai),window.addEventListener("resize",Ai)}).catch(t=>{console.error("Error loading data:",t),zo()});
